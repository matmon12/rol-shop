{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/img/icon/plus-white.svg';\nimport _imports_1 from '@/img/icon/drawer.svg';\nconst _withScopeId = n => (_pushScopeId(\"data-v-1d7c5d00\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"address-wrapper\"\n};\nconst _hoisted_2 = {\n  class: \"address__head\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"address__title\"\n}, \"Адрес доставки\", -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"plus\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"address__list\"\n};\nconst _hoisted_6 = {\n  class: \"address__info\"\n};\nconst _hoisted_7 = {\n  class: \"address__address\"\n};\nconst _hoisted_8 = {\n  class: \"address__other\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"address__remove-btn\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_1,\n  alt: \"address\"\n})], -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_app_button = _resolveComponent(\"app-button\");\n  const _component_el_popconfirm = _resolveComponent(\"el-popconfirm\");\n  const _component_EmptyBlock = _resolveComponent(\"EmptyBlock\");\n  const _directive_auto_animate = _resolveDirective(\"auto-animate\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createVNode(_component_app_button, {\n    class: \"address__btn\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.push('/rol-shop/map'))\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" Новый адрес \"), _hoisted_4]),\n    _: 1 /* STABLE */\n  })]), _withDirectives((_openBlock(), _createElementBlock(\"ul\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.address, (item, id) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      class: \"address__list-item\",\n      key: id\n    }, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"p\", _hoisted_7, _toDisplayString(`${item.city}, ${item.address}`), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_8, \" Подьезд \" + _toDisplayString(item.input) + \", этаж \" + _toDisplayString(item.floor) + \", квартира \" + _toDisplayString(item.apartment), 1 /* TEXT */)]), _createVNode(_component_el_popconfirm, {\n      width: \"220\",\n      title: \"Вы уверены что хотите удалить?\",\n      onConfirm: $event => $options.removeAddress(item.id),\n      \"confirm-button-text\": \"да\",\n      \"cancel-button-text\": \"нет\",\n      \"icon-color\": \"#626AEF\",\n      icon: $data.EpInfoFilled,\n      class: \"address-window\"\n    }, {\n      reference: _withCtx(() => [_hoisted_9]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onConfirm\", \"icon\"])]);\n  }), 128 /* KEYED_FRAGMENT */))])), [[_directive_auto_animate]]), $setup.address.length == 0 ? (_openBlock(), _createBlock(_component_EmptyBlock, {\n    key: 0,\n    imgUrl: require('@/img/icon/address-empty.svg'),\n    title: \"У вас нет сохраненных адресов\",\n    text: \"Переходите в интересующую вас категорию и сделайте свой первый заказ и адрес сохранится автоматически\"\n  }, null, 8 /* PROPS */, [\"imgUrl\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["_imports_0","_imports_1","class","_createElementVNode","src","alt","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_app_button","onClick","_cache","$event","_ctx","$router","push","default","_withCtx","_createTextVNode","_hoisted_4","_","_hoisted_5","_Fragment","_renderList","$setup","address","item","id","key","_hoisted_6","_hoisted_7","_toDisplayString","city","_hoisted_8","input","floor","apartment","_component_el_popconfirm","width","title","onConfirm","$options","removeAddress","icon","$data","EpInfoFilled","reference","_hoisted_9","length","_createBlock","_component_EmptyBlock","imgUrl","require","text","_createCommentVNode"],"sources":["C:\\gitPages\\rol-shop\\src\\pages\\Address.vue"],"sourcesContent":["<template>\r\n  <div class=\"address-wrapper\">\r\n    <div class=\"address__head\">\r\n      <h1 class=\"address__title\">Адрес доставки</h1>\r\n      <app-button class=\"address__btn\" @click=\"$router.push('/rol-shop/map')\">\r\n        Новый адрес\r\n        <img src=\"@/img/icon/plus-white.svg\" alt=\"plus\" />\r\n      </app-button>\r\n    </div>\r\n\r\n    <ul class=\"address__list\" v-auto-animate>\r\n      <li class=\"address__list-item\" v-for=\"(item, id) in address\" :key=\"id\">\r\n        <div class=\"address__info\">\r\n          <p class=\"address__address\">{{ `${item.city}, ${item.address}` }}</p>\r\n          <p class=\"address__other\">\r\n            Подьезд {{ item.input }}, этаж {{ item.floor }}, квартира\r\n            {{ item.apartment }}\r\n          </p>\r\n        </div>\r\n\r\n        <el-popconfirm\r\n          width=\"220\"\r\n          title=\"Вы уверены что хотите удалить?\"\r\n          @confirm=\"removeAddress(item.id)\"\r\n          confirm-button-text=\"да\"\r\n          cancel-button-text=\"нет\"\r\n          icon-color=\"#626AEF\"\r\n          :icon=\"EpInfoFilled\"\r\n          class=\"address-window\"\r\n        >\r\n          <template #reference>\r\n            <button class=\"address__remove-btn\">\r\n              <img src=\"@/img/icon/drawer.svg\" alt=\"address\" />\r\n            </button>\r\n          </template>\r\n        </el-popconfirm>\r\n      </li>\r\n    </ul>\r\n    <EmptyBlock\r\n      v-if=\"address.length == 0\"\r\n      :imgUrl=\"require('@/img/icon/address-empty.svg')\"\r\n      title=\"У вас нет сохраненных адресов\"\r\n      text=\"Переходите в интересующую вас категорию и сделайте свой первый заказ и адрес сохранится автоматически\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { inject } from \"vue\";\r\nimport { mapMutations } from \"vuex\";\r\nimport EpInfoFilled from '~icons/ep/info-filled';\r\nexport default {\r\n  data() {\r\n    return {\r\n      paths: [\r\n        { name: \"Профиль\", path: \"/rol-shop/profile\" },\r\n        { name: \"Адрес доставки\", path: \"/rol-shop/profile/address\" },\r\n      ],\r\n      EpInfoFilled: EpInfoFilled\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations({\r\n      setPaths: \"crumbs/setPaths\",\r\n    }),\r\n    async fetchAddress() {\r\n      let apiRes = null;\r\n      try {\r\n        const { data } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/address`);\r\n\r\n        this.address = data;\r\n      } catch (err) {\r\n        apiRes = err.response.status;\r\n      } finally {\r\n        if (apiRes == 404) {\r\n          this.$router.push(\"/rol-shop/404\");\r\n        }\r\n      }\r\n    },\r\n    async removeAddress(id) {\r\n      let apiRes = null;\r\n      try {\r\n        await axios.delete(`https://c2ff7a8de0a119c8.mokky.dev/address/${id}`);\r\n\r\n        let index = this.address.findIndex((item) => item.id === id);\r\n        if (index !== -1) {\r\n          this.address.splice(index, 1);\r\n        }\r\n      } catch (err) {\r\n        apiRes = err.response.status;\r\n      } finally {\r\n        if (apiRes == 404) {\r\n          this.$router.push(\"/rol-shop/404\");\r\n        }\r\n      }\r\n    },\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {\r\n      vm.setPaths(vm.paths);\r\n    });\r\n  },\r\n  mounted() {\r\n    this.fetchAddress();\r\n  },\r\n  setup() {\r\n    const { address } = inject(\"address\");\r\n\r\n    return {\r\n      address,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.address {\r\n  &-wrapper {\r\n    flex-grow: 1;\r\n  }\r\n  &__head {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 24px;\r\n  }\r\n\r\n  &__title {\r\n    color: var(--grey-dark);\r\n    font-size: 48px;\r\n    font-weight: 700;\r\n    line-height: 133%;\r\n  }\r\n  &__btn {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    height: 56px;\r\n  }\r\n}\r\n.address {\r\n  &__list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n  }\r\n\r\n  &__list-item {\r\n    width: 100%;\r\n    background-color: var(--white);\r\n    border-radius: $border;\r\n    padding: 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 16px;\r\n    &::before {\r\n      content: url(\"@/img/icon/location-grey.svg\");\r\n      height: 22px;\r\n    }\r\n  }\r\n\r\n  &__info {\r\n    flex-grow: 1;\r\n  }\r\n\r\n  &__address {\r\n    color: var(--grey-dark);\r\n    font-weight: 500;\r\n  }\r\n\r\n  &__other {\r\n    color: rgb(104, 104, 112);\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n  }\r\n\r\n  &__remove-btn {\r\n    background-color: rgba(39, 39, 39, 0.05);\r\n    border-radius: 8px;\r\n    height: 29px;\r\n    width: 29px;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.address-window\r\ndisplay: none;\r\n}\r\n</style>\r\n"],"mappings":";;OAMaA,UAA+B;OA0BzBC,UAA2B;;;EA/BvCC,KAAK,EAAC;AAAiB;;EACrBA,KAAK,EAAC;AAAe;gEACxBC,mBAAA,CAA8C;EAA1CD,KAAK,EAAC;AAAgB,GAAC,gBAAc;gEAGvCC,mBAAA,CAAkD;EAA7CC,GAA+B,EAA/BJ,UAA+B;EAACK,GAAG,EAAC;;;EAIzCH,KAAK,EAAC;AAAe;;EAEhBA,KAAK,EAAC;AAAe;;EACrBA,KAAK,EAAC;AAAkB;;EACxBA,KAAK,EAAC;AAAgB;gEAiBvBC,mBAAA,CAES;EAFDD,KAAK,EAAC;AAAqB,I,aACjCC,mBAAA,CAAiD;EAA5CC,GAA2B,EAA3BH,UAA2B;EAACI,GAAG,EAAC;;;;;;;uBA/BjDC,mBAAA,CA2CM,OA3CNC,UA2CM,GA1CJJ,mBAAA,CAMM,OANNK,UAMM,GALJC,UAA8C,EAC9CC,YAAA,CAGaC,qBAAA;IAHDT,KAAK,EAAC,cAAc;IAAEU,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;;IAJ3DC,OAAA,EAAAC,QAAA,CAI8E,MAEtE,CANRC,gBAAA,CAI8E,eAEtE,GAAAC,UAAkD,C;IAN1DC,CAAA;uCAUIhB,mBAAA,CA2BK,MA3BLiB,UA2BK,I,kBA1BHjB,mBAAA,CAyBKkB,SAAA,QApCXC,WAAA,CAW0DC,MAAA,CAAAC,OAAO,EAXjE,CAW6CC,IAAI,EAAEC,EAAE;yBAA/CvB,mBAAA,CAyBK;MAzBDJ,KAAK,EAAC,oBAAoB;MAAgC4B,GAAG,EAAED;QACjE1B,mBAAA,CAMM,OANN4B,UAMM,GALJ5B,mBAAA,CAAqE,KAArE6B,UAAqE,EAAAC,gBAAA,IAAnCL,IAAI,CAACM,IAAI,KAAKN,IAAI,CAACD,OAAO,oBAC5DxB,mBAAA,CAGI,KAHJgC,UAGI,EAHsB,WAChB,GAAAF,gBAAA,CAAGL,IAAI,CAACQ,KAAK,IAAG,SAAO,GAAAH,gBAAA,CAAGL,IAAI,CAACS,KAAK,IAAG,aAC/C,GAAAJ,gBAAA,CAAGL,IAAI,CAACU,SAAS,iB,GAIrB5B,YAAA,CAegB6B,wBAAA;MAddC,KAAK,EAAC,KAAK;MACXC,KAAK,EAAC,gCAAgC;MACrCC,SAAO,EAAA5B,MAAA,IAAE6B,QAAA,CAAAC,aAAa,CAAChB,IAAI,CAACC,EAAE;MAC/B,qBAAmB,EAAC,IAAI;MACxB,oBAAkB,EAAC,KAAK;MACxB,YAAU,EAAC,SAAS;MACnBgB,IAAI,EAAEC,KAAA,CAAAC,YAAY;MACnB7C,KAAK,EAAC;;MAEK8C,SAAS,EAAA7B,QAAA,CAClB,MAES,CAFT8B,UAES,C;MAjCrB3B,CAAA;;mEAuCYI,MAAA,CAAAC,OAAO,CAACuB,MAAM,S,cADtBC,YAAA,CAKEC,qBAAA;IA3CNtB,GAAA;IAwCOuB,MAAM,EAAEC,OAAO;IAChBb,KAAK,EAAC,+BAA+B;IACrCc,IAAI,EAAC;yCA1CXC,mBAAA,e"},"metadata":{},"sourceType":"module","externalDependencies":[]}