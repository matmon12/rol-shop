{"ast":null,"code":"import axios from \"axios\";\nimport { inject } from \"vue\";\nimport { mapActions, mapMutations } from \"vuex\";\nexport default {\n  data() {\n    return {\n      categoryMap: {\n        rolls: \"Роллы\",\n        sushi: \"Суши\",\n        sets: \"Сеты\",\n        snacks: \"Боулы\",\n        drinks: \"Напитки\",\n        rollsq: \"Соусы\"\n      },\n      category: null,\n      limit: 8,\n      isLoading: false,\n      isAllLoading: false,\n      total: 0,\n      filters: {\n        selectSort: \"-price\",\n        filter_1: this.$route.params.category === \"drinks\" ? false : true,\n        filter_2: false,\n        filter_3: false,\n        ingredients_1: this.$route.params.category === \"drinks\" ? false : true,\n        ingredients_2: false,\n        ingredients_3: this.$route.params.category === \"drinks\" ? false : true,\n        ingredients_4: this.$route.params.category === \"drinks\" ? false : true,\n        ingredients_5: false,\n        ingredients_6: false,\n        ingredients_7: false,\n        ingredients_8: false,\n        ingredients_9: false\n      },\n      sortOptions: [{\n        value: \"title\",\n        name: \"По названию\"\n      }, {\n        value: \"price\",\n        name: \"От дешевых к дорогим\"\n      }, {\n        value: \"-price\",\n        name: \"От дорогих к дешевым\"\n      }],\n      ingredients: [{\n        id: 1,\n        color: \"#E86853\",\n        name: \"лосось\",\n        imgUrl: require(\"@/img/ingredients/ingredients-1.png\")\n      }, {\n        id: 2,\n        color: \"#D57E3D\",\n        name: \"угорь\",\n        imgUrl: require(\"@/img/ingredients/ingredients-2.png\")\n      }, {\n        id: 3,\n        color: \"#df394a\",\n        name: \"тунец\",\n        imgUrl: require(\"@/img/ingredients/ingredients-3.png\")\n      }, {\n        id: 4,\n        color: \"#FDA49A\",\n        name: \"куриное филе\",\n        imgUrl: require(\"@/img/ingredients/ingredients-4.png\")\n      }, {\n        id: 5,\n        color: \"#D8CC88\",\n        name: \"тофу\",\n        imgUrl: require(\"@/img/ingredients/ingredients-5.png\")\n      }, {\n        id: 6,\n        color: \"#eddac2\",\n        name: \"сливочный сыр\",\n        imgUrl: require(\"@/img/ingredients/ingredients-6.png\")\n      }, {\n        id: 7,\n        color: \"#5FD63A\",\n        name: \"авокадо\",\n        imgUrl: require(\"@/img/ingredients/ingredients-7.png\")\n      }, {\n        id: 8,\n        color: \"#c41c07\",\n        name: \"помидор\",\n        imgUrl: require(\"@/img/ingredients/ingredients-8.png\")\n      }, {\n        id: 9,\n        color: \"#916d43\",\n        name: \"гриб шитаки\",\n        imgUrl: require(\"@/img/ingredients/ingredients-9.png\")\n      }],\n      dialogVisible: false,\n      error: false\n    };\n  },\n  components: {},\n  computed: {\n    paths() {\n      return [{\n        name: this.categoryMap[this.category],\n        path: this.$route.params\n      }];\n    },\n    countIngredients() {\n      return Object.keys(this.filters).filter(key => key.startsWith('ingredients_') && this.filters[key]).length;\n    }\n  },\n  methods: {\n    ...mapActions({\n      addToFavorite: \"favorite/addToFavorite\"\n    }),\n    ...mapMutations({\n      setPaths: \"crumbs/setPaths\"\n    }),\n    async fetchItems(name) {\n      let apiRes = null;\n      try {\n        this.isLoading = true;\n        const params = {\n          page: 1,\n          limit: this.limit,\n          filter_1: this.filters.filter_1 ? 1 : undefined,\n          filter_2: this.filters.filter_2 ? 1 : undefined,\n          filter_3: this.filters.filter_3 ? 1 : undefined,\n          \"ingridients.1\": this.filters.ingredients_1 ? 1 : undefined,\n          \"ingridients.2\": this.filters.ingredients_2 ? 1 : undefined,\n          \"ingridients.3\": this.filters.ingredients_3 ? 1 : undefined,\n          \"ingridients.4\": this.filters.ingredients_4 ? 1 : undefined,\n          \"ingridients.5\": this.filters.ingredients_5 ? 1 : undefined,\n          \"ingridients.6\": this.filters.ingredients_6 ? 1 : undefined,\n          \"ingridients.7\": this.filters.ingredients_7 ? 1 : undefined,\n          \"ingridients.8\": this.filters.ingredients_8 ? 1 : undefined,\n          \"ingridients.9\": this.filters.ingredients_9 ? 1 : undefined,\n          sortBy: this.filters.selectSort,\n          category: this.category\n        };\n        const {\n          data\n        } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/items`, {\n          params\n        });\n\n        // Всего результатов\n        this.total = data.meta.total_items;\n        this.categores = data.items.map(obj => ({\n          ...obj,\n          isFavorite: false,\n          favoriteId: null,\n          isAdded: false,\n          count: 1\n        }));\n      } catch (err) {\n        apiRes = err.response.status;\n      } finally {\n        this.isLoading = false;\n        if (apiRes == 404) {\n          this.error = true;\n        }\n      }\n    },\n    async fetchFavorites() {\n      let apiRes = null;\n      try {\n        const {\n          data: favorites\n        } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/favorites`);\n        this.categores = this.categores.map(item => {\n          const favorite = favorites.find(favorite => favorite.item_id === item.id);\n          if (!favorite) {\n            return item;\n          }\n          return {\n            ...item,\n            isFavorite: true,\n            favoriteId: favorite.id\n          };\n        });\n      } catch (err) {\n        apiRes = err.response.status;\n      } finally {\n        if (apiRes == 404) {\n          this.error = true;\n        }\n      }\n    },\n    load(name) {\n      this.fetchItems(name).then(() => {\n        // включение кнопки для карточек\n        this.categores = this.categores.map(item => ({\n          ...item,\n          isAdded: this.cart.some(cartItem => cartItem.id === item.id)\n        }));\n        this.fetchFavorites();\n      });\n      this.isAllLoading = false;\n    },\n    async loadMoreCategory() {\n      let apiRes = null;\n      try {\n        let allItemsLoaded = false;\n        let page = 1;\n        while (!allItemsLoaded) {\n          page += 1;\n          const params = {\n            page: page,\n            limit: this.limit,\n            filter_1: this.filters.filter_1 ? 1 : undefined,\n            filter_2: this.filters.filter_2 ? 1 : undefined,\n            filter_3: this.filters.filter_3 ? 1 : undefined,\n            \"ingridients.1\": this.filters.ingredients_1 ? 1 : undefined,\n            \"ingridients.2\": this.filters.ingredients_2 ? 1 : undefined,\n            \"ingridients.3\": this.filters.ingredients_3 ? 1 : undefined,\n            \"ingridients.4\": this.filters.ingredients_4 ? 1 : undefined,\n            \"ingridients.5\": this.filters.ingredients_5 ? 1 : undefined,\n            \"ingridients.6\": this.filters.ingredients_6 ? 1 : undefined,\n            \"ingridients.7\": this.filters.ingredients_7 ? 1 : undefined,\n            \"ingridients.8\": this.filters.ingredients_8 ? 1 : undefined,\n            \"ingridients.9\": this.filters.ingredients_9 ? 1 : undefined,\n            sortBy: this.filters.selectSort,\n            category: this.category\n          };\n          const {\n            data\n          } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/items`, {\n            params\n          });\n          this.categores = this.categores.concat(data.items.map(obj => ({\n            ...obj,\n            isFavorite: false,\n            favoriteId: null,\n            isAdded: false,\n            count: 1\n          })));\n          if (data.meta.remaining_count == 0) {\n            allItemsLoaded = true;\n            this.categores = this.categores.map(item => ({\n              ...item,\n              isAdded: this.cart.some(cartItem => cartItem.id === item.id)\n            }));\n            this.fetchFavorites();\n          }\n        }\n        this.isAllLoading = true;\n      } catch (err) {\n        apiRes = err.response.status;\n      } finally {\n        if (apiRes == 404) {\n          this.error = true;\n        }\n      }\n    },\n    showDialog() {\n      this.dialogVisible = true;\n    },\n    hideDialog() {\n      this.dialogVisible = false;\n    },\n    resetIngredients() {\n      for (let key in this.filters) {\n        if (key.startsWith(\"ingredients_\")) {\n          this.filters[key] = false;\n        }\n      }\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      vm.category = to.params.category;\n      vm.setPaths(vm.paths);\n    });\n  },\n  beforeRouteUpdate(to, from, next) {\n    // \n    // обновление категории\n    this.category = to.params.category;\n    // отключение фильтров для напитков\n    this.filters.filter_1 = this.category === \"drinks\" ? false : true;\n    this.filters.ingredients_1 = this.category === \"drinks\" ? false : true;\n    this.filters.ingredients_3 = this.category === \"drinks\" ? false : true;\n    this.filters.ingredients_4 = this.category === \"drinks\" ? false : true;\n    this.load();\n    next();\n  },\n  mounted() {\n    this.load();\n  },\n  watch: {\n    // глобальное слежение\n    filters: {\n      handler() {\n        this.load();\n      },\n      deep: true\n    }\n  },\n  setup() {\n    const {\n      categores\n    } = inject(\"items\");\n    const {\n      cart,\n      addToCart,\n      removeFromCart\n    } = inject(\"cart\");\n    const onClickAddPlus = item => {\n      if (!item.isAdded) {\n        addToCart(item);\n      } else {\n        removeFromCart(item);\n        // карточка category\n        categores.value.forEach(pl => {\n          if (pl.id === item.id) {\n            pl.isAdded = false;\n            pl.count = 1;\n          }\n        });\n      }\n    };\n    return {\n      cart,\n      onClickAddPlus,\n      categores\n    };\n  }\n};","map":{"version":3,"names":["axios","inject","mapActions","mapMutations","data","categoryMap","rolls","sushi","sets","snacks","drinks","rollsq","category","limit","isLoading","isAllLoading","total","filters","selectSort","filter_1","$route","params","filter_2","filter_3","ingredients_1","ingredients_2","ingredients_3","ingredients_4","ingredients_5","ingredients_6","ingredients_7","ingredients_8","ingredients_9","sortOptions","value","name","ingredients","id","color","imgUrl","require","dialogVisible","error","components","computed","paths","path","countIngredients","Object","keys","filter","key","startsWith","length","methods","addToFavorite","setPaths","fetchItems","apiRes","page","undefined","sortBy","get","meta","total_items","categores","items","map","obj","isFavorite","favoriteId","isAdded","count","err","response","status","fetchFavorites","favorites","item","favorite","find","item_id","load","then","cart","some","cartItem","loadMoreCategory","allItemsLoaded","concat","remaining_count","showDialog","hideDialog","resetIngredients","beforeRouteEnter","to","from","next","vm","beforeRouteUpdate","mounted","watch","handler","deep","setup","addToCart","removeFromCart","onClickAddPlus","forEach","pl"],"sources":["C:\\gitPages\\rol-shop\\src\\pages\\CategoryPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"category\" v-if=\"!error\">\r\n    <div class=\"container\">\r\n      <div class=\"category__inner\">\r\n        <Category class=\"category-pages\"/>\r\n\r\n        <Crumbs :paths=\"paths\" class=\"crumbs\" />\r\n\r\n        <div class=\"card\">\r\n          <h2 class=\"card__title\">{{ this.categoryMap[this.category] }}</h2>\r\n\r\n          <div class=\"filters\">\r\n            <div class=\"filters__top\">\r\n              <div class=\"filters__top-left\">\r\n                <button class=\"filters__top-btn\">Все</button>\r\n                <button class=\"filters__top-btn\">Классические</button>\r\n                <button class=\"filters__top-btn\">Маки</button>\r\n                <button class=\"filters__top-btn\">Драконы</button>\r\n                <button class=\"filters__top-btn\">Запеченные</button>\r\n                <button class=\"filters__top-btn\">Феликсы</button>\r\n                <button class=\"filters__top-btn\">Сладкие</button>\r\n              </div>\r\n              <app-select\r\n                v-model=\"filters.selectSort\"\r\n                :options=\"sortOptions\"\r\n              ></app-select>\r\n            </div>\r\n            <div class=\"filters__bottom\">\r\n              <div class=\"filters__bottom-left\">\r\n                <button\r\n                  class=\"filters__bottom-btn\"\r\n                  @click=\"filters.filter_1 = !filters.filter_1\"\r\n                  :class=\"{ 'filters--checked': filters.filter_1 }\"\r\n                >\r\n                  <div class=\"filters__bottom-imgwrapper\">\r\n                    <img src=\"@/img/icon/filter-1.svg\" alt=\"icon\" />\r\n                  </div>\r\n                  Острые\r\n                </button>\r\n                <button\r\n                  class=\"filters__bottom-btn\"\r\n                  @click=\"filters.filter_2 = !filters.filter_2\"\r\n                  :class=\"{ 'filters--checked': filters.filter_2 }\"\r\n                >\r\n                  <div class=\"filters__bottom-imgwrapper\">\r\n                    <img src=\"@/img/icon/filter-2.svg\" alt=\"icon\" />\r\n                  </div>\r\n                  Вегетарианские\r\n                </button>\r\n                <button\r\n                  class=\"filters__bottom-btn\"\r\n                  @click=\"filters.filter_3 = !filters.filter_3\"\r\n                  :class=\"{ 'filters--checked': filters.filter_3 }\"\r\n                >\r\n                  <div class=\"filters__bottom-imgwrapper\">\r\n                    <img src=\"@/img/icon/filter-3.svg\" alt=\"icon\" />\r\n                  </div>\r\n                  Безлактозные\r\n                </button>\r\n              </div>\r\n              <div class=\"filters__bottom-right\">\r\n                <button\r\n                  v-for=\"(item, id) in ingredients.slice(0, 4)\"\r\n                  :key=\"id\"\r\n                  @click=\"\r\n                    filters['ingredients_' + item.id] = !filters['ingredients_' + item.id]\r\n                  \"\r\n                  class=\"ingredients-btn\"\r\n                  :style=\"{ '--color': item.color }\"\r\n                  :class=\"{ 'ingredients--checked': filters['ingredients_' + item.id] }\"\r\n                >\r\n                  <img :src=\"item.imgUrl\" :alt=\"item.name\" />\r\n                  <p>{{ item.name }}</p>\r\n                </button>\r\n                <button class=\"filters__category-burger\" @click=\"showDialog\">\r\n                  <span></span>\r\n                  <span></span>\r\n                  <span></span>\r\n                  <p class=\"filters__category-count\" v-if=\"countIngredients > 0\">{{ countIngredients }}</p>\r\n                </button>\r\n                <app-dialog v-model:show=\"dialogVisible\" class=\"ingredients\">\r\n                  <div class=\"ingredients__top\">\r\n                    <h5 class=\"ingredients__title\">Инградиенты</h5>\r\n                    <div class=\"ingredients__top-right\">\r\n                      <button class=\"ingredients-reset\" @click=\"resetIngredients\">\r\n                        Сбросить все\r\n                      </button>\r\n                      <button class=\"ingredients-close\" @click=\"hideDialog\">\r\n                        <img src=\"@/img/icon/close.svg\" alt=\"close\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"ingredients__list\">\r\n                    <button\r\n                      v-for=\"(item, id) in ingredients\"\r\n                      :key=\"id\"\r\n                      @click=\"\r\n                        filters['ingredients_' + item.id] = !filters[\r\n                          'ingredients_' + item.id\r\n                        ]\r\n                      \"\r\n                      class=\"ingredients-btn\"\r\n                      :style=\"{ '--color': item.color }\"\r\n                      :class=\"{\r\n                        'ingredients--checked': filters['ingredients_' + item.id],\r\n                      }\"\r\n                    >\r\n                      <img :src=\"item.imgUrl\" :alt=\"item.name\" />\r\n                      <p>{{ item.name }}</p>\r\n                    </button>\r\n                  </div>\r\n                </app-dialog>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <CategoryList\r\n            :items=\"categores\"\r\n            @add-to-favorite=\"(item) => this.addToFavorite(item)\"\r\n            @add-to-cart=\"(item) => onClickAddPlus(item)\"\r\n            @load-more-category=\"!isAllLoading ? loadMoreCategory() : load()\"\r\n            :check=\"isAllLoading\"\r\n            :total=\"total\"\r\n          />\r\n          <!-- Ничего не нашлось -->\r\n          <div\r\n            v-if=\"categores.length == 0 && isLoading === false\"\r\n            class=\"category-empty\"\r\n          >\r\n            <img\r\n              class=\"category-empty__img\"\r\n              src=\"@/img/icon/cart-empty.svg\"\r\n              alt=\"empty\"\r\n            />\r\n            <div class=\"category-empty__box\">\r\n              <h5 class=\"category-empty__title\">Ничего не найдено</h5>\r\n              <p class=\"category-empty__text\">\r\n                Попробуйте найти в другой категории или измените параметры поиска товаров\r\n                в этой категории\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <!-- Загрузка -->\r\n          <div v-if=\"isLoading === true && categores.length == 0\" class=\"loader-box\">\r\n            <span class=\"loader\"></span>\r\n          </div>\r\n\r\n          <InfoText />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Error\r\n    v-else\r\n    :imgUrl=\"require('@/img/icon/404.svg')\"\r\n    :title=\"['Ошибка 404.', 'Что-то пошло не так.']\"\r\n    text=\"Страница, которую вы ищите, временно не доступна или ее еже нет\"\r\n    :button=\"{imgUrl: '', text: 'Вернуться на главную'}\"\r\n    @click-error=\"this.$router.push('/rol-shop/')\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { inject } from \"vue\";\r\nimport { mapActions, mapMutations } from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      categoryMap: {\r\n        rolls: \"Роллы\",\r\n        sushi: \"Суши\",\r\n        sets: \"Сеты\",\r\n        snacks: \"Боулы\",\r\n        drinks: \"Напитки\",\r\n        rollsq: \"Соусы\",\r\n      },\r\n      category: null,\r\n      limit: 8,\r\n      isLoading: false,\r\n      isAllLoading: false,\r\n      total: 0,\r\n      filters: {\r\n        selectSort: \"-price\",\r\n        filter_1: this.$route.params.category === \"drinks\" ? false : true,\r\n        filter_2: false,\r\n        filter_3: false,\r\n        ingredients_1: this.$route.params.category === \"drinks\" ? false : true,\r\n        ingredients_2: false,\r\n        ingredients_3: this.$route.params.category === \"drinks\" ? false : true,\r\n        ingredients_4: this.$route.params.category === \"drinks\" ? false : true,\r\n        ingredients_5: false,\r\n        ingredients_6: false,\r\n        ingredients_7: false,\r\n        ingredients_8: false,\r\n        ingredients_9: false,\r\n      },\r\n      sortOptions: [\r\n        { value: \"title\", name: \"По названию\" },\r\n        { value: \"price\", name: \"От дешевых к дорогим\" },\r\n        { value: \"-price\", name: \"От дорогих к дешевым\" },\r\n      ],\r\n      ingredients: [\r\n        {\r\n          id: 1,\r\n          color: \"#E86853\",\r\n          name: \"лосось\",\r\n          imgUrl: require(\"@/img/ingredients/ingredients-1.png\"),\r\n        },\r\n        {\r\n          id: 2,\r\n          color: \"#D57E3D\",\r\n          name: \"угорь\",\r\n          imgUrl: require(\"@/img/ingredients/ingredients-2.png\"),\r\n        },\r\n        {\r\n          id: 3,\r\n          color: \"#df394a\",\r\n          name: \"тунец\",\r\n          imgUrl: require(\"@/img/ingredients/ingredients-3.png\"),\r\n        },\r\n        {\r\n          id: 4,\r\n          color: \"#FDA49A\",\r\n          name: \"куриное филе\",\r\n          imgUrl: require(\"@/img/ingredients/ingredients-4.png\"),\r\n        },\r\n        {\r\n          id: 5,\r\n          color: \"#D8CC88\",\r\n          name: \"тофу\",\r\n          imgUrl: require(\"@/img/ingredients/ingredients-5.png\"),\r\n        },\r\n        {\r\n          id: 6,\r\n          color: \"#eddac2\",\r\n          name: \"сливочный сыр\",\r\n          imgUrl: require(\"@/img/ingredients/ingredients-6.png\"),\r\n        },\r\n        {\r\n          id: 7,\r\n          color: \"#5FD63A\",\r\n          name: \"авокадо\",\r\n          imgUrl: require(\"@/img/ingredients/ingredients-7.png\"),\r\n        },\r\n        {\r\n          id: 8,\r\n          color: \"#c41c07\",\r\n          name: \"помидор\",\r\n          imgUrl: require(\"@/img/ingredients/ingredients-8.png\"),\r\n        },\r\n        {\r\n          id: 9,\r\n          color: \"#916d43\",\r\n          name: \"гриб шитаки\",\r\n          imgUrl: require(\"@/img/ingredients/ingredients-9.png\"),\r\n        },\r\n      ],\r\n      dialogVisible: false,\r\n      error: false\r\n    };\r\n  },\r\n  components: {\r\n  },\r\n  computed: {\r\n    paths() {\r\n      return [{ name: this.categoryMap[this.category], path: this.$route.params }];\r\n    },\r\n    countIngredients() {\r\n      return Object.keys(this.filters).filter(key => key.startsWith('ingredients_') && this.filters[key]).length;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      addToFavorite: \"favorite/addToFavorite\",\r\n    }),\r\n    ...mapMutations({\r\n      setPaths: \"crumbs/setPaths\",\r\n    }),\r\n    async fetchItems(name) {\r\n      let apiRes = null;\r\n      try {\r\n        this.isLoading = true;\r\n\r\n        const params = {\r\n          page: 1,\r\n          limit: this.limit,\r\n          filter_1: this.filters.filter_1 ? 1 : undefined,\r\n          filter_2: this.filters.filter_2 ? 1 : undefined,\r\n          filter_3: this.filters.filter_3 ? 1 : undefined,\r\n          \"ingridients.1\": this.filters.ingredients_1 ? 1 : undefined,\r\n          \"ingridients.2\": this.filters.ingredients_2 ? 1 : undefined,\r\n          \"ingridients.3\": this.filters.ingredients_3 ? 1 : undefined,\r\n          \"ingridients.4\": this.filters.ingredients_4 ? 1 : undefined,\r\n          \"ingridients.5\": this.filters.ingredients_5 ? 1 : undefined,\r\n          \"ingridients.6\": this.filters.ingredients_6 ? 1 : undefined,\r\n          \"ingridients.7\": this.filters.ingredients_7 ? 1 : undefined,\r\n          \"ingridients.8\": this.filters.ingredients_8 ? 1 : undefined,\r\n          \"ingridients.9\": this.filters.ingredients_9 ? 1 : undefined,\r\n          sortBy: this.filters.selectSort,\r\n          category: this.category,\r\n        };\r\n\r\n        const { data } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/items`, {\r\n          params,\r\n        });\r\n\r\n        // Всего результатов\r\n        this.total = data.meta.total_items;\r\n\r\n        this.categores = data.items.map((obj) => ({\r\n          ...obj,\r\n          isFavorite: false,\r\n          favoriteId: null,\r\n          isAdded: false,\r\n          count: 1,\r\n        }));\r\n      } catch (err) {\r\n        apiRes = err.response.status;\r\n      } finally {\r\n        this.isLoading = false;\r\n        if (apiRes == 404) {\r\n          this.error = true;\r\n        }\r\n      }\r\n    },\r\n    async fetchFavorites() {\r\n      let apiRes = null;\r\n      try {\r\n        const { data: favorites } = await axios.get(\r\n          `https://c2ff7a8de0a119c8.mokky.dev/favorites`\r\n        );\r\n\r\n        this.categores = this.categores.map((item) => {\r\n          const favorite = favorites.find((favorite) => favorite.item_id === item.id);\r\n\r\n          if (!favorite) {\r\n            return item;\r\n          }\r\n\r\n          return {\r\n            ...item,\r\n            isFavorite: true,\r\n            favoriteId: favorite.id,\r\n          };\r\n        });\r\n      } catch (err) {\r\n        apiRes = err.response.status;\r\n      } finally {\r\n        if (apiRes == 404) {\r\n          this.error = true;\r\n        }\r\n      }\r\n    },\r\n    load(name) {\r\n      this.fetchItems(name).then(() => {\r\n        // включение кнопки для карточек\r\n        this.categores = this.categores.map((item) => ({\r\n          ...item,\r\n          isAdded: this.cart.some((cartItem) => cartItem.id === item.id),\r\n        }));\r\n\r\n        this.fetchFavorites();\r\n      });\r\n\r\n      this.isAllLoading = false;\r\n    },\r\n    async loadMoreCategory() {\r\n      let apiRes = null;\r\n      try {\r\n        let allItemsLoaded = false;\r\n        let page = 1;\r\n\r\n        while (!allItemsLoaded) {\r\n          page += 1;\r\n\r\n          const params = {\r\n            page: page,\r\n            limit: this.limit,\r\n            filter_1: this.filters.filter_1 ? 1 : undefined,\r\n            filter_2: this.filters.filter_2 ? 1 : undefined,\r\n            filter_3: this.filters.filter_3 ? 1 : undefined,\r\n            \"ingridients.1\": this.filters.ingredients_1 ? 1 : undefined,\r\n            \"ingridients.2\": this.filters.ingredients_2 ? 1 : undefined,\r\n            \"ingridients.3\": this.filters.ingredients_3 ? 1 : undefined,\r\n            \"ingridients.4\": this.filters.ingredients_4 ? 1 : undefined,\r\n            \"ingridients.5\": this.filters.ingredients_5 ? 1 : undefined,\r\n            \"ingridients.6\": this.filters.ingredients_6 ? 1 : undefined,\r\n            \"ingridients.7\": this.filters.ingredients_7 ? 1 : undefined,\r\n            \"ingridients.8\": this.filters.ingredients_8 ? 1 : undefined,\r\n            \"ingridients.9\": this.filters.ingredients_9 ? 1 : undefined,\r\n            sortBy: this.filters.selectSort,\r\n            category: this.category,\r\n          };\r\n\r\n          const { data } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/items`, {\r\n            params,\r\n          });\r\n\r\n          this.categores = this.categores.concat(\r\n            data.items.map((obj) => ({\r\n              ...obj,\r\n              isFavorite: false,\r\n              favoriteId: null,\r\n              isAdded: false,\r\n              count: 1,\r\n            }))\r\n          );\r\n\r\n          if (data.meta.remaining_count == 0) {\r\n            allItemsLoaded = true;\r\n            this.categores = this.categores.map((item) => ({\r\n              ...item,\r\n              isAdded: this.cart.some((cartItem) => cartItem.id === item.id),\r\n            }));\r\n            this.fetchFavorites();\r\n          }\r\n        }\r\n\r\n        this.isAllLoading = true;\r\n      } catch (err) {\r\n        apiRes = err.response.status;\r\n      } finally {\r\n        if (apiRes == 404) {\r\n          this.error = true;\r\n        }\r\n      }\r\n    },\r\n    showDialog() {\r\n      this.dialogVisible = true;\r\n    },\r\n    hideDialog() {\r\n      this.dialogVisible = false;\r\n    },\r\n    resetIngredients() {\r\n      for (let key in this.filters) {\r\n        if (key.startsWith(\"ingredients_\")) {\r\n          this.filters[key] = false;\r\n        }\r\n      }\r\n    },\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {\r\n      vm.category = to.params.category;\r\n      vm.setPaths(vm.paths);\r\n    });\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    // \r\n    // обновление категории\r\n    this.category = to.params.category;\r\n    // отключение фильтров для напитков\r\n    this.filters.filter_1 = this.category === \"drinks\" ? false : true;\r\n    this.filters.ingredients_1 = this.category === \"drinks\" ? false : true;\r\n    this.filters.ingredients_3 = this.category === \"drinks\" ? false : true;\r\n    this.filters.ingredients_4 = this.category === \"drinks\" ? false : true;\r\n    this.load();\r\n    next();\r\n  },\r\n  mounted() {\r\n    this.load();\r\n  },\r\n  watch: {\r\n    // глобальное слежение\r\n    filters: {\r\n      handler() {\r\n        this.load();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n\r\n  setup() {\r\n    const { categores } = inject(\"items\");\r\n    const { cart, addToCart, removeFromCart } = inject(\"cart\");\r\n\r\n    const onClickAddPlus = (item) => {\r\n      if (!item.isAdded) {\r\n        addToCart(item);\r\n      } else {\r\n        removeFromCart(item);\r\n        // карточка category\r\n        categores.value.forEach((pl) => {\r\n          if (pl.id === item.id) {\r\n            pl.isAdded = false;\r\n            pl.count = 1;\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    return {\r\n      cart,\r\n      onClickAddPlus,\r\n      categores,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.crumbs {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n\r\n.category {\r\n  // position: relative;\r\n  // z-index: 1;\r\n  &__inner {\r\n    position: relative;\r\n  }\r\n}\r\n.category-pages{\r\n  margin-bottom: 48px;\r\n}\r\n\r\n.card {\r\n  width: 100%;\r\n  padding-bottom: 34px;\r\n  &__title {\r\n    color: $grey-dark;\r\n    font-size: 56px;\r\n    font-weight: 700;\r\n    line-height: 125%;\r\n    margin-bottom: 32px;\r\n  }\r\n}\r\n.filters {\r\n  &__top {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 24px;\r\n  }\r\n\r\n  &__top-left {\r\n    display: flex;\r\n    gap: 8px;\r\n  }\r\n\r\n  &__top-btn {\r\n    padding: 12px 16px;\r\n    background: #fff;\r\n    border-radius: $border;\r\n    color: $grey-dark;\r\n    font-weight: 500;\r\n    &:nth-child(1) {\r\n      background-color: #f63;\r\n      color: #fff;\r\n    }\r\n  }\r\n\r\n  &__bottom {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-bottom: 24px;\r\n    &-imgwrapper {\r\n      width: 26px;\r\n    }\r\n  }\r\n\r\n  &__bottom-left {\r\n    display: flex;\r\n    gap: 16px;\r\n  }\r\n\r\n  &__bottom-btn {\r\n    padding: 0 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    background: #fff;\r\n    border-radius: $border;\r\n    height: 58px;\r\n    border: 2px solid #fff;\r\n    transition: $transition;\r\n  }\r\n\r\n  &__bottom-right {\r\n    display: flex;\r\n    gap: 16px;\r\n    position: relative;\r\n  }\r\n\r\n  &__category-btn {\r\n    display: flex;\r\n    gap: 8px;\r\n    align-items: center;\r\n    background: #fff;\r\n    border-radius: $border;\r\n    padding: 0 16px;\r\n    height: 58px;\r\n    border: 1px solid #d2d2d7;\r\n    p {\r\n      color: $grey-dark;\r\n      font-weight: 500;\r\n      text-transform: capitalize;\r\n    }\r\n    img {\r\n      height: 38px;\r\n    }\r\n  }\r\n\r\n  &__category-burger {\r\n    background: #fff;\r\n    border-radius: $border;\r\n    height: 58px;\r\n    width: 58px;\r\n    position: relative;\r\n    span {\r\n      display: block;\r\n      background-color: #686870;\r\n      height: 2px;\r\n      border-radius: 2px;\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      &:nth-child(1) {\r\n        width: 22px;\r\n        transform: translate(-50%, -7px);\r\n      }\r\n      &:nth-child(2) {\r\n        width: 15px;\r\n      }\r\n      &:nth-child(3) {\r\n        width: 7px;\r\n        transform: translate(-50%, 5px);\r\n      }\r\n    }\r\n  }\r\n  &__category-count{\r\n    width: 28px;\r\n    height: 28px;\r\n    color: #fff;\r\n    background: var(---2, #f63);\r\n    border-radius: 50%;\r\n    border: 1px solid #fff;\r\n    display: inline-flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n    position: absolute;\r\n    top: -6px;\r\n    right: -6px;\r\n    transition: $transition;\r\n  }\r\n  &--checked {\r\n    border: 2px solid #eb5757;\r\n  }\r\n}\r\n.ingredients {\r\n  max-width: 846px;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 10px;\r\n  z-index: 150;\r\n\r\n  &__top {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 24px;\r\n  }\r\n\r\n  &__title {\r\n    color: $grey-dark;\r\n    font-size: 24px;\r\n    font-weight: 700;\r\n    line-height: 125%;\r\n  }\r\n\r\n  &__top-right {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  &__list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 16px;\r\n  }\r\n\r\n  &-btn {\r\n    display: flex;\r\n    gap: 8px;\r\n    align-items: center;\r\n    background: #fff;\r\n    border-radius: $border;\r\n    padding: 0 16px;\r\n    height: 58px;\r\n    border: 2px solid #d2d2d7;\r\n    transition: $transition;\r\n  }\r\n  &--checked {\r\n    border: 2px solid var(--color);\r\n  }\r\n}\r\n\r\n.ingredients-reset {\r\n  margin-right: 25px;\r\n  color: var(---2, #f63);\r\n  font-weight: 500;\r\n}\r\n.ingredients-close {\r\n  width: 30px;\r\n  height: 30px;\r\n  background-color: #f5f5f7;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  img {\r\n    width: 19px;\r\n  }\r\n}\r\n.category-empty {\r\n  background-color: #fff;\r\n  border-radius: $border;\r\n  padding: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 32px;\r\n  width: 100%;\r\n\r\n  &__img {\r\n  }\r\n\r\n  &__box {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n    max-width: 600px;\r\n  }\r\n\r\n  &__title {\r\n    color: #000;\r\n    font-size: 32px;\r\n    font-weight: 500;\r\n    line-height: 125%;\r\n  }\r\n\r\n  &__text {\r\n    color: #686870;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    line-height: 142%;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}