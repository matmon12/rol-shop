{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { inject } from \"vue\";\nimport { mapState, mapActions } from \"vuex\";\nexport default {\n  data() {\n    return {\n      order: \"\",\n      count: 0,\n      isVisible: false,\n      products: [],\n      dialogVisible: false,\n      newMarker: [],\n      stepsDelivery: [\"Подтверждение заказа\", \"Приготовление\", \"Ожидание курьера\", \"Курьер в пути\", \"Курьер на месте\"],\n      stepsPickup: [\"Подтверждение заказа\", \"Приготовление\", \"Отправка в пункт выдачи\", \"Ожидает в пункте выдачи\", \"Заказ получен\"]\n    };\n  },\n  methods: {\n    ...mapActions({\n      geocoderAddress: \"map/geocoderAddress\",\n      dateFormat: \"date/dateFormat\"\n    }),\n    async fetchOrder() {\n      try {\n        const {\n          data\n        } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/orders?number=${this.historyOrder}`);\n        this.order = data[0];\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    geocoderCoord(lat, long) {},\n    creatingMarker() {\n      const fullAddres = `${this.order.address.city}, ${this.order.address.address}`;\n      this.geocoderAddress(fullAddres).then(() => {\n        this.newMarker = this.arrayCoord;\n      });\n    }\n  },\n  computed: {\n    ...mapState({\n      arrayCoord: state => state.map.arrayCoord,\n      formattedDate: state => state.date.formattedDate\n    })\n  },\n  mounted() {\n    this.fetchOrder().then(() => {\n      this.dateFormat({\n        dayDate: this.order.day,\n        yearDate: this.order.year,\n        timeDate: this.order.time\n      });\n      this.order.items.forEach(element => {\n        this.count += element.count;\n      });\n      this.products = this.order.items;\n      if (this.order.freeProduct) {\n        this.order.freeProduct.forEach(item => this.products.push(item));\n        this.count += this.order.freeProduct.length;\n      }\n      this.creatingMarker();\n    });\n  },\n  setup() {\n    const {\n      historyOrder\n    } = inject(\"cart\");\n    return {\n      historyOrder\n    };\n  }\n};","map":{"version":3,"names":["axios","inject","mapState","mapActions","data","order","count","isVisible","products","dialogVisible","newMarker","stepsDelivery","stepsPickup","methods","geocoderAddress","dateFormat","fetchOrder","get","historyOrder","err","console","log","geocoderCoord","lat","long","creatingMarker","fullAddres","address","city","then","arrayCoord","computed","state","map","formattedDate","date","mounted","dayDate","day","yearDate","year","timeDate","time","items","forEach","element","freeProduct","item","push","length","setup"],"sources":["C:\\gitPages\\rol-shop\\src\\pages\\OrderSuccess.vue"],"sourcesContent":["<template>\r\n  <div class=\"success\">\r\n    <div class=\"container\">\r\n      <div class=\"success__inner\">\r\n        <div class=\"success__top\">\r\n          <div class=\"success__top-left\">\r\n            <p class=\"success__top-text\">\r\n              Спасибо,<br />\r\n              ваш заказ <span>{{ `#${order.number}` }}</span> успешно оформлен\r\n            </p>\r\n          </div>\r\n          <div class=\"success__top-right\">\r\n            <InfoDelivery\r\n              v-if=\"order\"\r\n              :address=\"order.address.address\"\r\n              :input=\"order.address.input\"\r\n              :apartment=\"order.address.apartment\"\r\n              :floor=\"order.address.floor\"\r\n              :formattedDate=\"formattedDate\"\r\n              :payment=\"order.payment\"\r\n              :totalPrice=\"order.totalPrice\"\r\n              :change=\"order.change\"\r\n              :regularSticks=\"order.regularSticks\"\r\n              :animals=\"order.animals\"\r\n              :options=\"order.options\"\r\n              :note=\"order.note\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"success__bottom\">\r\n          <el-collapse @change=\"isVisible = !isVisible\">\r\n            <el-collapse-item>\r\n              <template #title>\r\n                <div class=\"success__bottom-top\">\r\n                  <InfoOrder\r\n                    :isVisible=\"isVisible\"\r\n                    :formattedDate=\"formattedDate\"\r\n                    :number=\"order.number\"\r\n                    :items=\"products\"\r\n                    :totalPrice=\"order.totalPrice\"\r\n                    :year=\"order.year\"\r\n                    :count=\"count\"\r\n                  />\r\n                </div>\r\n                <div class=\"success__bottom-bottom\">\r\n                  <StepsOrder\r\n                    :methods=\"order.methods\"\r\n                  />\r\n                </div>\r\n              </template>\r\n              <div class=\"success__products\">\r\n                <div\r\n                  class=\"success__products-item\"\r\n                  v-for=\"(item, id) in products\"\r\n                  :key=\"id\"\r\n                >\r\n                  <div class=\"success__products-imgwrapper\">\r\n                    <img\r\n                      class=\"success__products-img\"\r\n                      :src=\"require(`@/img/products/${item.imgUrl}`)\"\r\n                      alt=\"tovar\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"success__products-info\">\r\n                    <p class=\"success__products-title\">{{ item.title }}</p>\r\n                    <p v-if=\"item.weight\" class=\"success__products-weight\">\r\n                      Вес: {{ item.weight }} г\r\n                    </p>\r\n                    <p v-if=\"item.volume\" class=\"success__products-weight\">\r\n                      Объем: {{ item.volume }} л\r\n                    </p>\r\n                  </div>\r\n                  <div class=\"success__products-box\">\r\n                    <div class=\"success__products-box-item\">\r\n                      <p class=\"success__products-box-name\">Цена</p>\r\n                      <p class=\"success__products-box-value\">\r\n                        {{ item.price }} <span>грн</span>\r\n                      </p>\r\n                    </div>\r\n                    <div class=\"success__products-box-item\">\r\n                      <p class=\"success__products-box-name\">Кол-во</p>\r\n                      <p class=\"success__products-box-value\">{{ item.count }}</p>\r\n                    </div>\r\n                    <div class=\"success__products-box-item\">\r\n                      <p class=\"success__products-box-name\">Итого</p>\r\n                      <p class=\"success__products-box-value\">\r\n                        {{ item.price * item.count }} <span>грн</span>\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n        </div>\r\n        <div class=\"success__btn-wrapper\">\r\n          <button\r\n            v-if=\"order.methods === 'Самовывоз'\"\r\n            @click=\"dialogVisible = true\"\r\n            class=\"success__btn-direction\"\r\n          >\r\n            Проложить маршрут\r\n          </button>\r\n          <button class=\"success__btn\" @click=\"$router.push('/rol-shop/')\">\r\n            Вернутся на главную\r\n          </button>\r\n        </div>\r\n        <el-dialog v-model=\"dialogVisible\" title=\"Построение маршрута\" align-center>\r\n          <p class=\"success__dialog-text\">\r\n            Здесь вы можете просмотреть маршрут в точку выдачи\r\n          </p>\r\n          <div class=\"success__map\">\r\n            <Map :geocoderCoord=\"geocoderCoord\" :newMarker=\"newMarker\" ref=\"Map\" />\r\n          </div>\r\n        </el-dialog>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { inject } from \"vue\";\r\nimport { mapState, mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      order: \"\",\r\n      count: 0,\r\n      isVisible: false,\r\n      products: [],\r\n      dialogVisible: false,\r\n      newMarker: [],\r\n      stepsDelivery: [\r\n        \"Подтверждение заказа\",\r\n        \"Приготовление\",\r\n        \"Ожидание курьера\",\r\n        \"Курьер в пути\",\r\n        \"Курьер на месте\",\r\n      ],\r\n      stepsPickup: [\r\n        \"Подтверждение заказа\",\r\n        \"Приготовление\",\r\n        \"Отправка в пункт выдачи\",\r\n        \"Ожидает в пункте выдачи\",\r\n        \"Заказ получен\",\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      geocoderAddress: \"map/geocoderAddress\",\r\n      dateFormat: \"date/dateFormat\",\r\n    }),\r\n    async fetchOrder() {\r\n      try {\r\n        const { data } = await axios.get(\r\n          `https://c2ff7a8de0a119c8.mokky.dev/orders?number=${this.historyOrder}`\r\n        );\r\n        this.order = data[0];\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    geocoderCoord(lat, long) {},\r\n    creatingMarker() {\r\n      const fullAddres = `${this.order.address.city}, ${this.order.address.address}`;\r\n      this.geocoderAddress(fullAddres).then(() => {\r\n        this.newMarker = this.arrayCoord;\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      arrayCoord: (state) => state.map.arrayCoord,\r\n      formattedDate: (state) => state.date.formattedDate,\r\n    }),\r\n  },\r\n  mounted() {\r\n    this.fetchOrder().then(() => {\r\n      this.dateFormat({\r\n        dayDate: this.order.day,\r\n        yearDate: this.order.year,\r\n        timeDate: this.order.time,\r\n      });\r\n      this.order.items.forEach((element) => {\r\n        this.count += element.count;\r\n      });\r\n      this.products = this.order.items;\r\n      if (this.order.freeProduct) {\r\n        this.order.freeProduct.forEach((item) => this.products.push(item));\r\n        this.count += this.order.freeProduct.length;\r\n      }\r\n      this.creatingMarker();\r\n    });\r\n  },\r\n  setup() {\r\n    const { historyOrder } = inject(\"cart\");\r\n    return {\r\n      historyOrder,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.success {\r\n  margin-bottom: 64px;\r\n  &__inner {\r\n  }\r\n\r\n  &__map {\r\n    width: 100%;\r\n    height: 500px;\r\n    border-radius: $border;\r\n    overflow: hidden;\r\n  }\r\n\r\n  &__top {\r\n    margin-bottom: 16px;\r\n    border-radius: $border;\r\n    background-color: #fff;\r\n    padding: 48px 64px 16px;\r\n    display: flex;\r\n    gap: 138px;\r\n  }\r\n\r\n  &__top-left {\r\n    max-width: 340px;\r\n  }\r\n\r\n  &__top-text {\r\n    color: $grey-dark;\r\n    font-size: 34px;\r\n    font-weight: 700;\r\n    line-height: 1.4;\r\n    span {\r\n      color: #fff;\r\n      background-color: rgb(255, 102, 51);\r\n      padding: 4px 8px;\r\n      border-radius: $border;\r\n    }\r\n  }\r\n\r\n  &__top-right {\r\n    flex-grow: 1;\r\n  }\r\n\r\n  &__bottom {\r\n    border-radius: $border;\r\n    background-color: #fff;\r\n    padding: 24px 0;\r\n  }\r\n\r\n  &__bottom-top {\r\n    padding: 12px 48px;\r\n  }\r\n\r\n  &__info-order{\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 12px;\r\n  }\r\n\r\n\r\n  &__bottom-bottom {\r\n    padding: 0 16px;\r\n  }\r\n\r\n  &__steps {\r\n    display: flex;\r\n  }\r\n\r\n  &__steps-item {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    gap: 4px;\r\n    flex: 1;\r\n    &:nth-child(1) {\r\n      .line-left {\r\n        display: none;\r\n      }\r\n    }\r\n    &:last-child {\r\n      .line-right {\r\n        display: none;\r\n      }\r\n    }\r\n  }\r\n  &__steps-top {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n    height: 24px;\r\n  }\r\n  &__steps-lines {\r\n    flex-grow: 1;\r\n  }\r\n  .line-left,\r\n  .line-right {\r\n    display: block;\r\n    width: 100%;\r\n    height: 4px;\r\n    background-color: rgba(39, 39, 39, 0.05);\r\n  }\r\n  .line-left {\r\n    border-radius: 0 5px 5px 0;\r\n  }\r\n  .line-right {\r\n    border-radius: 5px 0 0 5px;\r\n  }\r\n\r\n  .steps--check {\r\n    .success__steps-number {\r\n      width: 20px;\r\n      height: 20px;\r\n      background-color: rgb(85, 179, 11);\r\n      position: relative;\r\n      &::after {\r\n        content: url(\"@/img/icon/check.svg\");\r\n        line-height: 1;\r\n        font-size: 7px;\r\n      }\r\n    }\r\n    .success__steps-text {\r\n      color: $grey-dark;\r\n    }\r\n    .steps-number {\r\n      display: none;\r\n    }\r\n    .line-right {\r\n      background-color: $grey-dark;\r\n    }\r\n    & + .success__steps-item {\r\n      .line-left {\r\n        background-color: $grey-dark;\r\n      }\r\n    }\r\n  }\r\n  &__steps-number {\r\n    color: $grey-dark;\r\n    width: 24px;\r\n    height: 24px;\r\n    background-color: rgba(39, 39, 39, 0.05);\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n    span {\r\n      display: block;\r\n    }\r\n  }\r\n\r\n  &__steps-text {\r\n    color: rgb(158, 158, 158);\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    line-height: 1.4;\r\n  }\r\n\r\n  &__products {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 16px;\r\n    padding: 0 50px;\r\n    padding-top: 34px;\r\n    // height: 0;\r\n    transition: $transition;\r\n    &--visible {\r\n      height: 100%;\r\n    }\r\n  }\r\n\r\n  &__products-item {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  &__products-imgwrapper {\r\n    width: 64px;\r\n    height: 64px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-right: 24px;\r\n  }\r\n\r\n  &__products-img {\r\n    object-fit: cover;\r\n  }\r\n\r\n  &__products-info {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    gap: 4px;\r\n    flex-grow: 1;\r\n    margin-right: 24px;\r\n  }\r\n\r\n  &__products-title {\r\n    color: $grey-dark;\r\n    font-size: 16px;\r\n    font-weight: 700;\r\n  }\r\n\r\n  &__products-weight {\r\n    color: rgb(255, 102, 51);\r\n    font-size: 14px;\r\n    font-weight: normal;\r\n  }\r\n\r\n  &__products-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 24px;\r\n  }\r\n\r\n  &__products-box-item {\r\n  }\r\n\r\n  &__products-box-name {\r\n    color: rgb(158, 158, 158);\r\n    font-size: 12px;\r\n    margin-bottom: 4px;\r\n  }\r\n\r\n  &__products-box-value {\r\n    font-weight: 700;\r\n    font-size: 16px;\r\n    color: $grey-dark;\r\n    span {\r\n      color: rgb(104, 104, 112);\r\n      font-size: 11px;\r\n    }\r\n  }\r\n\r\n  &__btn {\r\n    border-radius: $border;\r\n    background-color: #fff;\r\n    padding: 16px 24px;\r\n    width: 265px;\r\n    color: rgb(0, 204, 45);\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n    line-height: 1.5;\r\n    &-wrapper {\r\n      margin-top: 24px;\r\n      display: flex;\r\n      justify-content: center;\r\n      gap: 16px;\r\n    }\r\n    &-direction {\r\n      border-radius: $border;\r\n      padding: 16px 24px;\r\n      background-color: rgb(0, 204, 45);\r\n      color: #fff;\r\n      width: 256px;\r\n      font-size: 16px;\r\n      font-weight: 500;\r\n      line-height: 1.5;\r\n    }\r\n  }\r\n\r\n  &__dialog-text {\r\n    font-weight: 400;\r\n    color: rgb(104, 104, 112);\r\n    margin-bottom: 20px;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.el-collapse {\r\n  border-top: none;\r\n  border-bottom: none;\r\n}\r\n.el-collapse-item__header {\r\n  display: block;\r\n  height: auto;\r\n  line-height: inherit;\r\n  background-color: transparent;\r\n  color: transparent;\r\n  cursor: pointer;\r\n  border-bottom: none;\r\n  font-size: inherit;\r\n  font-weight: 400;\r\n  transition: border-bottom-color var(--el-transition-duration);\r\n  outline: 0;\r\n}\r\n.el-collapse-item__arrow {\r\n  display: none;\r\n}\r\n.el-collapse-item__wrap {\r\n  background-color: transparent;\r\n  border-bottom: none;\r\n}\r\n.el-collapse-item__content {\r\n  padding-bottom: 0;\r\n  font-size: inherit;\r\n  color: transparent;\r\n  line-height: inherit;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}