{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { inject } from \"vue\";\nimport { mapState, mapActions } from \"vuex\";\nexport default {\n  data() {\n    return {\n      order: \"\",\n      count: 0,\n      isVisible: false,\n      products: [],\n      dialogVisible: false,\n      newMarker: [],\n      formattedDate: []\n    };\n  },\n  methods: {\n    ...mapActions({\n      geocoderAddress: \"map/geocoderAddress\",\n      dateFormat: \"date/dateFormat\"\n    }),\n    async fetchOrder() {\n      try {\n        const {\n          data\n        } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/orders?number=${this.historyOrder}`);\n        this.order = data[0];\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    geocoderCoord(lat, long) {},\n    creatingMarker() {\n      const fullAddres = `${this.order.address.city}, ${this.order.address.address}`;\n      this.geocoderAddress(fullAddres).then(() => {\n        this.newMarker = this.arrayCoord;\n      });\n    }\n  },\n  computed: {\n    ...mapState({\n      arrayCoord: state => state.map.arrayCoord\n    })\n  },\n  mounted() {\n    this.fetchOrder().then(() => {\n      this.dateFormat({\n        dayDate: this.order.day,\n        yearDate: this.order.year,\n        timeDate: this.order.time\n      });\n      console.log(this.formattedDate);\n      this.order.items.forEach(element => {\n        this.count += element.count;\n      });\n      this.products = this.order.items;\n      if (this.order.freeProduct) {\n        this.order.freeProduct.forEach(item => this.products.push(item));\n        this.count += this.order.freeProduct.length;\n      }\n      this.creatingMarker();\n    });\n  },\n  setup() {\n    const {\n      historyOrder\n    } = inject(\"cart\");\n    return {\n      historyOrder\n    };\n  }\n};","map":{"version":3,"names":["axios","inject","mapState","mapActions","data","order","count","isVisible","products","dialogVisible","newMarker","formattedDate","methods","geocoderAddress","dateFormat","fetchOrder","get","historyOrder","err","console","log","geocoderCoord","lat","long","creatingMarker","fullAddres","address","city","then","arrayCoord","computed","state","map","mounted","dayDate","day","yearDate","year","timeDate","time","items","forEach","element","freeProduct","item","push","length","setup"],"sources":["C:\\gitPages\\rol-shop\\src\\pages\\OrderSuccess.vue"],"sourcesContent":["<template>\r\n  <div class=\"success\">\r\n    <div class=\"container\">\r\n      <div class=\"success__inner\">\r\n        <div class=\"success__top\">\r\n          <div class=\"success__top-left\">\r\n            <p class=\"success__top-text\">\r\n              Спасибо,<br />\r\n              ваш заказ <span>{{ `#${order.number}` }}</span> успешно оформлен\r\n            </p>\r\n          </div>\r\n          <div class=\"success__top-right\">\r\n            <InfoDelivery\r\n              v-if=\"order\"\r\n              :address=\"order.address.address\"\r\n              :input=\"order.address.input\"\r\n              :apartment=\"order.address.apartment\"\r\n              :floor=\"order.address.floor\"\r\n              :formattedDate=\"formattedDate\"\r\n              :payment=\"order.payment\"\r\n              :totalPrice=\"order.totalPrice\"\r\n              :change=\"order.change\"\r\n              :regularSticks=\"order.regularSticks\"\r\n              :animals=\"order.animals\"\r\n              :options=\"order.options\"\r\n              :note=\"order.note\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"success__bottom\">\r\n          <el-collapse @change=\"isVisible = !isVisible\">\r\n            <el-collapse-item>\r\n              <template #title>\r\n                <div class=\"success__bottom-top\">\r\n                  <InfoOrder\r\n                    :isVisible=\"isVisible\"\r\n                    :formattedDate=\"formattedDate\"\r\n                    :number=\"order.number\"\r\n                    :items=\"products\"\r\n                    :totalPrice=\"order.totalPrice\"\r\n                    :year=\"order.year\"\r\n                    :count=\"count\"\r\n                  />\r\n                </div>\r\n                <div class=\"success__bottom-bottom\">\r\n                  <StepsOrder :methods=\"order.methods\" :steps=\"0\" />\r\n                </div>\r\n              </template>\r\n              <div class=\"success__products-wrapper\">\r\n                <ListOrders\r\n                  :products=\"products\"\r\n                />\r\n              </div>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n        </div>\r\n        <div class=\"success__btn-wrapper\">\r\n          <button\r\n            v-if=\"order.methods === 'Самовывоз'\"\r\n            @click=\"dialogVisible = true\"\r\n            class=\"success__btn-direction\"\r\n          >\r\n            Проложить маршрут\r\n          </button>\r\n          <button class=\"success__btn\" @click=\"$router.push('/rol-shop/')\">\r\n            Вернутся на главную\r\n          </button>\r\n        </div>\r\n        <el-dialog v-model=\"dialogVisible\" title=\"Построение маршрута\" align-center>\r\n          <p class=\"success__dialog-text\">\r\n            Здесь вы можете просмотреть маршрут в точку выдачи\r\n          </p>\r\n          <div class=\"success__map\">\r\n            <Map :geocoderCoord=\"geocoderCoord\" :newMarker=\"newMarker\" ref=\"Map\" />\r\n          </div>\r\n        </el-dialog>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { inject } from \"vue\";\r\nimport { mapState, mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      order: \"\",\r\n      count: 0,\r\n      isVisible: false,\r\n      products: [],\r\n      dialogVisible: false,\r\n      newMarker: [],\r\n      formattedDate: []\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      geocoderAddress: \"map/geocoderAddress\",\r\n      dateFormat: \"date/dateFormat\",\r\n    }),\r\n    async fetchOrder() {\r\n      try {\r\n        const { data } = await axios.get(\r\n          `https://c2ff7a8de0a119c8.mokky.dev/orders?number=${this.historyOrder}`\r\n        );\r\n        this.order = data[0];\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    geocoderCoord(lat, long) {},\r\n    creatingMarker() {\r\n      const fullAddres = `${this.order.address.city}, ${this.order.address.address}`;\r\n      this.geocoderAddress(fullAddres).then(() => {\r\n        this.newMarker = this.arrayCoord;\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      arrayCoord: (state) => state.map.arrayCoord,\r\n    }),\r\n  },\r\n  mounted() {\r\n    this.fetchOrder().then(() => {\r\n      this.dateFormat({\r\n        dayDate: this.order.day,\r\n        yearDate: this.order.year,\r\n        timeDate: this.order.time,\r\n      })\r\n      console.log(this.formattedDate)\r\n      this.order.items.forEach((element) => {\r\n        this.count += element.count;\r\n      });\r\n      this.products = this.order.items;\r\n      if (this.order.freeProduct) {\r\n        this.order.freeProduct.forEach((item) => this.products.push(item));\r\n        this.count += this.order.freeProduct.length;\r\n      }\r\n      this.creatingMarker();\r\n    });\r\n  },\r\n  setup() {\r\n    const { historyOrder } = inject(\"cart\");\r\n    return {\r\n      historyOrder,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.success {\r\n  margin-bottom: 64px;\r\n  &__inner {\r\n  }\r\n\r\n  &__map {\r\n    width: 100%;\r\n    height: 500px;\r\n    border-radius: $border;\r\n    overflow: hidden;\r\n  }\r\n\r\n  &__top {\r\n    margin-bottom: 16px;\r\n    border-radius: $border;\r\n    background-color: #fff;\r\n    padding: 48px 64px 16px;\r\n    display: flex;\r\n    gap: 138px;\r\n  }\r\n\r\n  &__top-left {\r\n    max-width: 340px;\r\n  }\r\n\r\n  &__top-text {\r\n    color: $grey-dark;\r\n    font-size: 34px;\r\n    font-weight: 700;\r\n    line-height: 1.4;\r\n    span {\r\n      color: #fff;\r\n      background-color: rgb(255, 102, 51);\r\n      padding: 4px 8px;\r\n      border-radius: $border;\r\n    }\r\n  }\r\n\r\n  &__top-right {\r\n    flex-grow: 1;\r\n  }\r\n\r\n  &__bottom {\r\n    border-radius: $border;\r\n    background-color: #fff;\r\n    padding: 24px 0;\r\n  }\r\n\r\n  &__bottom-top {\r\n    padding: 12px 48px;\r\n  }\r\n\r\n  &__info-order {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 12px;\r\n  }\r\n\r\n  &__bottom-bottom {\r\n    padding: 0 16px;\r\n  }\r\n  &__products-wrapper {\r\n    padding-top: 34px;\r\n  }\r\n\r\n  &__btn {\r\n    border-radius: $border;\r\n    background-color: #fff;\r\n    padding: 16px 24px;\r\n    width: 265px;\r\n    color: rgb(0, 204, 45);\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n    line-height: 1.5;\r\n    &-wrapper {\r\n      margin-top: 24px;\r\n      display: flex;\r\n      justify-content: center;\r\n      gap: 16px;\r\n    }\r\n    &-direction {\r\n      border-radius: $border;\r\n      padding: 16px 24px;\r\n      background-color: rgb(0, 204, 45);\r\n      color: #fff;\r\n      width: 256px;\r\n      font-size: 16px;\r\n      font-weight: 500;\r\n      line-height: 1.5;\r\n    }\r\n  }\r\n\r\n  &__dialog-text {\r\n    font-weight: 400;\r\n    color: rgb(104, 104, 112);\r\n    margin-bottom: 20px;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.el-collapse {\r\n  border-top: none;\r\n  border-bottom: none;\r\n}\r\n.el-collapse-item__header {\r\n  display: block;\r\n  height: auto;\r\n  line-height: inherit;\r\n  background-color: transparent;\r\n  color: transparent;\r\n  cursor: pointer;\r\n  border-bottom: none;\r\n  font-size: inherit;\r\n  font-weight: 400;\r\n  transition: border-bottom-color var(--el-transition-duration);\r\n  outline: 0;\r\n}\r\n.el-collapse-item__arrow {\r\n  display: none;\r\n}\r\n.el-collapse-item__wrap {\r\n  background-color: transparent;\r\n  border-bottom: none;\r\n}\r\n.el-collapse-item__content {\r\n  padding-bottom: 0;\r\n  font-size: inherit;\r\n  color: transparent;\r\n  line-height: inherit;\r\n}\r\n</style>\r\n"],"mappings":";AAkFA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,MAAK,QAAS,KAAK;AAC5B,SAASC,QAAQ,EAAEC,UAAS,QAAS,MAAM;AAE3C,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,CAAC;MACRC,SAAS,EAAE,KAAK;MAChBC,QAAQ,EAAE,EAAE;MACZC,aAAa,EAAE,KAAK;MACpBC,SAAS,EAAE,EAAE;MACbC,aAAa,EAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,GAAGT,UAAU,CAAC;MACZU,eAAe,EAAE,qBAAqB;MACtCC,UAAU,EAAE;IACd,CAAC,CAAC;IACF,MAAMC,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAM;UAAEX;QAAK,IAAI,MAAMJ,KAAK,CAACgB,GAAG,CAC7B,oDAAmD,IAAI,CAACC,YAAa,EACxE,CAAC;QACD,IAAI,CAACZ,KAAI,GAAID,IAAI,CAAC,CAAC,CAAC;MACtB,EAAE,OAAOc,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAClB;IACF,CAAC;IACDG,aAAaA,CAACC,GAAG,EAAEC,IAAI,EAAE,CAAC,CAAC;IAC3BC,cAAcA,CAAA,EAAG;MACf,MAAMC,UAAS,GAAK,GAAE,IAAI,CAACpB,KAAK,CAACqB,OAAO,CAACC,IAAK,KAAI,IAAI,CAACtB,KAAK,CAACqB,OAAO,CAACA,OAAQ,EAAC;MAC9E,IAAI,CAACb,eAAe,CAACY,UAAU,CAAC,CAACG,IAAI,CAAC,MAAM;QAC1C,IAAI,CAAClB,SAAQ,GAAI,IAAI,CAACmB,UAAU;MAClC,CAAC,CAAC;IACJ;EACF,CAAC;EACDC,QAAQ,EAAE;IACR,GAAG5B,QAAQ,CAAC;MACV2B,UAAU,EAAGE,KAAK,IAAKA,KAAK,CAACC,GAAG,CAACH;IACnC,CAAC;EACH,CAAC;EACDI,OAAOA,CAAA,EAAG;IACR,IAAI,CAAClB,UAAU,CAAC,CAAC,CAACa,IAAI,CAAC,MAAM;MAC3B,IAAI,CAACd,UAAU,CAAC;QACdoB,OAAO,EAAE,IAAI,CAAC7B,KAAK,CAAC8B,GAAG;QACvBC,QAAQ,EAAE,IAAI,CAAC/B,KAAK,CAACgC,IAAI;QACzBC,QAAQ,EAAE,IAAI,CAACjC,KAAK,CAACkC;MACvB,CAAC;MACDpB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACT,aAAa;MAC9B,IAAI,CAACN,KAAK,CAACmC,KAAK,CAACC,OAAO,CAAEC,OAAO,IAAK;QACpC,IAAI,CAACpC,KAAI,IAAKoC,OAAO,CAACpC,KAAK;MAC7B,CAAC,CAAC;MACF,IAAI,CAACE,QAAO,GAAI,IAAI,CAACH,KAAK,CAACmC,KAAK;MAChC,IAAI,IAAI,CAACnC,KAAK,CAACsC,WAAW,EAAE;QAC1B,IAAI,CAACtC,KAAK,CAACsC,WAAW,CAACF,OAAO,CAAEG,IAAI,IAAK,IAAI,CAACpC,QAAQ,CAACqC,IAAI,CAACD,IAAI,CAAC,CAAC;QAClE,IAAI,CAACtC,KAAI,IAAK,IAAI,CAACD,KAAK,CAACsC,WAAW,CAACG,MAAM;MAC7C;MACA,IAAI,CAACtB,cAAc,CAAC,CAAC;IACvB,CAAC,CAAC;EACJ,CAAC;EACDuB,KAAKA,CAAA,EAAG;IACN,MAAM;MAAE9B;IAAa,IAAIhB,MAAM,CAAC,MAAM,CAAC;IACvC,OAAO;MACLgB;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}