{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { inject } from \"vue\";\nimport { mapMutations } from \"vuex\";\nimport EpInfoFilled from '~icons/ep/info-filled';\nexport default {\n  data() {\n    return {\n      paths: [{\n        name: \"Профиль\",\n        path: \"/rol-shop/profile\"\n      }, {\n        name: \"Адрес доставки\",\n        path: \"/rol-shop/profile/address\"\n      }],\n      EpInfoFilled: EpInfoFilled\n    };\n  },\n  methods: {\n    ...mapMutations({\n      setPaths: \"crumbs/setPaths\"\n    }),\n    async fetchAddress() {\n      let apiRes = null;\n      try {\n        const {\n          data\n        } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/address`);\n        this.address = data;\n      } catch (err) {\n        apiRes = err.response.status;\n      } finally {\n        if (apiRes == 404) {\n          this.$router.push(\"/rol-shop/404\");\n        }\n      }\n    },\n    async removeAddress(id) {\n      let apiRes = null;\n      try {\n        await axios.delete(`https://c2ff7a8de0a119c8.mokky.dev/address/${id}`);\n        let index = this.address.findIndex(item => item.id === id);\n        if (index !== -1) {\n          this.address.splice(index, 1);\n        }\n      } catch (err) {\n        apiRes = err.response.status;\n      } finally {\n        if (apiRes == 404) {\n          this.$router.push(\"/rol-shop/404\");\n        }\n      }\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      vm.setPaths(vm.paths);\n    });\n  },\n  mounted() {\n    this.fetchAddress();\n  },\n  setup() {\n    const {\n      address\n    } = inject(\"address\");\n    return {\n      address\n    };\n  }\n};","map":{"version":3,"names":["axios","inject","mapMutations","EpInfoFilled","data","paths","name","path","methods","setPaths","fetchAddress","apiRes","get","address","err","response","status","$router","push","removeAddress","id","delete","index","findIndex","item","splice","beforeRouteEnter","to","from","next","vm","mounted","setup"],"sources":["C:\\gitPages\\rol-shop\\src\\pages\\Address.vue"],"sourcesContent":["<template>\r\n  <div class=\"address-wrapper\">\r\n    <div class=\"address__head\">\r\n      <h1 class=\"address__title\">Адрес доставки</h1>\r\n      <app-button class=\"address__btn\" @click=\"$router.push('/rol-shop/map')\">\r\n        Новый адрес\r\n        <img src=\"@/img/icon/plus-white.svg\" alt=\"plus\" />\r\n      </app-button>\r\n    </div>\r\n\r\n    <ul class=\"address__list\" v-auto-animate>\r\n      <li class=\"address__list-item\" v-for=\"(item, id) in address\" :key=\"id\">\r\n        <div class=\"address__info\">\r\n          <p class=\"address__address\">{{ `${item.city}, ${item.address}` }}</p>\r\n          <p class=\"address__other\">\r\n            Подьезд {{ item.input }}, этаж {{ item.floor }}, квартира\r\n            {{ item.apartment }}\r\n          </p>\r\n        </div>\r\n\r\n        <el-popconfirm\r\n          width=\"220\"\r\n          title=\"Вы уверены что хотите удалить?\"\r\n          @confirm=\"removeAddress(item.id)\"\r\n          confirm-button-text=\"да\"\r\n          cancel-button-text=\"нет\"\r\n          icon-color=\"#626AEF\"\r\n          :icon=\"EpInfoFilled\"\r\n          class=\"address-window\"\r\n        >\r\n          <template #reference>\r\n            <button class=\"address__remove-btn\">\r\n              <img src=\"@/img/icon/drawer.svg\" alt=\"address\" />\r\n            </button>\r\n          </template>\r\n        </el-popconfirm>\r\n      </li>\r\n    </ul>\r\n    <EmptyBlock\r\n      v-if=\"address.length == 0\"\r\n      :imgUrl=\"require('@/img/icon/address-empty.svg')\"\r\n      title=\"У вас нет сохраненных адресов\"\r\n      text=\"Переходите в интересующую вас категорию и сделайте свой первый заказ и адрес сохранится автоматически\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { inject } from \"vue\";\r\nimport { mapMutations } from \"vuex\";\r\nimport EpInfoFilled from '~icons/ep/info-filled';\r\nexport default {\r\n  data() {\r\n    return {\r\n      paths: [\r\n        { name: \"Профиль\", path: \"/rol-shop/profile\" },\r\n        { name: \"Адрес доставки\", path: \"/rol-shop/profile/address\" },\r\n      ],\r\n      EpInfoFilled: EpInfoFilled\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations({\r\n      setPaths: \"crumbs/setPaths\",\r\n    }),\r\n    async fetchAddress() {\r\n      let apiRes = null;\r\n      try {\r\n        const { data } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/address`);\r\n\r\n        this.address = data;\r\n      } catch (err) {\r\n        apiRes = err.response.status;\r\n      } finally {\r\n        if (apiRes == 404) {\r\n          this.$router.push(\"/rol-shop/404\");\r\n        }\r\n      }\r\n    },\r\n    async removeAddress(id) {\r\n      let apiRes = null;\r\n      try {\r\n        await axios.delete(`https://c2ff7a8de0a119c8.mokky.dev/address/${id}`);\r\n\r\n        let index = this.address.findIndex((item) => item.id === id);\r\n        if (index !== -1) {\r\n          this.address.splice(index, 1);\r\n        }\r\n      } catch (err) {\r\n        apiRes = err.response.status;\r\n      } finally {\r\n        if (apiRes == 404) {\r\n          this.$router.push(\"/rol-shop/404\");\r\n        }\r\n      }\r\n    },\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {\r\n      vm.setPaths(vm.paths);\r\n    });\r\n  },\r\n  mounted() {\r\n    this.fetchAddress();\r\n  },\r\n  setup() {\r\n    const { address } = inject(\"address\");\r\n\r\n    return {\r\n      address,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.address {\r\n  &-wrapper {\r\n    flex-grow: 1;\r\n  }\r\n  &__head {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 24px;\r\n  }\r\n\r\n  &__title {\r\n    color: var(--grey-dark);\r\n    font-size: 48px;\r\n    font-weight: 700;\r\n    line-height: 133%;\r\n  }\r\n  &__btn {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    height: 56px;\r\n  }\r\n}\r\n.address {\r\n  &__list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n  }\r\n\r\n  &__list-item {\r\n    width: 100%;\r\n    background-color: var(--white);\r\n    border-radius: $border;\r\n    padding: 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 16px;\r\n    &::before {\r\n      content: url(\"@/img/icon/location-grey.svg\");\r\n      height: 22px;\r\n    }\r\n  }\r\n\r\n  &__info {\r\n    flex-grow: 1;\r\n  }\r\n\r\n  &__address {\r\n    color: var(--grey-dark);\r\n    font-weight: 500;\r\n  }\r\n\r\n  &__other {\r\n    color: rgb(104, 104, 112);\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n  }\r\n\r\n  &__remove-btn {\r\n    background-color: rgba(39, 39, 39, 0.05);\r\n    border-radius: 8px;\r\n    height: 29px;\r\n    width: 29px;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.el-popover.el-popper.is-light {\r\n    background: var(--grey-light);\r\n    border: 1px solid var(--grey-text);\r\n    border-radius: $border;\r\n}\r\n.el-popconfirm__icon {\r\n    width: 20px;\r\n    height: 10px;\r\n}\r\n// стрелка\r\n.el-popover.el-popper.is-light .el-popper__arrow::before {\r\n    border: 1px solid var(--grey-text);\r\n    background: var(--grey-light);\r\n    width: 10px;\r\n    height: 10px;\r\n  }\r\n</style>\r\n"],"mappings":";AAgDA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,MAAK,QAAS,KAAK;AAC5B,SAASC,YAAW,QAAS,MAAM;AACnC,OAAOC,YAAW,MAAO,uBAAuB;AAChD,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,CACL;QAAEC,IAAI,EAAE,SAAS;QAAEC,IAAI,EAAE;MAAoB,CAAC,EAC9C;QAAED,IAAI,EAAE,gBAAgB;QAAEC,IAAI,EAAE;MAA4B,CAAC,CAC9D;MACDJ,YAAY,EAAEA;IAChB,CAAC;EACH,CAAC;EAEDK,OAAO,EAAE;IACP,GAAGN,YAAY,CAAC;MACdO,QAAQ,EAAE;IACZ,CAAC,CAAC;IACF,MAAMC,YAAYA,CAAA,EAAG;MACnB,IAAIC,MAAK,GAAI,IAAI;MACjB,IAAI;QACF,MAAM;UAAEP;QAAK,IAAI,MAAMJ,KAAK,CAACY,GAAG,CAAE,4CAA2C,CAAC;QAE9E,IAAI,CAACC,OAAM,GAAIT,IAAI;MACrB,EAAE,OAAOU,GAAG,EAAE;QACZH,MAAK,GAAIG,GAAG,CAACC,QAAQ,CAACC,MAAM;MAC9B,UAAU;QACR,IAAIL,MAAK,IAAK,GAAG,EAAE;UACjB,IAAI,CAACM,OAAO,CAACC,IAAI,CAAC,eAAe,CAAC;QACpC;MACF;IACF,CAAC;IACD,MAAMC,aAAaA,CAACC,EAAE,EAAE;MACtB,IAAIT,MAAK,GAAI,IAAI;MACjB,IAAI;QACF,MAAMX,KAAK,CAACqB,MAAM,CAAE,8CAA6CD,EAAG,EAAC,CAAC;QAEtE,IAAIE,KAAI,GAAI,IAAI,CAACT,OAAO,CAACU,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACJ,EAAC,KAAMA,EAAE,CAAC;QAC5D,IAAIE,KAAI,KAAM,CAAC,CAAC,EAAE;UAChB,IAAI,CAACT,OAAO,CAACY,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;QAC/B;MACF,EAAE,OAAOR,GAAG,EAAE;QACZH,MAAK,GAAIG,GAAG,CAACC,QAAQ,CAACC,MAAM;MAC9B,UAAU;QACR,IAAIL,MAAK,IAAK,GAAG,EAAE;UACjB,IAAI,CAACM,OAAO,CAACC,IAAI,CAAC,eAAe,CAAC;QACpC;MACF;IACF;EACF,CAAC;EACDQ,gBAAgBA,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAE;IAC/BA,IAAI,CAAEC,EAAE,IAAK;MACXA,EAAE,CAACrB,QAAQ,CAACqB,EAAE,CAACzB,KAAK,CAAC;IACvB,CAAC,CAAC;EACJ,CAAC;EACD0B,OAAOA,CAAA,EAAG;IACR,IAAI,CAACrB,YAAY,CAAC,CAAC;EACrB,CAAC;EACDsB,KAAKA,CAAA,EAAG;IACN,MAAM;MAAEnB;IAAQ,IAAIZ,MAAM,CAAC,SAAS,CAAC;IAErC,OAAO;MACLY;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}