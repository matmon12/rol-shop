{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { inject, ref, computed } from \"vue\";\nimport { Navigation } from \"swiper/modules\";\nimport { Swiper, SwiperSlide } from \"swiper/vue\";\nimport { mapActions } from \"vuex\";\nimport \"swiper/css\";\nimport \"swiper/css/navigation\";\nexport default {\n  data() {\n    return {\n      error: false,\n      products: [],\n      category: null,\n      currentPathName: \"\",\n      categoryMap: {\n        rolls: \"Роллы\",\n        sushi: \"Суши\",\n        sets: \"Сеты\",\n        snacks: \"Боулы\",\n        drinks: \"Напитки\",\n        rollsq: \"Соусы\"\n      },\n      components: [],\n      idFirst: 0,\n      idLast: 0,\n      isLoading: false,\n      isLoadingSlides: false,\n      signalItem: null,\n      signalIngredients: null,\n      lastRequestItem: null,\n      lastRequestIngredients: null,\n      pageSlide: 1,\n      pageNumber: 1,\n      limitSlide: 4,\n      currentPageSlide: 0,\n      totalPagesSlide: 0,\n      buttonDisabledPrev: computed(() => Number(this.$route.params.id) == this.idFirst),\n      buttonDisabledNext: computed(() => Number(this.$route.params.id) == this.idLast)\n    };\n  },\n  components: {\n    Swiper,\n    SwiperSlide\n  },\n  computed: {\n    paths() {\n      return [{\n        name: this.categoryMap[this.category],\n        path: `/rol-shop/${this.$route.params.category}`\n      }, {\n        name: this.currentPathName,\n        path: this.$route.params\n      }];\n    }\n  },\n  methods: {\n    ...mapActions({\n      addToFavorite: \"favorite/addToFavorite\"\n    }),\n    async fetchItems(id) {\n      let apiRes = null;\n      try {\n        this.isLoading = true;\n        this.controller = new AbortController();\n        const {\n          data\n        } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/items?id=${id}`, {\n          signal: this.controller.signal\n        });\n        this.product = {\n          ...data[0],\n          isFavorite: false,\n          favoriteId: null,\n          isAdded: false,\n          count: 1\n        };\n\n        // название текущей страницы в хлебных крошках\n        this.currentPathName = this.product.title;\n      } catch (err) {\n        apiRes = err.response.status;\n      } finally {\n        this.isLoading = false;\n        if (apiRes == 404) {\n          this.error = true;\n        }\n      }\n    },\n    async fetchFavorite() {\n      try {\n        const {\n          data: favorites\n        } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/favorites`);\n        const favorite = favorites.find(favorite => favorite.item_id === this.product.id);\n        if (favorite) {\n          this.product.isFavorite = true;\n          this.product.favoriteId = favorite.id;\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    async fetchIngredients() {\n      // остановка запросов перед следующим вызовом функции\n      const controller = new AbortController();\n      if (this.lastRequestIngredients) {\n        this.lastRequestIngredients.abort();\n      }\n      this.lastRequestIngredients = controller;\n      this.signalIngredients = controller.signal;\n\n      // в массив и обработка игредиентов\n      if (this.product.composition) {\n        let ingredients = this.product.composition.split(\",\");\n        ingredients = ingredients.map(obj => obj.trim());\n        try {\n          // очистка массива\n          this.components = [];\n          for (const ingredient of ingredients) {\n            const {\n              data: resurs\n            } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/components?name=*${ingredient}`, {\n              signal: this.signalIngredients\n            });\n            if (resurs.length > 0) {\n              this.components.push(resurs[0]);\n            }\n          }\n        } catch (err) {\n          if (axios.isCancel(err)) {\n            console.log(err);\n          } else {\n            console.error(err);\n          }\n        }\n      }\n    },\n    onClickGoItem(to) {\n      const currentId = Number(this.$route.params.id);\n      if (to == \"next\" && currentId < this.idLast) {\n        this.$router.push(`/rol-shop/${this.category}/${currentId + 1}`);\n      }\n      if (to == \"prev\" && currentId > this.idFirst) {\n        this.$router.push(`/rol-shop/${this.category}/${currentId - 1}`);\n      }\n    },\n    async countItemsCategory() {\n      const {\n        data: limit\n      } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/items?category=${this.category}&limit=1`);\n\n      // ID первой и последнего товаров в категории\n      this.idFirst = limit.items[0].id;\n      this.idLast = limit.items[0].id + limit.meta.total_items - 1;\n    },\n    load(id) {\n      this.fetchItems(id).then(() => {\n        // включение кнопки корзины\n        this.cart.some(cartItem => cartItem.id === this.product.id) ? this.product.isAdded = true : null;\n        this.fetchFavorite();\n        this.fetchIngredients();\n      });\n    },\n    async fetchSlides() {\n      try {\n        this.isLoadingSlides = true;\n        const {\n          data\n        } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/items?page=${this.pageSlide}&limit=${this.limitSlide}&category=${this.category}`);\n        this.slidesTovar = this.slidesTovar.concat(data.items.map(obj => ({\n          ...obj,\n          isFavorite: false,\n          favoriteId: null,\n          isAdded: false,\n          count: 1\n        })));\n\n        // текущая загруженная страница\n        this.currentPageSlide = data.meta.current_page;\n        this.totalPagesSlide = data.meta.total_pages;\n      } catch (err) {\n        console.log(err);\n      } finally {\n        this.isLoadingSlides = false;\n      }\n    },\n    async fetchFavoriteSlides() {\n      try {\n        const {\n          data: favorites\n        } = await axios.get(`https://c2ff7a8de0a119c8.mokky.dev/favorites`);\n        this.slidesTovar = this.slidesTovar.map(item => {\n          const favorite = favorites.find(favorite => favorite.item_id === item.id);\n          if (!favorite) {\n            return item;\n          }\n          return {\n            ...item,\n            isFavorite: true,\n            favoriteId: favorite.id\n          };\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    loadSlides() {\n      this.fetchSlides().then(() => {\n        // включение кнопки для слайдов\n        this.slidesTovar = this.slidesTovar.map(item => ({\n          ...item,\n          isAdded: this.cart.some(cartItem => cartItem.id === item.id)\n        }));\n        this.fetchFavoriteSlides();\n      });\n    },\n    onSlideChange(direction, swiper) {\n      if (direction == \"prev\") {\n        if (this.pageNumber > 1) {\n          // текущая страница в слайдере\n          this.pageNumber = this.pageNumber - 1;\n          swiper.slidePrev();\n        }\n      }\n      if (direction == \"next\") {\n        if (this.pageNumber < this.totalPagesSlide) {\n          this.pageNumber = this.pageNumber + 1;\n          if (this.pageNumber <= this.currentPageSlide) {\n            //  если уже была загружена\n            swiper.slideNext();\n          } else {\n            this.pageSlide = this.pageSlide + 1;\n            this.fetchSlides().then(() => {\n              // включение кнопки для слайдов\n              this.slidesTovar = this.slidesTovar.map(item => ({\n                ...item,\n                isAdded: this.cart.some(cartItem => cartItem.id === item.id)\n              }));\n              this.fetchFavoriteSlides();\n              // переход\n              swiper.slideNext();\n            });\n          }\n        }\n      }\n    },\n    syncFavorite(type, item) {\n      if (type == \"product\") {\n        const sliderItem = this.slidesTovar.find(pl => pl.id === this.product.id);\n        if (sliderItem) {\n          if (!sliderItem.isFavorite) {\n            sliderItem.isFavorite = true;\n          } else {\n            sliderItem.isFavorite = false;\n          }\n        }\n      }\n      if (type == \"slides\") {\n        if (item.id == this.product.id) {\n          if (!this.product.isFavorite) {\n            this.product.isFavorite = true;\n          } else {\n            this.product.isFavorite = false;\n          }\n        }\n      }\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      vm.category = to.params.category;\n    });\n  },\n  beforeRouteUpdate(to, from, next) {\n    this.category = to.params.category;\n    // для перехода к другому товару\n    this.load(to.params.id);\n    next();\n  },\n  mounted() {\n    this.load(this.$route.params.id);\n    this.countItemsCategory();\n\n    // очистка слайдера\n    this.slidesTovar = [];\n  },\n  setup() {\n    const prev = ref(null);\n    const next = ref(null);\n    const {\n      product,\n      slidesTovar\n    } = inject(\"items\");\n    const {\n      cart,\n      addToCart,\n      removeFromCart\n    } = inject(\"cart\");\n    const onClickAddPlus = (item, type) => {\n      if (!item.isAdded) {\n        addToCart(item);\n        // синхрон между товаром и слайдером (корзина)\n        if (type == \"product\") {\n          slidesTovar.value.forEach(element => {\n            if (element.id == item.id) {\n              element.isAdded = true;\n            }\n          });\n        }\n        if (type == \"slides\" && product.value.id === item.id) {\n          product.value.isAdded = true;\n        }\n      } else {\n        removeFromCart(item);\n\n        // изменение состояния кнопки товара\n        product.value.isAdded = false;\n        product.value.count = 1;\n\n        // карточка слайдера\n        slidesTovar.value.forEach(pl => {\n          if (pl.id === item.id) {\n            pl.isAdded = false;\n            pl.count = 1;\n          }\n        });\n      }\n    };\n    return {\n      modules: [Navigation],\n      product,\n      prev,\n      next,\n      cart,\n      onClickAddPlus,\n      slidesTovar\n    };\n  }\n};","map":{"version":3,"names":["axios","inject","ref","computed","Navigation","Swiper","SwiperSlide","mapActions","data","error","products","category","currentPathName","categoryMap","rolls","sushi","sets","snacks","drinks","rollsq","components","idFirst","idLast","isLoading","isLoadingSlides","signalItem","signalIngredients","lastRequestItem","lastRequestIngredients","pageSlide","pageNumber","limitSlide","currentPageSlide","totalPagesSlide","buttonDisabledPrev","Number","$route","params","id","buttonDisabledNext","paths","name","path","methods","addToFavorite","fetchItems","apiRes","controller","AbortController","get","signal","product","isFavorite","favoriteId","isAdded","count","title","err","response","status","fetchFavorite","favorites","favorite","find","item_id","console","log","fetchIngredients","abort","composition","ingredients","split","map","obj","trim","ingredient","resurs","length","push","isCancel","onClickGoItem","to","currentId","$router","countItemsCategory","limit","items","meta","total_items","load","then","cart","some","cartItem","fetchSlides","slidesTovar","concat","current_page","total_pages","fetchFavoriteSlides","item","loadSlides","onSlideChange","direction","swiper","slidePrev","slideNext","syncFavorite","type","sliderItem","pl","beforeRouteEnter","from","next","vm","beforeRouteUpdate","mounted","setup","prev","addToCart","removeFromCart","onClickAddPlus","value","forEach","element","modules"],"sources":["C:\\gitPages\\rol-shop\\src\\pages\\Product.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"!error\">\r\n    <div class=\"tovar\">\r\n      <div class=\"container\">\r\n        <div class=\"tovar__inner\">\r\n          <Category class=\"category\" />\r\n\r\n          <Crumbs :paths=\"paths\" class=\"tovar-crumbs\" />\r\n\r\n          <div class=\"tovar__content\">\r\n            <div class=\"tovar-wrapper\" v-if=\"Object.keys(this.product).length > 0\">\r\n              <div class=\"tovar__left\">\r\n                <div class=\"tovar__imgwrapper\">\r\n                  <img\r\n                    class=\"tovar__img\"\r\n                    :src=\"require(`@/img/products/${product.imgUrl}`)\"\r\n                    alt=\"product\"\r\n                  />\r\n                  <img src=\"@/img/back.png\" alt=\"back\" class=\"tovar-back\" />\r\n                  <div class=\"tovar__filters\">\r\n                    <div class=\"tovar__filter filter_1\" v-if=\"product.filter_2\">\r\n                      <img src=\"@/img/icon/filter-2.svg\" alt=\"icon\" />\r\n                      <p>Вегеторианское</p>\r\n                    </div>\r\n                    <div class=\"tovar__filter filter_2\" v-if=\"product.filter_1\">\r\n                      <img src=\"@/img/icon/filter-1.svg\" alt=\"icon\" />\r\n                      <p>Острое</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"tovar__right\">\r\n                <div class=\"tovar__tags\">\r\n                  <p class=\"tovar__tag tovar__tag-hit\" v-if=\"product.isHit\">Hit</p>\r\n                  <p class=\"tovar__tag tovar__tag-new\" v-if=\"product.isNew\">New</p>\r\n                </div>\r\n                <h1 class=\"tovar__title\">{{ product.title }}</h1>\r\n                <p v-if=\"product.weight\" class=\"tovar-weight\">\r\n                  Вес: {{ product.weight }}г\r\n                </p>\r\n                <p v-else class=\"tovar-weight\">Объем: {{ product.volume }}л</p>\r\n                <p v-if=\"product.weight\" class=\"tovar-components\">Состав:</p>\r\n\r\n                <div v-if=\"product.weight\" class=\"swiper-object-2\">\r\n                  <swiper\r\n                    :modules=\"modules\"\r\n                    :slides-per-view=\"5\"\r\n                    :slides-per-group=\"3\"\r\n                    :space-between=\"8\"\r\n                    :navigation=\"{\r\n                      prevEl: prev,\r\n                      nextEl: next,\r\n                    }\"\r\n                    class=\"tovar-slider\"\r\n                  >\r\n                    <swiper-slide\r\n                      v-for=\"(slide, id) in components\"\r\n                      :key=\"id\"\r\n                      class=\"tovar-slider__slide\"\r\n                    >\r\n                      <div class=\"tovar-components__imgwrapper\">\r\n                        <img\r\n                          v-if=\"components.length > 0\"\r\n                          class=\"tovar-components__img\"\r\n                          :src=\"require(`@/img/ingredients/${slide.imgUrl}`)\"\r\n                          alt=\"component\"\r\n                        />\r\n                      </div>\r\n                      <p class=\"tovar-components__text\">{{ slide.name }}</p>\r\n                    </swiper-slide>\r\n                  </swiper>\r\n                  <div class=\"navigation\">\r\n                    <div ref=\"prev\" class=\"swiper-button-prev\"></div>\r\n                    <div ref=\"next\" class=\"swiper-button-next\"></div>\r\n                  </div>\r\n                </div>\r\n\r\n                <label v-if=\"product.weight\" class=\"switch-box\">\r\n                  <div class=\"switch\">\r\n                    <input type=\"checkbox\" :checked=\"product.filter_3\" />\r\n                    <span class=\"round\"></span>\r\n                  </div>\r\n                  Безлактозное\r\n                </label>\r\n\r\n                <div class=\"tovar__shop\">\r\n                  <p class=\"tovar__price\">{{ product.price }}<span>грн</span></p>\r\n                  <button\r\n                    class=\"tovar__cart\"\r\n                    :class=\"{ 'is-added': product.isAdded }\"\r\n                    @click=\"onClickAddPlus(product, 'product')\"\r\n                  >\r\n                    В корзину\r\n                    <img\r\n                      :src=\"\r\n                        !product.isAdded\r\n                          ? require('@/img/icon/cart-green.svg')\r\n                          : require('@/img/icon/cart-white.svg')\r\n                      \"\r\n                      alt=\"cart\"\r\n                    />\r\n                  </button>\r\n                  <button\r\n                    class=\"tovar__favorite\"\r\n                    :class=\"{ 'is-favorite': product.isFavorite }\"\r\n                    @click=\"addToFavorite(product), syncFavorite('product')\"\r\n                  >\r\n                    <img\r\n                      :src=\"\r\n                        !product.isFavorite\r\n                          ? require('@/img/icon/heart-orange.svg')\r\n                          : require('@/img/icon/favorite-checked.svg')\r\n                      \"\r\n                      alt=\"heart\"\r\n                    />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                class=\"tovar__btn-prev\"\r\n                @click=\"onClickGoItem('prev')\"\r\n                :disabled=\"buttonDisabledPrev\"\r\n              >\r\n                <img src=\"@/img/icon/arrow-right.svg\" alt=\"arrow\" />\r\n              </button>\r\n              <button\r\n                class=\"tovar__btn-next\"\r\n                @click=\"onClickGoItem('next')\"\r\n                :disabled=\"buttonDisabledNext\"\r\n              >\r\n                <img src=\"@/img/icon/arrow-right.svg\" alt=\"arrow\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div v-if=\"isLoading\" class=\"loader-box loader-slides\">\r\n              <span class=\"loader\"></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"tovar-slider__wrapper\">\r\n      <div class=\"container\">\r\n        <div class=\"tovar-slider__head\">\r\n          <h6 class=\"tovar-slider__title\">Может, еще кое-что?</h6>\r\n          <div class=\"tovar-slider__count\">{{ pageNumber }} из {{ totalPagesSlide }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <SliderCategory\r\n        :slides=\"slidesTovar\"\r\n        :pageNumber=\"pageNumber\"\r\n        :totalPages=\"totalPagesSlide\"\r\n        @on-slide-change-prev=\"(direction, swiper) => onSlideChange(direction, swiper)\"\r\n        @on-slide-change-next=\"(direction, swiper) => onSlideChange(direction, swiper)\"\r\n        @add-to-favorite=\"\r\n          (item) => {\r\n            this.addToFavorite(item), syncFavorite('slides', item);\r\n          }\r\n        \"\r\n        @add-to-cart=\"(item) => onClickAddPlus(item, 'slides')\"\r\n        v-intersection=\"{ active: () => loadSlides() }\"\r\n      />\r\n      <div v-if=\"isLoadingSlides\" class=\"loader-box loader-slides\">\r\n        <span class=\"loader\"></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"tovar-info\">\r\n      <div class=\"container\">\r\n        <InfoText class=\"tovar-info\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Error\r\n    v-else\r\n    :imgUrl=\"require('@/img/icon/404.svg')\"\r\n    :title=\"['Ошибка 404.', 'Что-то пошло не так.']\"\r\n    text=\"Страница, которую вы ищите, временно не доступна или ее еже нет\"\r\n    :button=\"{imgUrl: '', text: 'Вернуться на главную'}\"\r\n    @click-error=\"this.$router.push('/rol-shop/')\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { inject, ref, computed } from \"vue\";\r\nimport { Navigation } from \"swiper/modules\";\r\nimport { Swiper, SwiperSlide } from \"swiper/vue\";\r\nimport { mapActions } from \"vuex\";\r\nimport \"swiper/css\";\r\nimport \"swiper/css/navigation\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      error: false,\r\n      products: [],\r\n      category: null,\r\n      currentPathName: \"\",\r\n      categoryMap: {\r\n        rolls: \"Роллы\",\r\n        sushi: \"Суши\",\r\n        sets: \"Сеты\",\r\n        snacks: \"Боулы\",\r\n        drinks: \"Напитки\",\r\n        rollsq: \"Соусы\",\r\n      },\r\n      components: [],\r\n      idFirst: 0,\r\n      idLast: 0,\r\n      isLoading: false,\r\n      isLoadingSlides: false,\r\n      signalItem: null,\r\n      signalIngredients: null,\r\n      lastRequestItem: null,\r\n      lastRequestIngredients: null,\r\n      pageSlide: 1,\r\n      pageNumber: 1,\r\n      limitSlide: 4,\r\n      currentPageSlide: 0,\r\n      totalPagesSlide: 0,\r\n      buttonDisabledPrev: computed(() => Number(this.$route.params.id) == this.idFirst),\r\n      buttonDisabledNext: computed(() => Number(this.$route.params.id) == this.idLast),\r\n    };\r\n  },\r\n  components: {\r\n    Swiper,\r\n    SwiperSlide,\r\n  },\r\n  computed: {\r\n    paths() {\r\n      return [\r\n        {\r\n          name: this.categoryMap[this.category],\r\n          path: `/rol-shop/${this.$route.params.category}`,\r\n        },\r\n        { name: this.currentPathName, path: this.$route.params },\r\n      ];\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      addToFavorite: \"favorite/addToFavorite\",\r\n    }),\r\n    async fetchItems(id) {\r\n      let apiRes = null;\r\n      try {\r\n        this.isLoading = true;\r\n\r\n        this.controller = new AbortController();\r\n        const { data } = await axios.get(\r\n          `https://c2ff7a8de0a119c8.mokky.dev/items?id=${id}`,\r\n          {\r\n            signal: this.controller.signal,\r\n          }\r\n        );\r\n\r\n        this.product = {\r\n          ...data[0],\r\n          isFavorite: false,\r\n          favoriteId: null,\r\n          isAdded: false,\r\n          count: 1,\r\n        };\r\n\r\n        // название текущей страницы в хлебных крошках\r\n        this.currentPathName = this.product.title;\r\n      } catch (err) {\r\n        apiRes = err.response.status;\r\n      } finally {\r\n        this.isLoading = false;\r\n        if (apiRes == 404) {\r\n          this.error = true;\r\n        }\r\n      }\r\n    },\r\n    async fetchFavorite() {\r\n      try {\r\n        const { data: favorites } = await axios.get(\r\n          `https://c2ff7a8de0a119c8.mokky.dev/favorites`\r\n        );\r\n\r\n        const favorite = favorites.find(\r\n          (favorite) => favorite.item_id === this.product.id\r\n        );\r\n        if (favorite) {\r\n          this.product.isFavorite = true;\r\n          this.product.favoriteId = favorite.id;\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    async fetchIngredients() {\r\n      // остановка запросов перед следующим вызовом функции\r\n      const controller = new AbortController();\r\n\r\n      if (this.lastRequestIngredients) {\r\n        this.lastRequestIngredients.abort();\r\n      }\r\n\r\n      this.lastRequestIngredients = controller;\r\n      this.signalIngredients = controller.signal;\r\n\r\n      // в массив и обработка игредиентов\r\n      if (this.product.composition) {\r\n        let ingredients = this.product.composition.split(\",\");\r\n        ingredients = ingredients.map((obj) => obj.trim());\r\n\r\n        try {\r\n          // очистка массива\r\n          this.components = [];\r\n\r\n          for (const ingredient of ingredients) {\r\n            const {\r\n              data: resurs,\r\n            } = await axios.get(\r\n              `https://c2ff7a8de0a119c8.mokky.dev/components?name=*${ingredient}`,\r\n              { signal: this.signalIngredients }\r\n            );\r\n\r\n            if (resurs.length > 0) {\r\n              this.components.push(resurs[0]);\r\n            }\r\n          }\r\n        } catch (err) {\r\n          if (axios.isCancel(err)) {\r\n            console.log(err);\r\n          } else {\r\n            console.error(err);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    onClickGoItem(to) {\r\n      const currentId = Number(this.$route.params.id);\r\n      if (to == \"next\" && currentId < this.idLast) {\r\n        this.$router.push(`/rol-shop/${this.category}/${currentId + 1}`);\r\n      }\r\n      if (to == \"prev\" && currentId > this.idFirst) {\r\n        this.$router.push(`/rol-shop/${this.category}/${currentId - 1}`);\r\n      }\r\n    },\r\n    async countItemsCategory() {\r\n      const { data: limit } = await axios.get(\r\n        `https://c2ff7a8de0a119c8.mokky.dev/items?category=${this.category}&limit=1`\r\n      );\r\n\r\n      // ID первой и последнего товаров в категории\r\n      this.idFirst = limit.items[0].id;\r\n      this.idLast = limit.items[0].id + limit.meta.total_items - 1;\r\n    },\r\n    load(id) {\r\n      this.fetchItems(id).then(() => {\r\n        // включение кнопки корзины\r\n        this.cart.some((cartItem) => cartItem.id === this.product.id)\r\n          ? (this.product.isAdded = true)\r\n          : null;\r\n\r\n        this.fetchFavorite();\r\n        this.fetchIngredients();\r\n      });\r\n    },\r\n    async fetchSlides() {\r\n      try {\r\n        this.isLoadingSlides = true;\r\n\r\n        const { data } = await axios.get(\r\n          `https://c2ff7a8de0a119c8.mokky.dev/items?page=${this.pageSlide}&limit=${this.limitSlide}&category=${this.category}`\r\n        );\r\n\r\n        this.slidesTovar = this.slidesTovar.concat(\r\n          data.items.map((obj) => ({\r\n            ...obj,\r\n            isFavorite: false,\r\n            favoriteId: null,\r\n            isAdded: false,\r\n            count: 1,\r\n          }))\r\n        );\r\n\r\n        // текущая загруженная страница\r\n        this.currentPageSlide = data.meta.current_page;\r\n        this.totalPagesSlide = data.meta.total_pages;\r\n      } catch (err) {\r\n        console.log(err);\r\n      } finally {\r\n        this.isLoadingSlides = false;\r\n      }\r\n    },\r\n    async fetchFavoriteSlides() {\r\n      try {\r\n        const { data: favorites } = await axios.get(\r\n          `https://c2ff7a8de0a119c8.mokky.dev/favorites`\r\n        );\r\n\r\n        this.slidesTovar = this.slidesTovar.map((item) => {\r\n          const favorite = favorites.find((favorite) => favorite.item_id === item.id);\r\n\r\n          if (!favorite) {\r\n            return item;\r\n          }\r\n\r\n          return {\r\n            ...item,\r\n            isFavorite: true,\r\n            favoriteId: favorite.id,\r\n          };\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    loadSlides() {\r\n      this.fetchSlides().then(() => {\r\n        // включение кнопки для слайдов\r\n        this.slidesTovar = this.slidesTovar.map((item) => ({\r\n          ...item,\r\n          isAdded: this.cart.some((cartItem) => cartItem.id === item.id),\r\n        }));\r\n        this.fetchFavoriteSlides();\r\n      });\r\n    },\r\n    onSlideChange(direction, swiper) {\r\n      if (direction == \"prev\") {\r\n        if (this.pageNumber > 1) {\r\n          // текущая страница в слайдере\r\n          this.pageNumber = this.pageNumber - 1;\r\n          swiper.slidePrev();\r\n        }\r\n      }\r\n      if (direction == \"next\") {\r\n        if (this.pageNumber < this.totalPagesSlide) {\r\n          this.pageNumber = this.pageNumber + 1;\r\n          if (this.pageNumber <= this.currentPageSlide) {\r\n            //  если уже была загружена\r\n            swiper.slideNext();\r\n          } else {\r\n            this.pageSlide = this.pageSlide + 1;\r\n            this.fetchSlides().then(() => {\r\n              // включение кнопки для слайдов\r\n              this.slidesTovar = this.slidesTovar.map((item) => ({\r\n                ...item,\r\n                isAdded: this.cart.some((cartItem) => cartItem.id === item.id),\r\n              }));\r\n              this.fetchFavoriteSlides();\r\n              // переход\r\n              swiper.slideNext();\r\n            });\r\n          }\r\n        }\r\n      }\r\n    },\r\n    syncFavorite(type, item) {\r\n      if (type == \"product\") {\r\n        const sliderItem = this.slidesTovar.find((pl) => pl.id === this.product.id);\r\n        if (sliderItem) {\r\n          if (!sliderItem.isFavorite) {\r\n            sliderItem.isFavorite = true;\r\n          } else {\r\n            sliderItem.isFavorite = false;\r\n          }\r\n        }\r\n      }\r\n      if (type == \"slides\") {\r\n        if (item.id == this.product.id) {\r\n          if (!this.product.isFavorite) {\r\n            this.product.isFavorite = true;\r\n          } else {\r\n            this.product.isFavorite = false;\r\n          }\r\n        }\r\n      }\r\n    },\r\n  },\r\n\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {\r\n      vm.category = to.params.category;\r\n    });\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    this.category = to.params.category;\r\n    // для перехода к другому товару\r\n    this.load(to.params.id);\r\n\r\n    next();\r\n  },\r\n  mounted() {\r\n    this.load(this.$route.params.id);\r\n    this.countItemsCategory();\r\n\r\n    // очистка слайдера\r\n    this.slidesTovar = [];\r\n  },\r\n  setup() {\r\n    const prev = ref(null);\r\n    const next = ref(null);\r\n    const { product, slidesTovar } = inject(\"items\");\r\n    const { cart, addToCart, removeFromCart } = inject(\"cart\");\r\n\r\n    const onClickAddPlus = (item, type) => {\r\n      if (!item.isAdded) {\r\n        addToCart(item);\r\n        // синхрон между товаром и слайдером (корзина)\r\n        if (type == \"product\") {\r\n          slidesTovar.value.forEach((element) => {\r\n            if (element.id == item.id) {\r\n              element.isAdded = true;\r\n            }\r\n          });\r\n        }\r\n        if (type == \"slides\" && product.value.id === item.id) {\r\n          product.value.isAdded = true;\r\n        }\r\n      } else {\r\n        removeFromCart(item);\r\n\r\n        // изменение состояния кнопки товара\r\n        product.value.isAdded = false;\r\n        product.value.count = 1;\r\n\r\n        // карточка слайдера\r\n        slidesTovar.value.forEach((pl) => {\r\n          if (pl.id === item.id) {\r\n            pl.isAdded = false;\r\n            pl.count = 1;\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    return {\r\n      modules: [Navigation],\r\n      product,\r\n      prev,\r\n      next,\r\n      cart,\r\n      onClickAddPlus,\r\n      slidesTovar,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.tovar-crumbs {\r\n  position: absolute;\r\n  z-index: 0;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n.category {\r\n  z-index: 10;\r\n  margin-bottom: 32px;\r\n}\r\n.tovar-wrapper {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-right: 70px;\r\n  position: relative;\r\n}\r\n.tovar {\r\n  position: relative;\r\n  margin-bottom: 88px;\r\n  &__inner {\r\n    position: relative;\r\n    padding-top: 40px;\r\n  }\r\n  &__content {\r\n    position: relative;\r\n  }\r\n  &-slider {\r\n    &__wrapper {\r\n      position: relative;\r\n      margin-bottom: 88px;\r\n    }\r\n    &__head {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      margin-bottom: 32px;\r\n    }\r\n    &__title {\r\n      color: $grey-dark;\r\n      font-size: 38px;\r\n      font-weight: 700;\r\n      line-height: 105%;\r\n    }\r\n    &__count {\r\n      color: #686870;\r\n      font-size: 32px;\r\n      font-weight: 500;\r\n      line-height: 125%;\r\n    }\r\n  }\r\n\r\n  &-info {\r\n    margin-bottom: 34px;\r\n  }\r\n  &__left {\r\n    width: 40%;\r\n  }\r\n  &__imgwrapper {\r\n    width: 100%;\r\n    height: 0;\r\n    padding-bottom: 100%;\r\n    position: relative;\r\n  }\r\n\r\n  &-back {\r\n    position: absolute;\r\n    left: 60%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%) scale(1.2);\r\n    z-index: -1;\r\n  }\r\n\r\n  &__img {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 100%;\r\n    object-fit: cover;\r\n  }\r\n\r\n  &__filters {\r\n    position: absolute;\r\n    top: 15%;\r\n    left: 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n\r\n  &__filter {\r\n    padding: 8px 12px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    border-radius: 8px;\r\n    font-size: 12px;\r\n    font-weight: 500;\r\n    line-height: 133%;\r\n    width: fit-content;\r\n    img {\r\n      width: 18px;\r\n    }\r\n  }\r\n  .filter_1 {\r\n    color: #6bc026;\r\n    background-color: #d9f4c5;\r\n  }\r\n  .filter_2 {\r\n    background-color: #fbdcd5;\r\n    color: #eb5757;\r\n  }\r\n\r\n  &__right {\r\n    padding-top: 90px;\r\n    max-width: 50%;\r\n    min-width: 45%;\r\n  }\r\n\r\n  &__tags {\r\n    display: flex;\r\n    gap: 8px;\r\n  }\r\n\r\n  &__tag {\r\n    padding: 6px 10px;\r\n    border-radius: 8px;\r\n    font-size: 18px;\r\n    font-weight: 500;\r\n    line-height: 111%;\r\n    margin-bottom: 8px;\r\n    &-new {\r\n      background-color: #ccf5d5;\r\n      color: #00cc2d;\r\n    }\r\n    &-hit {\r\n      background-color: #fbdcd5;\r\n      color: #f63;\r\n    }\r\n  }\r\n\r\n  &__title {\r\n    color: $grey-dark;\r\n    font-size: 54px;\r\n    font-weight: 700;\r\n    line-height: 1.1;\r\n    margin-bottom: 16px;\r\n  }\r\n\r\n  &__shop {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  &__price {\r\n    color: $grey-dark;\r\n    font-size: 40px;\r\n    font-weight: 700;\r\n    line-height: normal;\r\n    margin-right: 32px;\r\n    span {\r\n      color: #686870;\r\n      font-size: 26px;\r\n      font-weight: 700;\r\n      margin-left: 8px;\r\n    }\r\n  }\r\n\r\n  &__cart {\r\n    height: 56px;\r\n    padding: 16px 24px;\r\n    background: var(---1, #fff);\r\n    border-radius: $border;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    color: #00cc2d;\r\n    margin-right: 16px;\r\n    transition: $transition;\r\n  }\r\n\r\n  &__favorite {\r\n    height: 56px;\r\n    padding: 16px;\r\n    background: var(---1, #fff);\r\n    border-radius: $border;\r\n    display: flex;\r\n    transition: $transition;\r\n  }\r\n\r\n  &-slider {\r\n    widows: 100%;\r\n    &__slide {\r\n      height: 102px;\r\n      border-radius: 8px;\r\n      background: #fff;\r\n      padding: 12px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      align-items: center;\r\n      gap: 8px;\r\n    }\r\n  }\r\n\r\n  .swiper-button-disabled {\r\n    display: none;\r\n  }\r\n  .swiper-button-next,\r\n  .swiper-button-prev {\r\n    background: #fff;\r\n    border-radius: 8px;\r\n    width: 47px;\r\n    height: 100%;\r\n    top: 0;\r\n    margin: 0;\r\n\r\n    &::before {\r\n      content: url(\"@/img/icon/arrow-right-mini.svg\");\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      height: 24px;\r\n    }\r\n    &::after {\r\n      display: none;\r\n    }\r\n  }\r\n  .swiper-button-prev {\r\n    left: 0;\r\n\r\n    &::before {\r\n      transform: translate(-50%, -50%) rotate(-180deg);\r\n    }\r\n  }\r\n  .swiper-button-next {\r\n    right: 0;\r\n  }\r\n  .is-favorite {\r\n    background: #f63;\r\n  }\r\n  .is-added {\r\n    color: #fff;\r\n    background-color: #00cc2d;\r\n  }\r\n\r\n  &__btn-prev,\r\n  &__btn-next {\r\n    width: 75px;\r\n    height: 162px;\r\n    background-color: rgba(39, 39, 39, 0.05);\r\n    border-radius: $border;\r\n    position: absolute;\r\n    right: 0;\r\n    top: 50%;\r\n    transform: translate(50%, -50%);\r\n    &:disabled {\r\n      background-color: rgba(39, 39, 39, 0.2);\r\n      cursor: default;\r\n    }\r\n  }\r\n  &__btn-prev {\r\n    left: 0;\r\n    transform: translate(-50%, -50%);\r\n\r\n    img {\r\n      transform: rotate(180deg);\r\n    }\r\n  }\r\n}\r\n.swiper-object-2 {\r\n  position: relative;\r\n  padding-right: 55px;\r\n  margin-bottom: 25px;\r\n}\r\n.tovar-weight {\r\n  color: #f63;\r\n  font-size: 24px;\r\n  font-weight: 500;\r\n  line-height: 125%;\r\n  margin-bottom: 24px;\r\n}\r\n.tovar-components {\r\n  color: $grey-dark;\r\n  font-weight: 500;\r\n  margin-bottom: 12px;\r\n\r\n  &__imgwrapper {\r\n    height: 50px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  &__img {\r\n  }\r\n\r\n  &__text {\r\n    color: $grey-dark;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    line-height: 142%;\r\n    text-align: center;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 1;\r\n    -webkit-box-orient: vertical;\r\n  }\r\n}\r\n\r\n// switch\r\n.switch {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 56px;\r\n  height: 35px;\r\n  &-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 16px;\r\n    color: $grey-dark;\r\n    font-size: 20px;\r\n    font-weight: 500;\r\n    line-height: 140%;\r\n    margin-left: 5px;\r\n    margin-bottom: 32px;\r\n  }\r\n}\r\n\r\n.switch input {\r\n  opacity: 0;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n\r\n.round {\r\n  position: absolute;\r\n  cursor: pointer;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: #ccc;\r\n  -webkit-transition: 0.4s;\r\n  transition: 0.4s;\r\n}\r\n\r\n.round:before {\r\n  position: absolute;\r\n  content: \"\";\r\n  height: 29px;\r\n  width: 29px;\r\n  left: 3px;\r\n  bottom: 3px;\r\n  background: white url(\"@/img/icon/filter-3.svg\");\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  -webkit-transition: 0.4s;\r\n  transition: 0.4s;\r\n}\r\n\r\ninput:checked + .round {\r\n  background-color: #f63;\r\n}\r\ninput:checked + .round:before {\r\n  filter: drop-shadow(0px 3px 8px rgba(0, 0, 0, 0.25));\r\n}\r\ninput:focus + .round:before {\r\n  filter: drop-shadow(0px 3px 8px rgba(0, 0, 0, 0.25));\r\n}\r\n\r\ninput:checked + .round:before {\r\n  -webkit-transform: translateX(21px);\r\n  -ms-transform: translateX(21px);\r\n  transform: translateX(21px);\r\n}\r\n\r\n.round {\r\n  border-radius: 34px;\r\n}\r\n.round:before {\r\n  border-radius: 50%;\r\n}\r\n\r\n// loader\r\n.loader-slides,\r\n.loader-product {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 10;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}