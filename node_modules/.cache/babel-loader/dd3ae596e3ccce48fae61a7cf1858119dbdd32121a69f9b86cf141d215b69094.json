{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"./vue-yandex-maps.css\";\nimport { t as throwException, g as getException, c as createYmapsOptions, V as VueYandexMaps, i as initYmaps, a as copy, e as excludeKeys, s as sleep } from \"./vue-yandex-maps-fHw_W40B.js\";\nimport { defineComponent, shallowRef, ref, provide, computed, onMounted, nextTick, watch, onBeforeUnmount, h, toRaw, getCurrentInstance, inject, isRef } from \"vue\";\nfunction applyModifier(coords, modifier) {\n  const result = {\n    x: 0,\n    y: 0\n  };\n  result.x = coords.x * modifier;\n  result.y = coords.y * modifier;\n  return result;\n}\nfunction applyFunctionModifier(coords, functionModifier) {\n  const result = {\n    x: 0,\n    y: 0\n  };\n  result.x = functionModifier(coords.x, 1);\n  result.y = functionModifier(coords.y, 2);\n  return result;\n}\nfunction worldToPixels(coords, modifier) {\n  const i = 2 ** modifier / 2 * 256;\n  return applyModifier({\n    x: coords.x + 1,\n    y: 1 - coords.y\n  }, i);\n}\nfunction convertWorldCoordinates(projection, coordinates, modifier) {\n  const worldCoordinates = projection.toWorldCoordinates(coordinates);\n  return worldToPixels(worldCoordinates, modifier);\n}\nfunction pixelsToWorld(coords, modifier) {\n  const i = 2 ** modifier / 2 * 256;\n  return {\n    x: coords.x / i - 1,\n    y: 1 - coords.y / i\n  };\n}\nfunction findNeededValue(t, e, i) {\n  return Math.max(Math.min(t, i), e);\n}\nfunction worldCoordsFromModifier(projection, coords, modifier) {\n  const resultCoords = applyFunctionModifier(pixelsToWorld(coords, modifier), value => findNeededValue(value, -1, 1 - 1e-15));\n  return projection.fromWorldCoordinates(resultCoords);\n}\nfunction convertBounds(projection, bounds, modifier) {\n  const topLeft = convertWorldCoordinates(projection, bounds[0], modifier);\n  const bottomRight = convertWorldCoordinates(projection, bounds[1], modifier);\n  const modified = 2 ** modifier * 256;\n  const updatedBounds = [[topLeft.x, topLeft.y], [bottomRight.x, bottomRight.y]];\n  if (topLeft.x > bottomRight.x) {\n    updatedBounds[0][0] = topLeft.x;\n    updatedBounds[1][0] = bottomRight.x + modified;\n  }\n  if (topLeft.y > bottomRight.y) {\n    updatedBounds[0][1] = bottomRight.y;\n    updatedBounds[1][1] = topLeft.y;\n  }\n  return updatedBounds;\n}\nfunction applyMarginToCoords(coords, margin) {\n  return {\n    x: Math.max(coords.x - (margin ? margin[1] + margin[3] : 0), 1),\n    y: Math.max(coords.y - (margin ? margin[0] + margin[2] : 0), 1)\n  };\n}\nfunction findZoom(projection, bounds, coords, isSnap, zoomRange) {\n  const [[topLeftFirst, topLeftSecond], [bottomRightFirst, bottomRightSecond]] = convertBounds(projection, bounds, 0);\n  const firstCalc = Math.max(Math.abs(bottomRightFirst - topLeftFirst), 1e-10);\n  const secondCalc = Math.max(Math.abs(bottomRightSecond - topLeftSecond), 1e-10);\n  const zoom = findNeededValue(Math.min(Math.log2(coords.x / firstCalc), Math.log2(coords.y / secondCalc)), zoomRange.min, zoomRange.max);\n  return isSnap ? Math.floor(zoom + 1e-6) : zoom;\n}\nfunction findCenter(projection, bounds, zoom) {\n  const [[topLeftFirst, topLeftSecond], [bottomRightFirst, bottomRightSecond]] = convertBounds(projection, bounds, zoom);\n  return worldCoordsFromModifier(projection, {\n    x: (topLeftFirst + bottomRightFirst) / 2,\n    y: (topLeftSecond + bottomRightSecond) / 2\n  }, zoom);\n}\nasync function useYMapsLocationFromBounds({\n  bounds,\n  map\n}) {\n  var _a;\n  const ctxMap = Object.keys(map).find(x => x.endsWith(\"CtxMap\"));\n  if (!ctxMap) {\n    throwException({\n      text: \"CtxMap was not found in useYMapsGetCenterAndZoomFromBounds\",\n      isInternal: true\n    });\n  }\n  const ctx = map[ctxMap];\n  const ctxItem = await new Promise((resolve, reject) => {\n    ctx.forEach((item, {\n      name\n    }) => {\n      if (name !== \"map\") return;\n      resolve(item);\n    });\n    reject(getException({\n      text: \"Map item was not found in useYMapsGetCenterAndZoomFromBounds\",\n      isInternal: true\n    }));\n  });\n  const ctxItemMapKey = Object.keys(ctxItem).find(x => x.endsWith(\"_context\"));\n  if (!ctxItemMapKey) {\n    throwException({\n      text: \"CtxMapKey was not found in useYMapsGetCenterAndZoomFromBounds\",\n      isInternal: true\n    });\n  }\n  const ctxItemMap = ctxItem[ctxItemMapKey].map;\n  const boundsFunc = ctxItemMap.setBounds.toString();\n  const funcKey = (_a = boundsFunc.split(\"const{center:e,zoom:i}=\")[1]) == null ? void 0 : _a.split(\"(\")[0];\n  if (!funcKey) {\n    throwException({\n      text: \"funcKey was not found in useYMapsGetCenterAndZoomFromBounds\",\n      isInternal: true\n    });\n  }\n  const projection = ctxItemMap.projection;\n  const size = ctxItemMap.size;\n  const margin = ctxItemMap.margin;\n  const isSnap = ctxItemMap.effectiveZoomRounding === \"snap\";\n  const zoomRange = ctxItemMap.zoomRange;\n  const zoom = findZoom(projection, bounds, applyMarginToCoords(size, margin), isSnap, zoomRange);\n  return {\n    zoom,\n    center: findCenter(projection, bounds, zoom)\n  };\n}\nfunction createYmaps(settings) {\n  return {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    install(app) {\n      createYmapsOptions(settings);\n    }\n  };\n}\nfunction createYmapsVue2(settings) {\n  return {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    install(Vue) {\n      createYmapsOptions(settings);\n    }\n  };\n}\nconst isDate = d => d instanceof Date;\nconst isEmpty = o => Object.keys(o).length === 0;\nconst isObject = o => o != null && typeof o === \"object\";\nconst hasOwnProperty = (o, ...args) => Object.prototype.hasOwnProperty.call(o, ...args);\nconst isEmptyObject = o => isObject(o) && isEmpty(o);\nconst makeObjectWithoutPrototype = () => /* @__PURE__ */Object.create(null);\nconst diff = (lhs, rhs) => {\n  if (lhs === rhs) return {};\n  if (!isObject(lhs) || !isObject(rhs)) return rhs;\n  const deletedValues = Object.keys(lhs).reduce((acc, key) => {\n    if (!hasOwnProperty(rhs, key)) {\n      acc[key] = void 0;\n    }\n    return acc;\n  }, makeObjectWithoutPrototype());\n  if (isDate(lhs) || isDate(rhs)) {\n    if (lhs.valueOf() == rhs.valueOf()) return {};\n    return rhs;\n  }\n  return Object.keys(rhs).reduce((acc, key) => {\n    if (!hasOwnProperty(lhs, key)) {\n      acc[key] = rhs[key];\n      return acc;\n    }\n    const difference = diff(lhs[key], rhs[key]);\n    if (isEmptyObject(difference) && !isDate(difference) && (isEmptyObject(lhs[key]) || !isEmptyObject(rhs[key]))) return acc;\n    acc[key] = difference;\n    return acc;\n  }, deletedValues);\n};\nconst _sfc_main$m = defineComponent({\n  name: \"YandexMap\",\n  props: {\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    value: {\n      type: Object,\n      default: null\n    },\n    tag: {\n      type: String,\n      default: \"div\"\n    },\n    width: {\n      type: String,\n      default: \"100%\"\n    },\n    height: {\n      type: String,\n      default: \"100%\"\n    },\n    // z-index for Map Container. Without this, elements of the map will be displayed under your site's elements due to high z-index inside of them\n    zIndex: {\n      type: Number,\n      default: 0\n    },\n    /**\n     * @description Settings for cart initialization.,\n     *\n     * You can modify this object or use map methods, such as setLocation/setBehaviors e.t.c.\n     * @see https://yandex.ru/dev/maps/jsapi/doc/3.0/dg/concepts/map.html#map-parms\n     * @see https://yandex.com/dev/maps/jsapi/doc/3.0/dg/concepts/map.html#map-parms\n     */\n    settings: {\n      type: Object,\n      required: true\n    },\n    /**\n     * @description Makes settings readonly. Enable this if reactivity causes problems\n     */\n    readonlySettings: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * @description Always inserts actual user center or bounds (based on your input) on every location change\n     * @note This prop will cause user location change on every settings update (if user did move since last time). Use it with caution.\n     */\n    realSettingsLocation: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * @description You can also add layers through <yandex-*> components\n     *\n     * Modifying this object after mount will cause no effect.\n     *\n     * Instead, please use map methods, such as addChild.\n     * @see https://yandex.ru/dev/maps/jsapi/doc/3.0/dg/concepts/map.html#layers\n     * @see https://yandex.com/dev/maps/jsapi/doc/3.0/dg/concepts/map.html#layers\n     */\n    layers: {\n      type: Array,\n      default: () => []\n    },\n    /**\n     * @description Adds cursor: grab/grabbing to ymaps scheme layer\n     */\n    cursorGrab: {\n      type: Boolean,\n      default: false\n    }\n  },\n  /**\n   * @description Other events are NOT available. You can listen to events via layers prop, addChildren prop or by adding <ymap-listener> as children.\n   * @see https://yandex.ru/dev/maps/jsapi/doc/3.0/dg/concepts/events.html\n   * @see https://yandex.com/dev/maps/jsapi/doc/3.0/dg/concepts/events.html\n   */\n  emits: {\n    \"input\"(map) {\n      return !map || typeof ymaps3 === \"undefined\" || map instanceof ymaps3.YMap;\n    },\n    \"update:modelValue\"(map) {\n      return !map || typeof ymaps3 === \"undefined\" || map instanceof ymaps3.YMap;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const map = shallowRef(null);\n    const layers = shallowRef([]);\n    const projection = shallowRef(null);\n    const ymapContainer = ref(null);\n    const mounted = shallowRef(false);\n    const grabbing = shallowRef(false);\n    const needsToHold = ref(0);\n    provide(\"map\", map);\n    provide(\"layers\", layers);\n    provide(\"projection\", projection);\n    provide(\"needsToHold\", needsToHold);\n    emit(\"input\", map.value);\n    emit(\"update:modelValue\", map.value);\n    const getSettings = computed(() => ({\n      ...props.settings,\n      projection: void 0\n    }));\n    const init = async () => {\n      if (!props.settings.location) {\n        throwException({\n          text: \"You must specify location in YandexMap settings\"\n        });\n      }\n      const container = ymapContainer.value;\n      if (!container) {\n        throwException({\n          text: \"<yandex-map> container is undefined after component mount.\",\n          isInternal: true\n        });\n      }\n      if (map.value) map.value.destroy();\n      const settings = getSettings.value;\n      if (projection.value) settings.projection = projection.value;\n      const createdMap = new ymaps3.YMap(container, settings, [...layers.value, ...props.layers]);\n      map.value = createdMap;\n      emit(\"input\", map.value);\n      emit(\"update:modelValue\", map.value);\n    };\n    onMounted(async () => {\n      if (!VueYandexMaps.isLoaded.value) {\n        if (VueYandexMaps.settings.value.initializeOn === \"onComponentMount\") {\n          try {\n            await initYmaps();\n          } catch (e) {\n            console.error(\"An error occured while initializing Yandex Map with onComponentMount setting\");\n            console.error(e);\n            return;\n          }\n        } else {\n          throwException({\n            text: \"You have set up <yandex-map> component without initializing Yandex maps. Please check initializeOn setting or call initYmaps manually before registering this component.\"\n          });\n        }\n      }\n      mounted.value = true;\n      await nextTick();\n      if (needsToHold.value) {\n        await new Promise(resolve => watch(needsToHold, () => {\n          if (!needsToHold.value) resolve();\n        }, {\n          immediate: true\n        }));\n      }\n      await init();\n      let listener;\n      const setupWatcher = () => {\n        let settings = JSON.parse(JSON.stringify(toRaw(getSettings.value)));\n        watch(getSettings, val => {\n          var _a;\n          const rawVal = toRaw(val);\n          const clonedSettings = JSON.parse(JSON.stringify(rawVal));\n          if (props.realSettingsLocation && clonedSettings.location && map.value) {\n            if (\"center\" in clonedSettings.location && \"center\" in settings.location) {\n              settings.location.center = map.value.center;\n            } else if (\"bounds\" in clonedSettings.location && \"bounds\" in settings.location) {\n              settings.location.bounds = map.value.bounds;\n            }\n            if (\"zoom\" in clonedSettings.location && \"zoom\" in settings.location) settings.location.zoom = map.value.zoom;\n          }\n          const settingsDiff = Object.keys(diff(settings, clonedSettings));\n          if (settingsDiff.length === 0) return;\n          const updatedSettings = {\n            ...clonedSettings\n          };\n          for (const key in updatedSettings) {\n            if (!settingsDiff.includes(key)) delete updatedSettings[key];\n          }\n          settings = clonedSettings;\n          (_a = map.value) == null ? void 0 : _a.update(updatedSettings);\n        }, {\n          deep: true\n        });\n      };\n      if (!props.readonlySettings) {\n        setupWatcher();\n      }\n      watch(() => props.readonlySettings, val => {\n        if (!val) ;else {\n          setupWatcher();\n        }\n      });\n      watch(() => props.cursorGrab, val => {\n        if (!map.value) return;\n        if (val) {\n          listener = new ymaps3.YMapListener({\n            onActionStart: e => {\n              if (e.type === \"drag\") grabbing.value = true;\n            },\n            onActionEnd: e => {\n              if (e.type === \"drag\") grabbing.value = false;\n            }\n          });\n          map.value.addChild(listener);\n        } else if (listener) map.value.removeChild(listener);\n      }, {\n        immediate: true\n      });\n    });\n    onBeforeUnmount(() => {\n      map.value = null;\n      emit(\"input\", map.value);\n      emit(\"update:modelValue\", map.value);\n    });\n    return () => {\n      var _a;\n      const mapNodeProps = {\n        class: [\"__ymap\", {\n          \"__ymap--grab\": props.cursorGrab,\n          \"__ymap--grabbing\": props.cursorGrab && grabbing.value\n        }],\n        style: {\n          width: props.width,\n          height: props.height,\n          \"z-index\": props.zIndex.toString()\n        }\n      };\n      const containerNode = h(\"div\", {\n        class: \"__ymap_container\",\n        ref: ymapContainer\n      });\n      const slotsNodeProps = {\n        class: \"__ymap_slots\",\n        style: {\n          display: \"none\"\n        }\n      };\n      if (!mounted.value) return h(props.tag, mapNodeProps, [containerNode, h(\"div\", slotsNodeProps)]);\n      return h(props.tag, mapNodeProps, [containerNode, h(\"div\", slotsNodeProps, (_a = slots.default) == null ? void 0 : _a.call(slots, {}))]);\n    };\n  }\n});\nfunction injectMap() {\n  if (!getCurrentInstance()) {\n    throwException({\n      text: \"injectMap must be only called on runtime.\",\n      isInternal: true\n    });\n  }\n  const map = inject(\"map\");\n  if (!map || !isRef(map)) {\n    throwException({\n      text: \"Was not able to inject valid map in injectMap.\",\n      isInternal: true\n    });\n  }\n  return map;\n}\nfunction injectLayers() {\n  if (!getCurrentInstance()) {\n    throwException({\n      text: \"injectLayers must be only called on runtime.\",\n      isInternal: true\n    });\n  }\n  const layers = inject(\"layers\");\n  if (!layers || !isRef(layers)) {\n    throwException({\n      text: \"Was not able to inject valid layers in injectLayers.\",\n      isInternal: true\n    });\n  }\n  return layers;\n}\nfunction waitTillYmapInit({\n  timeoutCallback\n} = {}) {\n  if (typeof window === \"undefined\") {\n    throwException({\n      text: \"waitTillYmapInit cannot be called on SSR.\",\n      isInternal: true\n    });\n  }\n  if (typeof ymaps3 !== \"undefined\") return;\n  return new Promise((resolve, reject) => {\n    if (typeof ymaps3 === \"undefined\") {\n      let timeout;\n      if (VueYandexMaps.settings.value.mapsScriptWaitDuration !== false) {\n        timeout = setTimeout(() => {\n          timeoutCallback == null ? void 0 : timeoutCallback(timeout, true);\n          reject(new VueYandexMaps.YandexMapException(\"Was not able to wait for map initialization in waitTillYmapInit. Ensure that map was initialized. You can change this behaviour by using mapsScriptWaitDuration.\"));\n        }, typeof VueYandexMaps.settings.value.mapsScriptWaitDuration === \"number\" ? VueYandexMaps.settings.value.mapsScriptWaitDuration : 5e3);\n        timeoutCallback == null ? void 0 : timeoutCallback(timeout, false);\n      }\n      watch(VueYandexMaps.isLoaded, () => {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeoutCallback == null ? void 0 : timeoutCallback(timeout, true);\n        }\n        if (VueYandexMaps.loadStatus.value === \"loaded\") {\n          resolve();\n        } else {\n          reject(VueYandexMaps.loadError);\n        }\n      }, {\n        immediate: true\n      });\n    } else {\n      resolve();\n    }\n  });\n}\nfunction waitTillMapInit({\n  map: _map,\n  timeoutCallback\n} = {}) {\n  if (!_map && !getCurrentInstance()) {\n    throwException({\n      text: \"onMapInit must be only called on runtime.\",\n      isInternal: true\n    });\n  }\n  if (typeof window === \"undefined\") {\n    throwException({\n      text: \"waitTillMapInit cannot be called on SSR.\",\n      isInternal: true\n    });\n  }\n  const map = _map || injectMap();\n  if (map.value) return;\n  return new Promise((resolve, reject) => {\n    let timeout;\n    if (VueYandexMaps.settings.value.mapsRenderWaitDuration !== false) {\n      timeout = setTimeout(() => {\n        timeoutCallback == null ? void 0 : timeoutCallback(timeout, true);\n        reject(new VueYandexMaps.YandexMapException(\"Was not able to wait for map initialization in waitTillMapInit. You can change this behaviour by using mapsRenderWaitDuration.\"));\n      }, typeof VueYandexMaps.settings.value.mapsRenderWaitDuration === \"number\" ? VueYandexMaps.settings.value.mapsRenderWaitDuration : 5e3);\n      timeoutCallback == null ? void 0 : timeoutCallback(timeout, false);\n    }\n    let watcher;\n    watcher = watch(map, () => {\n      if (map.value) {\n        watcher == null ? void 0 : watcher();\n        if (timeout) {\n          clearTimeout(timeout);\n          timeoutCallback == null ? void 0 : timeoutCallback(timeout, true);\n        }\n        resolve();\n      }\n    }, {\n      immediate: true\n    });\n  });\n}\nfunction deleteMapChild({\n  children,\n  isMercator,\n  root\n}) {\n  var _a;\n  if (!root) {\n    throwException({\n      text: \"Failed to execute deleteMapChild due to destroyed root\",\n      isInternal: true\n    });\n  }\n  if (children && !isMercator) {\n    if (typeof (root == null ? void 0 : root.value) === \"object\" && Array.isArray(root.value)) {\n      root.value = root.value.filter(x => x !== children);\n    } else {\n      (_a = root.value) == null ? void 0 : _a.removeChild(children);\n    }\n  } else if (root.value && children && isMercator && \"update\" in root.value) {\n    root.value.update({\n      projection: void 0\n    });\n  }\n}\nasync function setupMapChildren({\n  returnOnly,\n  willDeleteByHand,\n  strictMapRoot,\n  requiredImport,\n  createFunction,\n  settings,\n  settingsUpdateIgnoreKeys,\n  isLayer,\n  isMercator,\n  isMapRoot,\n  mapRootRef,\n  duplicateInit\n}) {\n  if (!getCurrentInstance()) {\n    throwException({\n      text: \"setupMapChildren must be only called on runtime.\",\n      isInternal: true\n    });\n  }\n  const children = shallowRef();\n  const mapRoot = inject(\"mapRoot\", null);\n  const initPromises = inject(\"mapRootInitPromises\", null);\n  let childrenPromises;\n  const map = injectMap();\n  const layers = injectLayers();\n  let timeouts = null;\n  const timeoutCallback = (timeout, isDelete) => {\n    if (!timeouts) timeouts = /* @__PURE__ */new Set();\n    if (!isDelete) timeouts.add(timeout);else timeouts.delete(timeout);\n  };\n  if (isMapRoot && !duplicateInit) {\n    provide(\"mapRoot\", mapRootRef || children);\n    childrenPromises = shallowRef([]);\n    provide(\"mapRootInitPromises\", childrenPromises);\n  }\n  if (!returnOnly && !willDeleteByHand) {\n    onBeforeUnmount(() => {\n      if (children.value) {\n        deleteMapChild({\n          children: children.value,\n          isMercator,\n          root: (mapRoot == null ? void 0 : mapRoot.value) ? mapRoot : map\n        });\n      }\n      if (timeouts == null ? void 0 : timeouts.size) {\n        timeouts.forEach(timeout => clearTimeout(timeout));\n        timeouts.clear();\n      }\n    });\n  }\n  if (settings) {\n    let lastSettings = copy(toRaw(settings.value));\n    watch(settings, value => {\n      if (!value) return;\n      const settingsDiff = Object.keys(diff(lastSettings, value));\n      if (settingsDiff.length === 0) return;\n      const updatedSettings = {\n        ...value\n      };\n      for (const key in updatedSettings) {\n        if (!settingsDiff.includes(key)) delete updatedSettings[key];\n      }\n      const ignoreKeys = settingsUpdateIgnoreKeys && (isRef(settingsUpdateIgnoreKeys) ? settingsUpdateIgnoreKeys.value : settingsUpdateIgnoreKeys);\n      if (ignoreKeys) excludeKeys(updatedSettings, ignoreKeys);\n      if (Object.keys(updatedSettings).length === 0) return;\n      lastSettings = toRaw(copy(value));\n      if (children.value && \"update\" in children.value) children.value.update(updatedSettings);\n    }, {\n      deep: true\n    });\n  }\n  if (!isLayer && !isMercator) {\n    await waitTillMapInit({\n      timeoutCallback\n    });\n    if (!map.value) {\n      throwException({\n        text: \"map is undefined in setupMapChildren.\",\n        isInternal: true\n      });\n    }\n  } else {\n    await waitTillYmapInit({\n      timeoutCallback\n    });\n  }\n  if (strictMapRoot) {\n    if (!(mapRoot == null ? void 0 : mapRoot.value)) await nextTick();\n    if (!(mapRoot == null ? void 0 : mapRoot.value)) {\n      throwException({\n        text: \"mapRoot is undefined in setupMapChildren.\",\n        isInternal: true\n      });\n    }\n  }\n  if (isMapRoot) {\n    await nextTick();\n    await Promise.all((childrenPromises == null ? void 0 : childrenPromises.value) || []);\n  }\n  let importData;\n  if (requiredImport) {\n    const importPromise = requiredImport();\n    if (initPromises == null ? void 0 : initPromises.value) initPromises.value.push(Promise.resolve(importPromise));\n    importData = await importPromise;\n  }\n  children.value = createFunction(importData);\n  if (!returnOnly && map.value && !isMercator) {\n    if (initPromises == null ? void 0 : initPromises.value) {\n      await Promise.all(initPromises.value);\n      if (!requiredImport) await nextTick();\n    }\n    if (typeof (mapRoot == null ? void 0 : mapRoot.value) === \"object\" && Array.isArray(mapRoot.value)) {\n      mapRoot.value = [...mapRoot.value, children.value];\n    } else {\n      ((mapRoot == null ? void 0 : mapRoot.value) || map.value).addChild(children.value);\n    }\n  } else if (isLayer) {\n    layers.value.push(children.value);\n  } else if (isMercator && map.value) {\n    map.value.update({\n      projection: children.value\n    });\n  }\n  return children.value;\n}\nconst _sfc_main$l = defineComponent({\n  name: \"YandexMapListener\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapListener;\n    onMounted(async () => {\n      mapListener = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapListener(props.settings || {}),\n        settings: computed(() => props.settings)\n      });\n      emit(\"input\", mapListener);\n      emit(\"update:modelValue\", mapListener);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$k = defineComponent({\n  name: \"YandexMapDefaultFeaturesLayer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapLayer;\n    onMounted(async () => {\n      mapLayer = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapDefaultFeaturesLayer(props.settings || {}),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapLayer);\n      emit(\"update:modelValue\", mapLayer);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$j = defineComponent({\n  name: \"YandexMapDefaultSchemeLayer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  slots: Object,\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapLayer;\n    onMounted(async () => {\n      mapLayer = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapDefaultSchemeLayer(props.settings || {}),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapLayer);\n      emit(\"update:modelValue\", mapLayer);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$i = defineComponent({\n  name: \"YandexMapDefaultSatelliteLayer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapLayer;\n    onMounted(async () => {\n      mapLayer = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapDefaultSatelliteLayer(props.settings || {}),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapLayer);\n      emit(\"update:modelValue\", mapLayer);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$h = defineComponent({\n  name: \"YandexMapTileDataSource\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapChildren;\n    onMounted(async () => {\n      if (!props.settings.id) {\n        throwException({\n          text: \"You must specify id in YandexMapTileDataSource settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapTileDataSource(props.settings),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$g = defineComponent({\n  name: \"YandexMapFeatureDataSource\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapChildren;\n    onMounted(async () => {\n      if (!props.settings.id) {\n        throwException({\n          text: \"You must specify id in YandexMapFeatureDataSource settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapFeatureDataSource(props.settings),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$f = defineComponent({\n  name: \"YandexMapLayer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapLayer;\n    onMounted(async () => {\n      if (!props.settings.type) {\n        throwException({\n          text: \"You must specify type in YandexMapLayer settings\"\n        });\n      }\n      mapLayer = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapLayer(props.settings || {}),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapLayer);\n      emit(\"update:modelValue\", mapLayer);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nfunction getMarkerContainerProps({\n  position,\n  containerAttrs,\n  wrapperAttrs,\n  zeroSizes\n}) {\n  const root = {\n    class: [\"__ymap-marker\"],\n    style: {}\n  };\n  const children = {\n    class: [\"__ymap-marker_wrapper\"],\n    style: {}\n  };\n  const isDefaultPosition = position === \"default\" || position === \"default default\";\n  if (position && !isDefaultPosition) {\n    if (position.startsWith(\"translate\")) {\n      children.style.transform = position;\n    } else {\n      let translateX = 0;\n      let translateY = 0;\n      const splitted = position.split(\" \");\n      for (let i = 0; i < splitted.length; i++) {\n        let local = 0;\n        const item = splitted[i];\n        switch (item) {\n          case \"top\":\n          case \"left\":\n            local = -100;\n            break;\n          case \"top-center\":\n          case \"left-center\":\n            local = -50;\n            break;\n          case \"bottom\":\n          case \"right\":\n            local = 100;\n            break;\n          case \"bottom-center\":\n          case \"right-center\":\n            local = 50;\n            break;\n          default:\n            local = 0;\n        }\n        if (item.startsWith(\"left\") || item.startsWith(\"right\")) translateX = local;else translateY = local;\n      }\n      children.style.transform = `translate(${translateX}%, ${translateY}%)`;\n    }\n  }\n  if (zeroSizes === true || zeroSizes !== false && position && !isDefaultPosition) {\n    root.style.width = \"0\";\n    root.style.height = \"0\";\n    if (children.style.transform) children.style.width = \"fit-content\";\n  }\n  const attrs = {\n    root: {\n      ...(containerAttrs ?? {})\n    },\n    children: {\n      ...(wrapperAttrs ?? {})\n    }\n  };\n  for (const [key, value] of Object.entries(attrs)) {\n    const obj = key === \"root\" ? root : children;\n    if (value.class) {\n      if (!Array.isArray(value.class)) value.class = [value.class];\n      value.class = [...obj.class, ...value.class];\n    }\n    if (value == null ? void 0 : value.style) {\n      if (typeof value.style !== \"object\" || Array.isArray(value.style)) {\n        console.warn(`Style property was given in ${key} of marker, but it is not an object. Style of this prop can only be an object, therefore it was ignored.`);\n      } else {\n        value.style = {\n          ...obj.style,\n          ...value.style\n        };\n      }\n    }\n    Object.assign(obj, value);\n  }\n  return {\n    root,\n    children\n  };\n}\nfunction excludeYandexMarkerProps(props) {\n  props = {\n    ...props\n  };\n  const toExclude = {\n    position: true,\n    containerAttrs: true,\n    wrapperAttrs: true,\n    zeroSizes: true\n  };\n  for (const excluded in toExclude) {\n    if (excluded in props) delete props[excluded];\n  }\n  return props;\n}\nconst _sfc_main$e = defineComponent({\n  name: \"YandexMapMarker\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    },\n    /**\n     * @description Sets translate(%, %) to marker to align it properly.\n     *\n     * If you want to make aligment to be like Yandex Maps 2.0, set this property to \"top left-center\".\n     * @default default (as goes in Yandex by default)\n     */\n    position: {\n      type: String\n    },\n    /**\n     * @description Allows you to add any attributes to <div class=\"__ymap-marker\"> container.\n     *\n     * Important: to pass styles, you must use object-style prop instead of string.\n     */\n    containerAttrs: {\n      type: Object,\n      default: () => ({})\n    },\n    /**\n     * @description Allows you to add any attributes to <div class=\"__ymap-marker_wrapper\"> container.\n     *\n     * Important: to pass styles, you must use object-style prop instead of string.\n     */\n    wrapperAttrs: {\n      type: Object,\n      default: () => ({})\n    },\n    /**\n     * @description Will add width and height: 0 to container.\n     *\n     * Null enables default behaviour, false disables it completely (even if position is specified).\n     *\n     * @default true if position is specified, false otherwise\n     */\n    zeroSizes: {\n      type: Boolean,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = ref(null);\n    onMounted(async () => {\n      if (!props.settings.coordinates) {\n        throwException({\n          text: \"You must specify coordinates in YandexMapMarker settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        settings: computed(() => props.settings),\n        createFunction: () => new ymaps3.YMapMarker(props.settings, element.value)\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    watch(element, () => {\n      var _a;\n      if (element.value) (_a = element.value.parentNode) == null ? void 0 : _a.removeChild(element.value);\n    });\n    const rootProps = computed(() => getMarkerContainerProps({\n      position: props.position,\n      containerAttrs: props.containerAttrs,\n      wrapperAttrs: props.wrapperAttrs,\n      zeroSizes: props.zeroSizes\n    }));\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ...rootProps.value.root,\n        ref: element\n      }, [h(\"div\", {\n        ...rootProps.value.children\n      }, (_a = slots.default) == null ? void 0 : _a.call(slots, {}))]);\n    };\n  }\n});\nconst _sfc_main$d = defineComponent({\n  name: \"YandexMapDefaultMarker\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const popup = ref(null);\n    const closeFunc = ref(() => {});\n    const contentFunc = close => {\n      closeFunc.value = close;\n      return popup.value;\n    };\n    const getSettings = computed(() => {\n      const settings = {\n        ...props.settings\n      };\n      if (settings.popup && (typeof settings.popup.content === \"undefined\" || settings.popup.content === \"fromSlot\") && popup.value) {\n        settings.popup = {\n          ...settings.popup,\n          content: contentFunc\n        };\n      }\n      return settings;\n    });\n    onMounted(async () => {\n      if (!props.settings.coordinates) {\n        throwException({\n          text: \"You must specify coordinates in YandexMapDefaultMarker settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        createFunction: ({\n          YMapDefaultMarker: Marker\n        }) => new Marker(getSettings.value),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-markers@0.0.1\"),\n        settings: getSettings\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    watch(popup, () => {\n      var _a;\n      if (popup.value) (_a = popup.value.parentNode) == null ? void 0 : _a.removeChild(popup.value);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: popup\n      }, (_a = slots.popup) == null ? void 0 : _a.call(slots, {\n        close: closeFunc.value\n      }));\n    };\n  }\n});\nconst _sfc_main$c = defineComponent({\n  name: \"YandexMapFeature\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    onMounted(async () => {\n      if (!props.settings.geometry) {\n        throwException({\n          text: \"You must specify geometry in YandexMapFeature settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapFeature(props.settings),\n        settings: computed(() => props.settings)\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$b = defineComponent({\n  name: \"YandexMapControls\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const mapChildren = shallowRef(null);\n    onMounted(async () => {\n      if (!props.settings.position) {\n        throwException({\n          text: \"You must specify position in YandexMapControls settings\"\n        });\n      }\n      mapChildren.value = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapControls(props.settings),\n        isMapRoot: true,\n        settings: computed(() => props.settings)\n      });\n      emit(\"input\", mapChildren.value);\n      emit(\"update:modelValue\", mapChildren.value);\n    });\n    return () => {\n      var _a;\n      return mapChildren.value ? h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {})) : h(\"div\");\n    };\n  }\n});\nconst _sfc_main$a = defineComponent({\n  name: \"YandexMapControl\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = ref(null);\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: () => {\n          const control = new ymaps3.YMapControl();\n          class YMapSomeController extends ymaps3.YMapEntity {\n            _onAttach() {\n              this._element = element.value;\n              this._detachDom = ymaps3.useDomContext(this, this._element);\n            }\n            _onDetach() {\n              this._detachDom();\n              this._detachDom = null;\n              this._element = null;\n            }\n          }\n          control.addChild(new YMapSomeController({}));\n          return control;\n        },\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: element\n      }, (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$9 = defineComponent({\n  name: \"YandexMapControlButton\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = ref(null);\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapControlButton({\n          ...props.settings,\n          element: element.value\n        }),\n        settings: computed(() => ({\n          ...props.settings,\n          element: element.value\n        })),\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: element\n      }, (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$8 = defineComponent({\n  name: \"YandexMapGeolocationControl\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: controls => new controls.YMapGeolocationControl(props.settings),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-controls@0.0.1\"),\n        settings: computed(() => props.settings),\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$7 = defineComponent({\n  name: \"YandexMapZoomControl\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  slots: Object,\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: controls => new controls.YMapZoomControl(props.settings),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-controls@0.0.1\"),\n        settings: computed(() => props.settings),\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$6 = defineComponent({\n  name: \"YandexMapCartesianProjection\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    bounds: {\n      type: Array,\n      required: true\n    },\n    cycled: {\n      type: Array\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    const projection = inject(\"projection\");\n    onMounted(async () => {\n      if (!projection) return;\n      const cartesian = await setupMapChildren({\n        isMercator: true,\n        createFunction: ({\n          Cartesian: CartesianClass\n        }) => new CartesianClass(props.bounds, props.cycled),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-cartesian-projection@0.0.1\")\n      });\n      projection.value = cartesian;\n      emit(\"input\", cartesian);\n      emit(\"update:modelValue\", cartesian);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$5 = defineComponent({\n  name: \"YandexMapSphericalMercatorProjection\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    const projection = inject(\"projection\");\n    onMounted(async () => {\n      if (!projection) {\n        hold.value--;\n        return;\n      }\n      const mercator = await setupMapChildren({\n        isMercator: true,\n        createFunction: ({\n          SphericalMercator: Mercator\n        }) => new Mercator(),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-spherical-mercator-projection@0.0.1\")\n      });\n      projection.value = mercator;\n      emit(\"input\", mercator);\n      emit(\"update:modelValue\", mercator);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$4 = defineComponent({\n  name: \"YandexMapHint\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    // Property that you will set on YandexMapMarker or YandexMapFeature to display hint content\n    hintProperty: {\n      type: String,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = shallowRef(null);\n    const hintContent = shallowRef(\"\");\n    onMounted(async () => {\n      await setupMapChildren({\n        createFunction: ({\n          YMapHint: MapHint,\n          YMapHintContext\n        }) => {\n          mapChildren = new MapHint({\n            hint: object => {\n              var _a;\n              return (_a = object == null ? void 0 : object.properties) == null ? void 0 : _a[props.hintProperty];\n            }\n          });\n          class Hint extends ymaps3.YMapEntity {\n            _onAttach() {\n              const e = this;\n              e._element = element.value;\n              e._detachDom = ymaps3.useDomContext(e, e._element, null);\n              e._watchContext(YMapHintContext, () => {\n                var _a;\n                hintContent.value = (_a = e._consumeContext(YMapHintContext)) == null ? void 0 : _a[props.hintProperty];\n              }, {\n                immediate: true\n              });\n            }\n            _onDetach() {\n              this._detachDom();\n            }\n          }\n          mapChildren.addChild(new Hint({}));\n          return mapChildren;\n        },\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-hint@0.0.1\")\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: element\n      }, (_a = slots.default) == null ? void 0 : _a.call(slots, {\n        content: hintContent.value\n      }));\n    };\n  }\n});\nconst _sfc_main$3 = defineComponent({\n  name: \"YandexMapOpenMapsButton\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: ({\n          YMapOpenMapsButton: OpenMapsButton\n        }) => new OpenMapsButton(props.settings),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-controls-extra\"),\n        settings: computed(() => props.settings),\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$2 = defineComponent({\n  name: \"YandexMapClusterer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    },\n    /**\n     * @description All custom (non-settings) props are also supported\n     */\n    clusterMarkerProps: {\n      type: Object,\n      default: () => ({})\n    },\n    /**\n     * @description Size of the grid division in pixels\n     *\n     * Used in settings.method via Yandex clusterByGrid method\n     *\n     * @see https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/clusterer/\n     * @see https://yandex.ru/dev/jsapi30/doc/en/ref/packages/clusterer/\n     */\n    gridSize: {\n      type: Number,\n      default: 64\n    },\n    /**\n     * @description Zooms to bounds of features of cluster\n     */\n    zoomOnClusterClick: {\n      type: [Boolean, Object],\n      default: false\n    }\n  },\n  slots: Object,\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    // Exact features bounds returned on cluster click\n    trueBounds(bounds) {\n      return bounds.length === 2;\n    },\n    // Auto-corrected features bounds returned on cluster click\n    updatedBounds(bounds) {\n      return bounds.length === 2;\n    }\n  },\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const map = injectMap();\n    const mapChildren = shallowRef(null);\n    const entities = shallowRef([]);\n    const clusterFeatures = ref([]);\n    let _clusterByGrid;\n    const tickTimeout = computed(() => props.settings.tickTimeout ?? 200);\n    const getSettings = computed(() => {\n      const settings = {\n        ...props.settings\n      };\n      if (!settings.method && _clusterByGrid) settings.method = _clusterByGrid == null ? void 0 : _clusterByGrid({\n        gridSize: props.gridSize\n      });\n      settings.tickTimeout = tickTimeout.value;\n      const marker = feature => {\n        const entity = entities.value.find(x => x._props.id === feature.id);\n        if (!entity) {\n          throwException({\n            text: `No entity with id ${feature.id} (coordinates: ${feature.geometry.coordinates.join(\", \")}) were found in YandexMapClusterer.`,\n            isInternal: true,\n            warn: true\n          });\n          return new ymaps3.YMapMarker({\n            coordinates: feature.geometry.coordinates\n          });\n        }\n        return entity;\n      };\n      const cluster = coordinates => {\n        const foundCluster = clusterFeatures.value.find(x => JSON.stringify(x.clusterer.lnglat) === JSON.stringify(coordinates));\n        if (!foundCluster) {\n          throwException({\n            text: `No element with coordinates of ${coordinates.join(\", \")} were found in YandexMapClusterer.`,\n            isInternal: true,\n            warn: true\n          });\n          return new ymaps3.YMapMarker({\n            coordinates\n          });\n        }\n        return foundCluster.element;\n      };\n      const features = entities.value.map((entity, i) => {\n        if (!entity._props.id) {\n          entity.update({\n            id: Math.random().toString() + Date.now().toString()\n          });\n        }\n        return {\n          type: \"Feature\",\n          id: entity._props.id,\n          geometry: {\n            type: \"Point\",\n            coordinates: entity._props.coordinates\n          },\n          properties: \"properties\" in entity._props ? entity._props.properties : {}\n        };\n      });\n      settings.onRender = clustersList => {\n        clusterFeatures.value = clustersList.map(clusterer => {\n          var _a;\n          return {\n            clusterer,\n            element: ((_a = clusterFeatures.value.find(x => x.clusterer.clusterId === clusterer.clusterId)) == null ? void 0 : _a.element) || new ymaps3.YMapCollection({})\n          };\n        });\n        if (props.settings.onRender) return props.settings.onRender(clustersList);\n      };\n      return {\n        ...settings,\n        marker,\n        features,\n        cluster\n      };\n    });\n    const update = async () => {\n      var _a, _b;\n      await nextTick();\n      (_a = mapChildren.value) == null ? void 0 : _a.update(getSettings.value);\n      (_b = mapChildren.value) == null ? void 0 : _b._render();\n      setTimeout(() => {\n        var _a2;\n        return (_a2 = mapChildren.value) == null ? void 0 : _a2._render();\n      }, tickTimeout.value);\n    };\n    watch(() => [props.settings, props.gridSize], () => {\n      update();\n    }, {\n      deep: true\n    });\n    const init = async () => {\n      mapChildren.value = await setupMapChildren({\n        createFunction: ({\n          YMapClusterer: Clusterer,\n          clusterByGrid: _clusterByGrid_\n        }) => {\n          _clusterByGrid = _clusterByGrid_;\n          return new Clusterer(getSettings.value);\n        },\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-clusterer@0.0.1\"),\n        isMapRoot: true,\n        mapRootRef: entities\n      });\n      emit(\"input\", mapChildren.value);\n      emit(\"update:modelValue\", mapChildren.value);\n    };\n    watch(entities, async () => {\n      await nextTick();\n      update();\n    });\n    onMounted(() => {\n      init();\n    });\n    return () => {\n      var _a, _b, _c, _d, _e;\n      if (!mapChildren.value) return h(\"div\");\n      const features = clusterFeatures.value.filter(x => x.clusterer.features.length > 1);\n      const containerProps = getMarkerContainerProps({\n        position: ((_a = props.clusterMarkerProps) == null ? void 0 : _a.position) ?? \"top-center left-center\",\n        containerAttrs: (_b = props.clusterMarkerProps) == null ? void 0 : _b.containerAttrs,\n        wrapperAttrs: (_c = props.clusterMarkerProps) == null ? void 0 : _c.wrapperAttrs,\n        zeroSizes: (_d = props.clusterMarkerProps) == null ? void 0 : _d.zeroSizes\n      });\n      const clusterSlots = features.map(({\n        clusterer,\n        element\n      }, index) => {\n        var _a2;\n        return h(\"div\", {\n          ...containerProps.root,\n          key: `${clusterer.clusterId}_${index}_${clusterer.features.length}_${clusterer.lnglat.join(\",\")}`,\n          ref: async item => {\n            if (!item) return;\n            await nextTick();\n            try {\n              element.children.forEach(x => element.removeChild(x));\n              element.addChild(new ymaps3.YMapMarker({\n                ...excludeYandexMarkerProps(props.clusterMarkerProps),\n                coordinates: clusterer.lnglat,\n                onClick: async e => {\n                  var _a3, _b2, _c2, _d2;\n                  (_b2 = (_a3 = props.clusterMarkerProps).onClick) == null ? void 0 : _b2.call(_a3, e);\n                  if (clusterer.features.length >= 2) {\n                    const {\n                      minLongitude,\n                      minLatitude,\n                      maxLongitude,\n                      maxLatitude\n                    } = clusterer.features.map(x => x.geometry.coordinates).reduce((acc, [longitude, latitude]) => ({\n                      minLongitude: Math.min(acc.minLongitude, longitude),\n                      minLatitude: Math.min(acc.minLatitude, latitude),\n                      maxLongitude: Math.max(acc.maxLongitude, longitude),\n                      maxLatitude: Math.max(acc.maxLatitude, latitude)\n                    }), {\n                      minLongitude: Infinity,\n                      minLatitude: Infinity,\n                      maxLongitude: -Infinity,\n                      maxLatitude: -Infinity\n                    });\n                    const settings = typeof props.zoomOnClusterClick === \"object\" ? props.zoomOnClusterClick : {};\n                    const bounds = [[minLongitude, maxLatitude], [maxLongitude, minLatitude]];\n                    emit(\"trueBounds\", bounds);\n                    if (!props.zoomOnClusterClick) return;\n                    const defaultDuration = settings.duration ?? 500;\n                    if (settings.strategy === \"boundsCorrect\") {\n                      const latDiff = maxLatitude - minLatitude;\n                      const longDiff = maxLongitude - minLongitude;\n                      const updatedBounds = [[minLongitude - longDiff, maxLatitude - latDiff], [maxLongitude + longDiff, minLatitude + latDiff]];\n                      emit(\"updatedBounds\", updatedBounds);\n                      (_c2 = map.value) == null ? void 0 : _c2.setLocation({\n                        bounds: updatedBounds,\n                        duration: defaultDuration,\n                        easing: settings.easing\n                      });\n                    } else {\n                      let {\n                        center,\n                        zoom\n                      } = await useYMapsLocationFromBounds({\n                        bounds,\n                        map: map.value\n                      });\n                      const originalZoom = zoom;\n                      zoom = Math.floor(zoom);\n                      const diff2 = originalZoom - zoom;\n                      if (!settings.disableMinimalZoomCorrectDiff && diff2 < 0.5) {\n                        zoom -= 1;\n                      }\n                      (_d2 = map.value) == null ? void 0 : _d2.setLocation({\n                        center,\n                        zoom,\n                        duration: defaultDuration,\n                        easing: settings.easing\n                      });\n                      await sleep(defaultDuration + 50);\n                      if (map.value) emit(\"updatedBounds\", map.value.bounds);\n                    }\n                  }\n                }\n              }, item));\n            } catch (e) {\n              console.error(e);\n            }\n          },\n          attrs: {\n            coordinates: JSON.stringify(clusterer.lnglat)\n          },\n          // @ts-ignore\n          coordinates: JSON.stringify(clusterer.lnglat)\n        }, [h(\"div\", {\n          ...containerProps.children\n        }, (_a2 = slots.cluster) == null ? void 0 : _a2.call(slots, {\n          clusterer,\n          coordinates: clusterer.lnglat,\n          length: clusterer.features.length\n        }))]);\n      });\n      return h(\"div\", [...(((_e = slots.default) == null ? void 0 : _e.call(slots, {})) || []), h(\"div\", {\n        key: features.map(x => x.clusterer.clusterId).join(\",\")\n      }, [clusterSlots])]);\n    };\n  }\n});\nconst _sfc_main$1 = defineComponent({\n  name: \"YandexMapCollection\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const mapChildren = shallowRef(null);\n    onMounted(async () => {\n      mapChildren.value = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapCollection({}),\n        isMapRoot: true\n      });\n      emit(\"input\", mapChildren.value);\n      emit(\"update:modelValue\", mapChildren.value);\n    });\n    return () => {\n      var _a;\n      if (!mapChildren.value) return h(\"div\");\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main = defineComponent({\n  name: \"YandexMapEntity\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = ref(null);\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: () => {\n          class Entity extends ymaps3.YMapEntity {\n            _onAttach() {\n              this._element = element.value;\n              this._detachDom = ymaps3.useDomContext(this, this._element);\n            }\n            _onDetach() {\n              this._detachDom();\n              this._detachDom = null;\n              this._element = null;\n            }\n          }\n          return new Entity({});\n        }\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: element\n      }, (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nexport { VueYandexMaps, _sfc_main$m as YandexMap, _sfc_main$6 as YandexMapCartesianProjection, _sfc_main$2 as YandexMapClusterer, _sfc_main$1 as YandexMapCollection, _sfc_main$a as YandexMapControl, _sfc_main$9 as YandexMapControlButton, _sfc_main$b as YandexMapControls, _sfc_main$k as YandexMapDefaultFeaturesLayer, _sfc_main$d as YandexMapDefaultMarker, _sfc_main$i as YandexMapDefaultSatelliteLayer, _sfc_main$j as YandexMapDefaultSchemeLayer, _sfc_main as YandexMapEntity, _sfc_main$c as YandexMapFeature, _sfc_main$g as YandexMapFeatureDataSource, _sfc_main$8 as YandexMapGeolocationControl, _sfc_main$4 as YandexMapHint, _sfc_main$f as YandexMapLayer, _sfc_main$l as YandexMapListener, _sfc_main$e as YandexMapMarker, _sfc_main$3 as YandexMapOpenMapsButton, _sfc_main$5 as YandexMapSphericalMercatorProjection, _sfc_main$h as YandexMapTileDataSource, _sfc_main$7 as YandexMapZoomControl, createYmaps, createYmapsOptions, createYmapsVue2, initYmaps, useYMapsLocationFromBounds };","map":{"version":3,"names":["t","throwException","g","getException","c","createYmapsOptions","V","VueYandexMaps","i","initYmaps","a","copy","e","excludeKeys","s","sleep","defineComponent","shallowRef","ref","provide","computed","onMounted","nextTick","watch","onBeforeUnmount","h","toRaw","getCurrentInstance","inject","isRef","applyModifier","coords","modifier","result","x","y","applyFunctionModifier","functionModifier","worldToPixels","convertWorldCoordinates","projection","coordinates","worldCoordinates","toWorldCoordinates","pixelsToWorld","findNeededValue","Math","max","min","worldCoordsFromModifier","resultCoords","value","fromWorldCoordinates","convertBounds","bounds","topLeft","bottomRight","modified","updatedBounds","applyMarginToCoords","margin","findZoom","isSnap","zoomRange","topLeftFirst","topLeftSecond","bottomRightFirst","bottomRightSecond","firstCalc","abs","secondCalc","zoom","log2","floor","findCenter","useYMapsLocationFromBounds","map","_a","ctxMap","Object","keys","find","endsWith","text","isInternal","ctx","ctxItem","Promise","resolve","reject","forEach","item","name","ctxItemMapKey","ctxItemMap","boundsFunc","setBounds","toString","funcKey","split","size","effectiveZoomRounding","center","createYmaps","settings","install","app","createYmapsVue2","Vue","isDate","d","Date","isEmpty","o","length","isObject","hasOwnProperty","args","prototype","call","isEmptyObject","makeObjectWithoutPrototype","create","diff","lhs","rhs","deletedValues","reduce","acc","key","valueOf","difference","_sfc_main$m","props","modelValue","type","default","tag","String","width","height","zIndex","Number","required","readonlySettings","Boolean","realSettingsLocation","layers","Array","cursorGrab","emits","input","ymaps3","YMap","update:modelValue","slots","setup","emit","ymapContainer","mounted","grabbing","needsToHold","getSettings","init","location","container","destroy","createdMap","isLoaded","initializeOn","console","error","immediate","listener","setupWatcher","JSON","parse","stringify","val","rawVal","clonedSettings","settingsDiff","updatedSettings","includes","update","deep","YMapListener","onActionStart","onActionEnd","addChild","removeChild","mapNodeProps","class","style","containerNode","slotsNodeProps","display","injectMap","injectLayers","waitTillYmapInit","timeoutCallback","window","timeout","mapsScriptWaitDuration","setTimeout","YandexMapException","clearTimeout","loadStatus","loadError","waitTillMapInit","_map","mapsRenderWaitDuration","watcher","deleteMapChild","children","isMercator","root","isArray","filter","setupMapChildren","returnOnly","willDeleteByHand","strictMapRoot","requiredImport","createFunction","settingsUpdateIgnoreKeys","isLayer","isMapRoot","mapRootRef","duplicateInit","mapRoot","initPromises","childrenPromises","timeouts","isDelete","Set","add","delete","clear","lastSettings","ignoreKeys","all","importData","importPromise","push","_sfc_main$l","mapListener","_sfc_main$k","hold","status","mapLayer","YMapDefaultFeaturesLayer","_sfc_main$j","YMapDefaultSchemeLayer","_sfc_main$i","YMapDefaultSatelliteLayer","_sfc_main$h","mapChildren","id","YMapTileDataSource","_sfc_main$g","YMapFeatureDataSource","_sfc_main$f","YMapLayer","getMarkerContainerProps","position","containerAttrs","wrapperAttrs","zeroSizes","isDefaultPosition","startsWith","transform","translateX","translateY","splitted","local","attrs","entries","obj","warn","assign","excludeYandexMarkerProps","toExclude","excluded","_sfc_main$e","element","YMapMarker","parentNode","rootProps","_sfc_main$d","popup","closeFunc","contentFunc","close","content","YMapDefaultMarker","Marker","import","_sfc_main$c","geometry","YMapFeature","_sfc_main$b","YMapControls","_sfc_main$a","control","YMapControl","YMapSomeController","YMapEntity","_onAttach","_element","_detachDom","useDomContext","_onDetach","_sfc_main$9","YMapControlButton","_sfc_main$8","controls","YMapGeolocationControl","_sfc_main$7","YMapZoomControl","_sfc_main$6","cycled","cartesian","Cartesian","CartesianClass","_sfc_main$5","mercator","SphericalMercator","Mercator","_sfc_main$4","hintProperty","hintContent","YMapHint","MapHint","YMapHintContext","hint","object","properties","Hint","_watchContext","_consumeContext","_sfc_main$3","YMapOpenMapsButton","OpenMapsButton","_sfc_main$2","clusterMarkerProps","gridSize","zoomOnClusterClick","trueBounds","entities","clusterFeatures","_clusterByGrid","tickTimeout","method","marker","feature","entity","_props","join","cluster","foundCluster","clusterer","lnglat","features","random","now","onRender","clustersList","clusterId","YMapCollection","_b","_render","_a2","YMapClusterer","Clusterer","clusterByGrid","_clusterByGrid_","_c","_d","_e","containerProps","clusterSlots","index","onClick","_a3","_b2","_c2","_d2","minLongitude","minLatitude","maxLongitude","maxLatitude","longitude","latitude","Infinity","defaultDuration","duration","strategy","latDiff","longDiff","setLocation","easing","originalZoom","diff2","disableMinimalZoomCorrectDiff","_sfc_main$1","_sfc_main","Entity","YandexMap","YandexMapCartesianProjection","YandexMapClusterer","YandexMapCollection","YandexMapControl","YandexMapControlButton","YandexMapControls","YandexMapDefaultFeaturesLayer","YandexMapDefaultMarker","YandexMapDefaultSatelliteLayer","YandexMapDefaultSchemeLayer","YandexMapEntity","YandexMapFeature","YandexMapFeatureDataSource","YandexMapGeolocationControl","YandexMapHint","YandexMapLayer","YandexMapListener","YandexMapMarker","YandexMapOpenMapsButton","YandexMapSphericalMercatorProjection","YandexMapTileDataSource","YandexMapZoomControl"],"sources":["C:/gitPages/rol-shop/node_modules/vue-yandex-maps/dist/vue-yandex-maps.js"],"sourcesContent":["import \"./vue-yandex-maps.css\";\nimport { t as throwException, g as getException, c as createYmapsOptions, V as VueYandexMaps, i as initYmaps, a as copy, e as excludeKeys, s as sleep } from \"./vue-yandex-maps-fHw_W40B.js\";\nimport { defineComponent, shallowRef, ref, provide, computed, onMounted, nextTick, watch, onBeforeUnmount, h, toRaw, getCurrentInstance, inject, isRef } from \"vue\";\nfunction applyModifier(coords, modifier) {\n  const result = {\n    x: 0,\n    y: 0\n  };\n  result.x = coords.x * modifier;\n  result.y = coords.y * modifier;\n  return result;\n}\nfunction applyFunctionModifier(coords, functionModifier) {\n  const result = {\n    x: 0,\n    y: 0\n  };\n  result.x = functionModifier(coords.x, 1);\n  result.y = functionModifier(coords.y, 2);\n  return result;\n}\nfunction worldToPixels(coords, modifier) {\n  const i = 2 ** modifier / 2 * 256;\n  return applyModifier({\n    x: coords.x + 1,\n    y: 1 - coords.y\n  }, i);\n}\nfunction convertWorldCoordinates(projection, coordinates, modifier) {\n  const worldCoordinates = projection.toWorldCoordinates(coordinates);\n  return worldToPixels(worldCoordinates, modifier);\n}\nfunction pixelsToWorld(coords, modifier) {\n  const i = 2 ** modifier / 2 * 256;\n  return {\n    x: coords.x / i - 1,\n    y: 1 - coords.y / i\n  };\n}\nfunction findNeededValue(t, e, i) {\n  return Math.max(Math.min(t, i), e);\n}\nfunction worldCoordsFromModifier(projection, coords, modifier) {\n  const resultCoords = applyFunctionModifier(pixelsToWorld(coords, modifier), (value) => findNeededValue(value, -1, 1 - 1e-15));\n  return projection.fromWorldCoordinates(resultCoords);\n}\nfunction convertBounds(projection, bounds, modifier) {\n  const topLeft = convertWorldCoordinates(projection, bounds[0], modifier);\n  const bottomRight = convertWorldCoordinates(projection, bounds[1], modifier);\n  const modified = 2 ** modifier * 256;\n  const updatedBounds = [[topLeft.x, topLeft.y], [bottomRight.x, bottomRight.y]];\n  if (topLeft.x > bottomRight.x) {\n    updatedBounds[0][0] = topLeft.x;\n    updatedBounds[1][0] = bottomRight.x + modified;\n  }\n  if (topLeft.y > bottomRight.y) {\n    updatedBounds[0][1] = bottomRight.y;\n    updatedBounds[1][1] = topLeft.y;\n  }\n  return updatedBounds;\n}\nfunction applyMarginToCoords(coords, margin) {\n  return {\n    x: Math.max(coords.x - (margin ? margin[1] + margin[3] : 0), 1),\n    y: Math.max(coords.y - (margin ? margin[0] + margin[2] : 0), 1)\n  };\n}\nfunction findZoom(projection, bounds, coords, isSnap, zoomRange) {\n  const [[topLeftFirst, topLeftSecond], [bottomRightFirst, bottomRightSecond]] = convertBounds(projection, bounds, 0);\n  const firstCalc = Math.max(Math.abs(bottomRightFirst - topLeftFirst), 1e-10);\n  const secondCalc = Math.max(Math.abs(bottomRightSecond - topLeftSecond), 1e-10);\n  const zoom = findNeededValue(Math.min(Math.log2(coords.x / firstCalc), Math.log2(coords.y / secondCalc)), zoomRange.min, zoomRange.max);\n  return isSnap ? Math.floor(zoom + 1e-6) : zoom;\n}\nfunction findCenter(projection, bounds, zoom) {\n  const [[topLeftFirst, topLeftSecond], [bottomRightFirst, bottomRightSecond]] = convertBounds(projection, bounds, zoom);\n  return worldCoordsFromModifier(projection, {\n    x: (topLeftFirst + bottomRightFirst) / 2,\n    y: (topLeftSecond + bottomRightSecond) / 2\n  }, zoom);\n}\nasync function useYMapsLocationFromBounds({\n  bounds,\n  map\n}) {\n  var _a;\n  const ctxMap = Object.keys(map).find((x) => x.endsWith(\"CtxMap\"));\n  if (!ctxMap) {\n    throwException({\n      text: \"CtxMap was not found in useYMapsGetCenterAndZoomFromBounds\",\n      isInternal: true\n    });\n  }\n  const ctx = map[ctxMap];\n  const ctxItem = await new Promise((resolve, reject) => {\n    ctx.forEach((item, { name }) => {\n      if (name !== \"map\")\n        return;\n      resolve(item);\n    });\n    reject(getException({\n      text: \"Map item was not found in useYMapsGetCenterAndZoomFromBounds\",\n      isInternal: true\n    }));\n  });\n  const ctxItemMapKey = Object.keys(ctxItem).find((x) => x.endsWith(\"_context\"));\n  if (!ctxItemMapKey) {\n    throwException({\n      text: \"CtxMapKey was not found in useYMapsGetCenterAndZoomFromBounds\",\n      isInternal: true\n    });\n  }\n  const ctxItemMap = ctxItem[ctxItemMapKey].map;\n  const boundsFunc = ctxItemMap.setBounds.toString();\n  const funcKey = (_a = boundsFunc.split(\"const{center:e,zoom:i}=\")[1]) == null ? void 0 : _a.split(\"(\")[0];\n  if (!funcKey) {\n    throwException({\n      text: \"funcKey was not found in useYMapsGetCenterAndZoomFromBounds\",\n      isInternal: true\n    });\n  }\n  const projection = ctxItemMap.projection;\n  const size = ctxItemMap.size;\n  const margin = ctxItemMap.margin;\n  const isSnap = ctxItemMap.effectiveZoomRounding === \"snap\";\n  const zoomRange = ctxItemMap.zoomRange;\n  const zoom = findZoom(projection, bounds, applyMarginToCoords(size, margin), isSnap, zoomRange);\n  return {\n    zoom,\n    center: findCenter(projection, bounds, zoom)\n  };\n}\nfunction createYmaps(settings) {\n  return {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    install(app) {\n      createYmapsOptions(settings);\n    }\n  };\n}\nfunction createYmapsVue2(settings) {\n  return {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    install(Vue) {\n      createYmapsOptions(settings);\n    }\n  };\n}\nconst isDate = (d) => d instanceof Date;\nconst isEmpty = (o) => Object.keys(o).length === 0;\nconst isObject = (o) => o != null && typeof o === \"object\";\nconst hasOwnProperty = (o, ...args) => Object.prototype.hasOwnProperty.call(o, ...args);\nconst isEmptyObject = (o) => isObject(o) && isEmpty(o);\nconst makeObjectWithoutPrototype = () => /* @__PURE__ */ Object.create(null);\nconst diff = (lhs, rhs) => {\n  if (lhs === rhs)\n    return {};\n  if (!isObject(lhs) || !isObject(rhs))\n    return rhs;\n  const deletedValues = Object.keys(lhs).reduce((acc, key) => {\n    if (!hasOwnProperty(rhs, key)) {\n      acc[key] = void 0;\n    }\n    return acc;\n  }, makeObjectWithoutPrototype());\n  if (isDate(lhs) || isDate(rhs)) {\n    if (lhs.valueOf() == rhs.valueOf())\n      return {};\n    return rhs;\n  }\n  return Object.keys(rhs).reduce((acc, key) => {\n    if (!hasOwnProperty(lhs, key)) {\n      acc[key] = rhs[key];\n      return acc;\n    }\n    const difference = diff(lhs[key], rhs[key]);\n    if (isEmptyObject(difference) && !isDate(difference) && (isEmptyObject(lhs[key]) || !isEmptyObject(rhs[key])))\n      return acc;\n    acc[key] = difference;\n    return acc;\n  }, deletedValues);\n};\nconst _sfc_main$m = defineComponent({\n  name: \"YandexMap\",\n  props: {\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    value: {\n      type: Object,\n      default: null\n    },\n    tag: {\n      type: String,\n      default: \"div\"\n    },\n    width: {\n      type: String,\n      default: \"100%\"\n    },\n    height: {\n      type: String,\n      default: \"100%\"\n    },\n    // z-index for Map Container. Without this, elements of the map will be displayed under your site's elements due to high z-index inside of them\n    zIndex: {\n      type: Number,\n      default: 0\n    },\n    /**\n     * @description Settings for cart initialization.,\n     *\n     * You can modify this object or use map methods, such as setLocation/setBehaviors e.t.c.\n     * @see https://yandex.ru/dev/maps/jsapi/doc/3.0/dg/concepts/map.html#map-parms\n     * @see https://yandex.com/dev/maps/jsapi/doc/3.0/dg/concepts/map.html#map-parms\n     */\n    settings: {\n      type: Object,\n      required: true\n    },\n    /**\n     * @description Makes settings readonly. Enable this if reactivity causes problems\n     */\n    readonlySettings: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * @description Always inserts actual user center or bounds (based on your input) on every location change\n     * @note This prop will cause user location change on every settings update (if user did move since last time). Use it with caution.\n     */\n    realSettingsLocation: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * @description You can also add layers through <yandex-*> components\n     *\n     * Modifying this object after mount will cause no effect.\n     *\n     * Instead, please use map methods, such as addChild.\n     * @see https://yandex.ru/dev/maps/jsapi/doc/3.0/dg/concepts/map.html#layers\n     * @see https://yandex.com/dev/maps/jsapi/doc/3.0/dg/concepts/map.html#layers\n     */\n    layers: {\n      type: Array,\n      default: () => []\n    },\n    /**\n     * @description Adds cursor: grab/grabbing to ymaps scheme layer\n     */\n    cursorGrab: {\n      type: Boolean,\n      default: false\n    }\n  },\n  /**\n   * @description Other events are NOT available. You can listen to events via layers prop, addChildren prop or by adding <ymap-listener> as children.\n   * @see https://yandex.ru/dev/maps/jsapi/doc/3.0/dg/concepts/events.html\n   * @see https://yandex.com/dev/maps/jsapi/doc/3.0/dg/concepts/events.html\n   */\n  emits: {\n    \"input\"(map) {\n      return !map || typeof ymaps3 === \"undefined\" || map instanceof ymaps3.YMap;\n    },\n    \"update:modelValue\"(map) {\n      return !map || typeof ymaps3 === \"undefined\" || map instanceof ymaps3.YMap;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const map = shallowRef(null);\n    const layers = shallowRef([]);\n    const projection = shallowRef(null);\n    const ymapContainer = ref(null);\n    const mounted = shallowRef(false);\n    const grabbing = shallowRef(false);\n    const needsToHold = ref(0);\n    provide(\"map\", map);\n    provide(\"layers\", layers);\n    provide(\"projection\", projection);\n    provide(\"needsToHold\", needsToHold);\n    emit(\"input\", map.value);\n    emit(\"update:modelValue\", map.value);\n    const getSettings = computed(() => ({\n      ...props.settings,\n      projection: void 0\n    }));\n    const init = async () => {\n      if (!props.settings.location) {\n        throwException({\n          text: \"You must specify location in YandexMap settings\"\n        });\n      }\n      const container = ymapContainer.value;\n      if (!container) {\n        throwException({\n          text: \"<yandex-map> container is undefined after component mount.\",\n          isInternal: true\n        });\n      }\n      if (map.value)\n        map.value.destroy();\n      const settings = getSettings.value;\n      if (projection.value)\n        settings.projection = projection.value;\n      const createdMap = new ymaps3.YMap(container, settings, [\n        ...layers.value,\n        ...props.layers\n      ]);\n      map.value = createdMap;\n      emit(\"input\", map.value);\n      emit(\"update:modelValue\", map.value);\n    };\n    onMounted(async () => {\n      if (!VueYandexMaps.isLoaded.value) {\n        if (VueYandexMaps.settings.value.initializeOn === \"onComponentMount\") {\n          try {\n            await initYmaps();\n          } catch (e) {\n            console.error(\"An error occured while initializing Yandex Map with onComponentMount setting\");\n            console.error(e);\n            return;\n          }\n        } else {\n          throwException({\n            text: \"You have set up <yandex-map> component without initializing Yandex maps. Please check initializeOn setting or call initYmaps manually before registering this component.\"\n          });\n        }\n      }\n      mounted.value = true;\n      await nextTick();\n      if (needsToHold.value) {\n        await new Promise((resolve) => watch(needsToHold, () => {\n          if (!needsToHold.value)\n            resolve();\n        }, {\n          immediate: true\n        }));\n      }\n      await init();\n      let listener;\n      const setupWatcher = () => {\n        let settings = JSON.parse(JSON.stringify(toRaw(getSettings.value)));\n        watch(getSettings, (val) => {\n          var _a;\n          const rawVal = toRaw(val);\n          const clonedSettings = JSON.parse(JSON.stringify(rawVal));\n          if (props.realSettingsLocation && clonedSettings.location && map.value) {\n            if (\"center\" in clonedSettings.location && \"center\" in settings.location) {\n              settings.location.center = map.value.center;\n            } else if (\"bounds\" in clonedSettings.location && \"bounds\" in settings.location) {\n              settings.location.bounds = map.value.bounds;\n            }\n            if (\"zoom\" in clonedSettings.location && \"zoom\" in settings.location)\n              settings.location.zoom = map.value.zoom;\n          }\n          const settingsDiff = Object.keys(diff(settings, clonedSettings));\n          if (settingsDiff.length === 0)\n            return;\n          const updatedSettings = { ...clonedSettings };\n          for (const key in updatedSettings) {\n            if (!settingsDiff.includes(key))\n              delete updatedSettings[key];\n          }\n          settings = clonedSettings;\n          (_a = map.value) == null ? void 0 : _a.update(updatedSettings);\n        }, {\n          deep: true\n        });\n      };\n      if (!props.readonlySettings) {\n        setupWatcher();\n      }\n      watch(() => props.readonlySettings, (val) => {\n        if (!val)\n          ;\n        else {\n          setupWatcher();\n        }\n      });\n      watch(() => props.cursorGrab, (val) => {\n        if (!map.value)\n          return;\n        if (val) {\n          listener = new ymaps3.YMapListener({\n            onActionStart: (e) => {\n              if (e.type === \"drag\")\n                grabbing.value = true;\n            },\n            onActionEnd: (e) => {\n              if (e.type === \"drag\")\n                grabbing.value = false;\n            }\n          });\n          map.value.addChild(listener);\n        } else if (listener)\n          map.value.removeChild(listener);\n      }, { immediate: true });\n    });\n    onBeforeUnmount(() => {\n      map.value = null;\n      emit(\"input\", map.value);\n      emit(\"update:modelValue\", map.value);\n    });\n    return () => {\n      var _a;\n      const mapNodeProps = {\n        class: [\n          \"__ymap\",\n          {\n            \"__ymap--grab\": props.cursorGrab,\n            \"__ymap--grabbing\": props.cursorGrab && grabbing.value\n          }\n        ],\n        style: {\n          width: props.width,\n          height: props.height,\n          \"z-index\": props.zIndex.toString()\n        }\n      };\n      const containerNode = h(\"div\", {\n        class: \"__ymap_container\",\n        ref: ymapContainer\n      });\n      const slotsNodeProps = {\n        class: \"__ymap_slots\",\n        style: { display: \"none\" }\n      };\n      if (!mounted.value)\n        return h(props.tag, mapNodeProps, [containerNode, h(\"div\", slotsNodeProps)]);\n      return h(props.tag, mapNodeProps, [\n        containerNode,\n        h(\"div\", slotsNodeProps, (_a = slots.default) == null ? void 0 : _a.call(slots, {}))\n      ]);\n    };\n  }\n});\nfunction injectMap() {\n  if (!getCurrentInstance()) {\n    throwException({\n      text: \"injectMap must be only called on runtime.\",\n      isInternal: true\n    });\n  }\n  const map = inject(\"map\");\n  if (!map || !isRef(map)) {\n    throwException({\n      text: \"Was not able to inject valid map in injectMap.\",\n      isInternal: true\n    });\n  }\n  return map;\n}\nfunction injectLayers() {\n  if (!getCurrentInstance()) {\n    throwException({\n      text: \"injectLayers must be only called on runtime.\",\n      isInternal: true\n    });\n  }\n  const layers = inject(\"layers\");\n  if (!layers || !isRef(layers)) {\n    throwException({\n      text: \"Was not able to inject valid layers in injectLayers.\",\n      isInternal: true\n    });\n  }\n  return layers;\n}\nfunction waitTillYmapInit({ timeoutCallback } = {}) {\n  if (typeof window === \"undefined\") {\n    throwException({\n      text: \"waitTillYmapInit cannot be called on SSR.\",\n      isInternal: true\n    });\n  }\n  if (typeof ymaps3 !== \"undefined\")\n    return;\n  return new Promise((resolve, reject) => {\n    if (typeof ymaps3 === \"undefined\") {\n      let timeout;\n      if (VueYandexMaps.settings.value.mapsScriptWaitDuration !== false) {\n        timeout = setTimeout(() => {\n          timeoutCallback == null ? void 0 : timeoutCallback(timeout, true);\n          reject(new VueYandexMaps.YandexMapException(\"Was not able to wait for map initialization in waitTillYmapInit. Ensure that map was initialized. You can change this behaviour by using mapsScriptWaitDuration.\"));\n        }, typeof VueYandexMaps.settings.value.mapsScriptWaitDuration === \"number\" ? VueYandexMaps.settings.value.mapsScriptWaitDuration : 5e3);\n        timeoutCallback == null ? void 0 : timeoutCallback(timeout, false);\n      }\n      watch(VueYandexMaps.isLoaded, () => {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeoutCallback == null ? void 0 : timeoutCallback(timeout, true);\n        }\n        if (VueYandexMaps.loadStatus.value === \"loaded\") {\n          resolve();\n        } else {\n          reject(VueYandexMaps.loadError);\n        }\n      }, {\n        immediate: true\n      });\n    } else {\n      resolve();\n    }\n  });\n}\nfunction waitTillMapInit({\n  map: _map,\n  timeoutCallback\n} = {}) {\n  if (!_map && !getCurrentInstance()) {\n    throwException({\n      text: \"onMapInit must be only called on runtime.\",\n      isInternal: true\n    });\n  }\n  if (typeof window === \"undefined\") {\n    throwException({\n      text: \"waitTillMapInit cannot be called on SSR.\",\n      isInternal: true\n    });\n  }\n  const map = _map || injectMap();\n  if (map.value)\n    return;\n  return new Promise((resolve, reject) => {\n    let timeout;\n    if (VueYandexMaps.settings.value.mapsRenderWaitDuration !== false) {\n      timeout = setTimeout(() => {\n        timeoutCallback == null ? void 0 : timeoutCallback(timeout, true);\n        reject(new VueYandexMaps.YandexMapException(\"Was not able to wait for map initialization in waitTillMapInit. You can change this behaviour by using mapsRenderWaitDuration.\"));\n      }, typeof VueYandexMaps.settings.value.mapsRenderWaitDuration === \"number\" ? VueYandexMaps.settings.value.mapsRenderWaitDuration : 5e3);\n      timeoutCallback == null ? void 0 : timeoutCallback(timeout, false);\n    }\n    let watcher;\n    watcher = watch(map, () => {\n      if (map.value) {\n        watcher == null ? void 0 : watcher();\n        if (timeout) {\n          clearTimeout(timeout);\n          timeoutCallback == null ? void 0 : timeoutCallback(timeout, true);\n        }\n        resolve();\n      }\n    }, {\n      immediate: true\n    });\n  });\n}\nfunction deleteMapChild({\n  children,\n  isMercator,\n  root\n}) {\n  var _a;\n  if (!root) {\n    throwException({\n      text: \"Failed to execute deleteMapChild due to destroyed root\",\n      isInternal: true\n    });\n  }\n  if (children && !isMercator) {\n    if (typeof (root == null ? void 0 : root.value) === \"object\" && Array.isArray(root.value)) {\n      root.value = root.value.filter((x) => x !== children);\n    } else {\n      (_a = root.value) == null ? void 0 : _a.removeChild(children);\n    }\n  } else if (root.value && children && isMercator && \"update\" in root.value) {\n    root.value.update({\n      projection: void 0\n    });\n  }\n}\nasync function setupMapChildren({\n  returnOnly,\n  willDeleteByHand,\n  strictMapRoot,\n  requiredImport,\n  createFunction,\n  settings,\n  settingsUpdateIgnoreKeys,\n  isLayer,\n  isMercator,\n  isMapRoot,\n  mapRootRef,\n  duplicateInit\n}) {\n  if (!getCurrentInstance()) {\n    throwException({\n      text: \"setupMapChildren must be only called on runtime.\",\n      isInternal: true\n    });\n  }\n  const children = shallowRef();\n  const mapRoot = inject(\"mapRoot\", null);\n  const initPromises = inject(\"mapRootInitPromises\", null);\n  let childrenPromises;\n  const map = injectMap();\n  const layers = injectLayers();\n  let timeouts = null;\n  const timeoutCallback = (timeout, isDelete) => {\n    if (!timeouts)\n      timeouts = /* @__PURE__ */ new Set();\n    if (!isDelete)\n      timeouts.add(timeout);\n    else\n      timeouts.delete(timeout);\n  };\n  if (isMapRoot && !duplicateInit) {\n    provide(\"mapRoot\", mapRootRef || children);\n    childrenPromises = shallowRef([]);\n    provide(\"mapRootInitPromises\", childrenPromises);\n  }\n  if (!returnOnly && !willDeleteByHand) {\n    onBeforeUnmount(() => {\n      if (children.value) {\n        deleteMapChild({\n          children: children.value,\n          isMercator,\n          root: (mapRoot == null ? void 0 : mapRoot.value) ? mapRoot : map\n        });\n      }\n      if (timeouts == null ? void 0 : timeouts.size) {\n        timeouts.forEach((timeout) => clearTimeout(timeout));\n        timeouts.clear();\n      }\n    });\n  }\n  if (settings) {\n    let lastSettings = copy(toRaw(settings.value));\n    watch(settings, (value) => {\n      if (!value)\n        return;\n      const settingsDiff = Object.keys(diff(lastSettings, value));\n      if (settingsDiff.length === 0)\n        return;\n      const updatedSettings = { ...value };\n      for (const key in updatedSettings) {\n        if (!settingsDiff.includes(key))\n          delete updatedSettings[key];\n      }\n      const ignoreKeys = settingsUpdateIgnoreKeys && (isRef(settingsUpdateIgnoreKeys) ? settingsUpdateIgnoreKeys.value : settingsUpdateIgnoreKeys);\n      if (ignoreKeys)\n        excludeKeys(updatedSettings, ignoreKeys);\n      if (Object.keys(updatedSettings).length === 0)\n        return;\n      lastSettings = toRaw(copy(value));\n      if (children.value && \"update\" in children.value)\n        children.value.update(updatedSettings);\n    }, { deep: true });\n  }\n  if (!isLayer && !isMercator) {\n    await waitTillMapInit({ timeoutCallback });\n    if (!map.value) {\n      throwException({\n        text: \"map is undefined in setupMapChildren.\",\n        isInternal: true\n      });\n    }\n  } else {\n    await waitTillYmapInit({ timeoutCallback });\n  }\n  if (strictMapRoot) {\n    if (!(mapRoot == null ? void 0 : mapRoot.value))\n      await nextTick();\n    if (!(mapRoot == null ? void 0 : mapRoot.value)) {\n      throwException({\n        text: \"mapRoot is undefined in setupMapChildren.\",\n        isInternal: true\n      });\n    }\n  }\n  if (isMapRoot) {\n    await nextTick();\n    await Promise.all((childrenPromises == null ? void 0 : childrenPromises.value) || []);\n  }\n  let importData;\n  if (requiredImport) {\n    const importPromise = requiredImport();\n    if (initPromises == null ? void 0 : initPromises.value)\n      initPromises.value.push(Promise.resolve(importPromise));\n    importData = await importPromise;\n  }\n  children.value = createFunction(importData);\n  if (!returnOnly && map.value && !isMercator) {\n    if (initPromises == null ? void 0 : initPromises.value) {\n      await Promise.all(initPromises.value);\n      if (!requiredImport)\n        await nextTick();\n    }\n    if (typeof (mapRoot == null ? void 0 : mapRoot.value) === \"object\" && Array.isArray(mapRoot.value)) {\n      mapRoot.value = [\n        ...mapRoot.value,\n        children.value\n      ];\n    } else {\n      ((mapRoot == null ? void 0 : mapRoot.value) || map.value).addChild(children.value);\n    }\n  } else if (isLayer) {\n    layers.value.push(children.value);\n  } else if (isMercator && map.value) {\n    map.value.update({\n      projection: children.value\n    });\n  }\n  return children.value;\n}\nconst _sfc_main$l = defineComponent({\n  name: \"YandexMapListener\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapListener;\n    onMounted(async () => {\n      mapListener = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapListener(props.settings || {}),\n        settings: computed(() => props.settings)\n      });\n      emit(\"input\", mapListener);\n      emit(\"update:modelValue\", mapListener);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$k = defineComponent({\n  name: \"YandexMapDefaultFeaturesLayer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapLayer;\n    onMounted(async () => {\n      mapLayer = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapDefaultFeaturesLayer(props.settings || {}),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapLayer);\n      emit(\"update:modelValue\", mapLayer);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$j = defineComponent({\n  name: \"YandexMapDefaultSchemeLayer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  slots: Object,\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapLayer;\n    onMounted(async () => {\n      mapLayer = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapDefaultSchemeLayer(props.settings || {}),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapLayer);\n      emit(\"update:modelValue\", mapLayer);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$i = defineComponent({\n  name: \"YandexMapDefaultSatelliteLayer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapLayer;\n    onMounted(async () => {\n      mapLayer = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapDefaultSatelliteLayer(props.settings || {}),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapLayer);\n      emit(\"update:modelValue\", mapLayer);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$h = defineComponent({\n  name: \"YandexMapTileDataSource\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapChildren;\n    onMounted(async () => {\n      if (!props.settings.id) {\n        throwException({\n          text: \"You must specify id in YandexMapTileDataSource settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapTileDataSource(props.settings),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$g = defineComponent({\n  name: \"YandexMapFeatureDataSource\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapChildren;\n    onMounted(async () => {\n      if (!props.settings.id) {\n        throwException({\n          text: \"You must specify id in YandexMapFeatureDataSource settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapFeatureDataSource(props.settings),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$f = defineComponent({\n  name: \"YandexMapLayer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    let mapLayer;\n    onMounted(async () => {\n      if (!props.settings.type) {\n        throwException({\n          text: \"You must specify type in YandexMapLayer settings\"\n        });\n      }\n      mapLayer = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapLayer(props.settings || {}),\n        settings: computed(() => props.settings),\n        isLayer: true\n      });\n      emit(\"input\", mapLayer);\n      emit(\"update:modelValue\", mapLayer);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nfunction getMarkerContainerProps({\n  position,\n  containerAttrs,\n  wrapperAttrs,\n  zeroSizes\n}) {\n  const root = {\n    class: [\"__ymap-marker\"],\n    style: {}\n  };\n  const children = {\n    class: [\"__ymap-marker_wrapper\"],\n    style: {}\n  };\n  const isDefaultPosition = position === \"default\" || position === \"default default\";\n  if (position && !isDefaultPosition) {\n    if (position.startsWith(\"translate\")) {\n      children.style.transform = position;\n    } else {\n      let translateX = 0;\n      let translateY = 0;\n      const splitted = position.split(\" \");\n      for (let i = 0; i < splitted.length; i++) {\n        let local = 0;\n        const item = splitted[i];\n        switch (item) {\n          case \"top\":\n          case \"left\":\n            local = -100;\n            break;\n          case \"top-center\":\n          case \"left-center\":\n            local = -50;\n            break;\n          case \"bottom\":\n          case \"right\":\n            local = 100;\n            break;\n          case \"bottom-center\":\n          case \"right-center\":\n            local = 50;\n            break;\n          default:\n            local = 0;\n        }\n        if (item.startsWith(\"left\") || item.startsWith(\"right\"))\n          translateX = local;\n        else\n          translateY = local;\n      }\n      children.style.transform = `translate(${translateX}%, ${translateY}%)`;\n    }\n  }\n  if (zeroSizes === true || zeroSizes !== false && position && !isDefaultPosition) {\n    root.style.width = \"0\";\n    root.style.height = \"0\";\n    if (children.style.transform)\n      children.style.width = \"fit-content\";\n  }\n  const attrs = {\n    root: { ...containerAttrs ?? {} },\n    children: { ...wrapperAttrs ?? {} }\n  };\n  for (const [key, value] of Object.entries(attrs)) {\n    const obj = key === \"root\" ? root : children;\n    if (value.class) {\n      if (!Array.isArray(value.class))\n        value.class = [value.class];\n      value.class = [\n        ...obj.class,\n        ...value.class\n      ];\n    }\n    if (value == null ? void 0 : value.style) {\n      if (typeof value.style !== \"object\" || Array.isArray(value.style)) {\n        console.warn(`Style property was given in ${key} of marker, but it is not an object. Style of this prop can only be an object, therefore it was ignored.`);\n      } else {\n        value.style = {\n          ...obj.style,\n          ...value.style\n        };\n      }\n    }\n    Object.assign(obj, value);\n  }\n  return {\n    root,\n    children\n  };\n}\nfunction excludeYandexMarkerProps(props) {\n  props = { ...props };\n  const toExclude = {\n    position: true,\n    containerAttrs: true,\n    wrapperAttrs: true,\n    zeroSizes: true\n  };\n  for (const excluded in toExclude) {\n    if (excluded in props)\n      delete props[excluded];\n  }\n  return props;\n}\nconst _sfc_main$e = defineComponent({\n  name: \"YandexMapMarker\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    },\n    /**\n     * @description Sets translate(%, %) to marker to align it properly.\n     *\n     * If you want to make aligment to be like Yandex Maps 2.0, set this property to \"top left-center\".\n     * @default default (as goes in Yandex by default)\n     */\n    position: {\n      type: String\n    },\n    /**\n     * @description Allows you to add any attributes to <div class=\"__ymap-marker\"> container.\n     *\n     * Important: to pass styles, you must use object-style prop instead of string.\n     */\n    containerAttrs: {\n      type: Object,\n      default: () => ({})\n    },\n    /**\n     * @description Allows you to add any attributes to <div class=\"__ymap-marker_wrapper\"> container.\n     *\n     * Important: to pass styles, you must use object-style prop instead of string.\n     */\n    wrapperAttrs: {\n      type: Object,\n      default: () => ({})\n    },\n    /**\n     * @description Will add width and height: 0 to container.\n     *\n     * Null enables default behaviour, false disables it completely (even if position is specified).\n     *\n     * @default true if position is specified, false otherwise\n     */\n    zeroSizes: {\n      type: Boolean,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = ref(null);\n    onMounted(async () => {\n      if (!props.settings.coordinates) {\n        throwException({\n          text: \"You must specify coordinates in YandexMapMarker settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        settings: computed(() => props.settings),\n        createFunction: () => new ymaps3.YMapMarker(props.settings, element.value)\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    watch(element, () => {\n      var _a;\n      if (element.value)\n        (_a = element.value.parentNode) == null ? void 0 : _a.removeChild(element.value);\n    });\n    const rootProps = computed(() => getMarkerContainerProps({\n      position: props.position,\n      containerAttrs: props.containerAttrs,\n      wrapperAttrs: props.wrapperAttrs,\n      zeroSizes: props.zeroSizes\n    }));\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ...rootProps.value.root,\n        ref: element\n      }, [\n        h(\"div\", {\n          ...rootProps.value.children\n        }, (_a = slots.default) == null ? void 0 : _a.call(slots, {}))\n      ]);\n    };\n  }\n});\nconst _sfc_main$d = defineComponent({\n  name: \"YandexMapDefaultMarker\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const popup = ref(null);\n    const closeFunc = ref(() => {\n    });\n    const contentFunc = (close) => {\n      closeFunc.value = close;\n      return popup.value;\n    };\n    const getSettings = computed(() => {\n      const settings = { ...props.settings };\n      if (settings.popup && (typeof settings.popup.content === \"undefined\" || settings.popup.content === \"fromSlot\") && popup.value) {\n        settings.popup = {\n          ...settings.popup,\n          content: contentFunc\n        };\n      }\n      return settings;\n    });\n    onMounted(async () => {\n      if (!props.settings.coordinates) {\n        throwException({\n          text: \"You must specify coordinates in YandexMapDefaultMarker settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        createFunction: ({ YMapDefaultMarker: Marker }) => new Marker(getSettings.value),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-markers@0.0.1\"),\n        settings: getSettings\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    watch(popup, () => {\n      var _a;\n      if (popup.value)\n        (_a = popup.value.parentNode) == null ? void 0 : _a.removeChild(popup.value);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: popup\n      }, (_a = slots.popup) == null ? void 0 : _a.call(slots, { close: closeFunc.value }));\n    };\n  }\n});\nconst _sfc_main$c = defineComponent({\n  name: \"YandexMapFeature\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    onMounted(async () => {\n      if (!props.settings.geometry) {\n        throwException({\n          text: \"You must specify geometry in YandexMapFeature settings\"\n        });\n      }\n      mapChildren = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapFeature(props.settings),\n        settings: computed(() => props.settings)\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$b = defineComponent({\n  name: \"YandexMapControls\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const mapChildren = shallowRef(null);\n    onMounted(async () => {\n      if (!props.settings.position) {\n        throwException({\n          text: \"You must specify position in YandexMapControls settings\"\n        });\n      }\n      mapChildren.value = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapControls(props.settings),\n        isMapRoot: true,\n        settings: computed(() => props.settings)\n      });\n      emit(\"input\", mapChildren.value);\n      emit(\"update:modelValue\", mapChildren.value);\n    });\n    return () => {\n      var _a;\n      return mapChildren.value ? h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {})) : h(\"div\");\n    };\n  }\n});\nconst _sfc_main$a = defineComponent({\n  name: \"YandexMapControl\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = ref(null);\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: () => {\n          const control = new ymaps3.YMapControl();\n          class YMapSomeController extends ymaps3.YMapEntity {\n            _onAttach() {\n              this._element = element.value;\n              this._detachDom = ymaps3.useDomContext(this, this._element);\n            }\n            _onDetach() {\n              this._detachDom();\n              this._detachDom = null;\n              this._element = null;\n            }\n          }\n          control.addChild(new YMapSomeController({}));\n          return control;\n        },\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: element\n      }, (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$9 = defineComponent({\n  name: \"YandexMapControlButton\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = ref(null);\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapControlButton({\n          ...props.settings,\n          element: element.value\n        }),\n        settings: computed(() => ({\n          ...props.settings,\n          element: element.value\n        })),\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: element\n      }, (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$8 = defineComponent({\n  name: \"YandexMapGeolocationControl\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: (controls) => new controls.YMapGeolocationControl(props.settings),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-controls@0.0.1\"),\n        settings: computed(() => props.settings),\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$7 = defineComponent({\n  name: \"YandexMapZoomControl\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  slots: Object,\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: (controls) => new controls.YMapZoomControl(props.settings),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-controls@0.0.1\"),\n        settings: computed(() => props.settings),\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$6 = defineComponent({\n  name: \"YandexMapCartesianProjection\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    bounds: {\n      type: Array,\n      required: true\n    },\n    cycled: {\n      type: Array\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    const projection = inject(\"projection\");\n    onMounted(async () => {\n      if (!projection)\n        return;\n      const cartesian = await setupMapChildren({\n        isMercator: true,\n        createFunction: ({ Cartesian: CartesianClass }) => new CartesianClass(props.bounds, props.cycled),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-cartesian-projection@0.0.1\")\n      });\n      projection.value = cartesian;\n      emit(\"input\", cartesian);\n      emit(\"update:modelValue\", cartesian);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$5 = defineComponent({\n  name: \"YandexMapSphericalMercatorProjection\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    hold(status) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const hold = inject(\"needsToHold\");\n    hold.value++;\n    const projection = inject(\"projection\");\n    onMounted(async () => {\n      if (!projection) {\n        hold.value--;\n        return;\n      }\n      const mercator = await setupMapChildren({\n        isMercator: true,\n        createFunction: ({ SphericalMercator: Mercator }) => new Mercator(),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-spherical-mercator-projection@0.0.1\")\n      });\n      projection.value = mercator;\n      emit(\"input\", mercator);\n      emit(\"update:modelValue\", mercator);\n      hold.value--;\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$4 = defineComponent({\n  name: \"YandexMapHint\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    // Property that you will set on YandexMapMarker or YandexMapFeature to display hint content\n    hintProperty: {\n      type: String,\n      required: true\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = shallowRef(null);\n    const hintContent = shallowRef(\"\");\n    onMounted(async () => {\n      await setupMapChildren({\n        createFunction: ({\n          YMapHint: MapHint,\n          YMapHintContext\n        }) => {\n          mapChildren = new MapHint({\n            hint: (object) => {\n              var _a;\n              return (_a = object == null ? void 0 : object.properties) == null ? void 0 : _a[props.hintProperty];\n            }\n          });\n          class Hint extends ymaps3.YMapEntity {\n            _onAttach() {\n              const e = this;\n              e._element = element.value;\n              e._detachDom = ymaps3.useDomContext(e, e._element, null);\n              e._watchContext(YMapHintContext, () => {\n                var _a;\n                hintContent.value = (_a = e._consumeContext(YMapHintContext)) == null ? void 0 : _a[props.hintProperty];\n              }, { immediate: true });\n            }\n            _onDetach() {\n              this._detachDom();\n            }\n          }\n          mapChildren.addChild(new Hint({}));\n          return mapChildren;\n        },\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-hint@0.0.1\")\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: element\n      }, (_a = slots.default) == null ? void 0 : _a.call(slots, { content: hintContent.value }));\n    };\n  }\n});\nconst _sfc_main$3 = defineComponent({\n  name: \"YandexMapOpenMapsButton\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: ({ YMapOpenMapsButton: OpenMapsButton }) => new OpenMapsButton(props.settings),\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-controls-extra\"),\n        settings: computed(() => props.settings),\n        strictMapRoot: true\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main$2 = defineComponent({\n  name: \"YandexMapClusterer\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    },\n    settings: {\n      type: Object,\n      default: () => ({})\n    },\n    /**\n     * @description All custom (non-settings) props are also supported\n     */\n    clusterMarkerProps: {\n      type: Object,\n      default: () => ({})\n    },\n    /**\n     * @description Size of the grid division in pixels\n     *\n     * Used in settings.method via Yandex clusterByGrid method\n     *\n     * @see https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/clusterer/\n     * @see https://yandex.ru/dev/jsapi30/doc/en/ref/packages/clusterer/\n     */\n    gridSize: {\n      type: Number,\n      default: 64\n    },\n    /**\n     * @description Zooms to bounds of features of cluster\n     */\n    zoomOnClusterClick: {\n      type: [Boolean, Object],\n      default: false\n    }\n  },\n  slots: Object,\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    },\n    // Exact features bounds returned on cluster click\n    trueBounds(bounds) {\n      return bounds.length === 2;\n    },\n    // Auto-corrected features bounds returned on cluster click\n    updatedBounds(bounds) {\n      return bounds.length === 2;\n    }\n  },\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const map = injectMap();\n    const mapChildren = shallowRef(null);\n    const entities = shallowRef([]);\n    const clusterFeatures = ref([]);\n    let _clusterByGrid;\n    const tickTimeout = computed(() => props.settings.tickTimeout ?? 200);\n    const getSettings = computed(() => {\n      const settings = { ...props.settings };\n      if (!settings.method && _clusterByGrid)\n        settings.method = _clusterByGrid == null ? void 0 : _clusterByGrid({ gridSize: props.gridSize });\n      settings.tickTimeout = tickTimeout.value;\n      const marker = (feature) => {\n        const entity = entities.value.find((x) => x._props.id === feature.id);\n        if (!entity) {\n          throwException({\n            text: `No entity with id ${feature.id} (coordinates: ${feature.geometry.coordinates.join(\", \")}) were found in YandexMapClusterer.`,\n            isInternal: true,\n            warn: true\n          });\n          return new ymaps3.YMapMarker({ coordinates: feature.geometry.coordinates });\n        }\n        return entity;\n      };\n      const cluster = (coordinates) => {\n        const foundCluster = clusterFeatures.value.find((x) => JSON.stringify(x.clusterer.lnglat) === JSON.stringify(coordinates));\n        if (!foundCluster) {\n          throwException({\n            text: `No element with coordinates of ${coordinates.join(\", \")} were found in YandexMapClusterer.`,\n            isInternal: true,\n            warn: true\n          });\n          return new ymaps3.YMapMarker({ coordinates });\n        }\n        return foundCluster.element;\n      };\n      const features = entities.value.map((entity, i) => {\n        if (!entity._props.id) {\n          entity.update({\n            id: Math.random().toString() + Date.now().toString()\n          });\n        }\n        return {\n          type: \"Feature\",\n          id: entity._props.id,\n          geometry: {\n            type: \"Point\",\n            coordinates: entity._props.coordinates\n          },\n          properties: \"properties\" in entity._props ? entity._props.properties : {}\n        };\n      });\n      settings.onRender = (clustersList) => {\n        clusterFeatures.value = clustersList.map((clusterer) => {\n          var _a;\n          return {\n            clusterer,\n            element: ((_a = clusterFeatures.value.find((x) => x.clusterer.clusterId === clusterer.clusterId)) == null ? void 0 : _a.element) || new ymaps3.YMapCollection({})\n          };\n        });\n        if (props.settings.onRender)\n          return props.settings.onRender(clustersList);\n      };\n      return {\n        ...settings,\n        marker,\n        features,\n        cluster\n      };\n    });\n    const update = async () => {\n      var _a, _b;\n      await nextTick();\n      (_a = mapChildren.value) == null ? void 0 : _a.update(getSettings.value);\n      (_b = mapChildren.value) == null ? void 0 : _b._render();\n      setTimeout(() => {\n        var _a2;\n        return (_a2 = mapChildren.value) == null ? void 0 : _a2._render();\n      }, tickTimeout.value);\n    };\n    watch(() => [props.settings, props.gridSize], () => {\n      update();\n    }, {\n      deep: true\n    });\n    const init = async () => {\n      mapChildren.value = await setupMapChildren({\n        createFunction: ({\n          YMapClusterer: Clusterer,\n          clusterByGrid: _clusterByGrid_\n        }) => {\n          _clusterByGrid = _clusterByGrid_;\n          return new Clusterer(getSettings.value);\n        },\n        requiredImport: () => ymaps3.import(\"@yandex/ymaps3-clusterer@0.0.1\"),\n        isMapRoot: true,\n        mapRootRef: entities\n      });\n      emit(\"input\", mapChildren.value);\n      emit(\"update:modelValue\", mapChildren.value);\n    };\n    watch(entities, async () => {\n      await nextTick();\n      update();\n    });\n    onMounted(() => {\n      init();\n    });\n    return () => {\n      var _a, _b, _c, _d, _e;\n      if (!mapChildren.value)\n        return h(\"div\");\n      const features = clusterFeatures.value.filter((x) => x.clusterer.features.length > 1);\n      const containerProps = getMarkerContainerProps({\n        position: ((_a = props.clusterMarkerProps) == null ? void 0 : _a.position) ?? \"top-center left-center\",\n        containerAttrs: (_b = props.clusterMarkerProps) == null ? void 0 : _b.containerAttrs,\n        wrapperAttrs: (_c = props.clusterMarkerProps) == null ? void 0 : _c.wrapperAttrs,\n        zeroSizes: (_d = props.clusterMarkerProps) == null ? void 0 : _d.zeroSizes\n      });\n      const clusterSlots = features.map(({\n        clusterer,\n        element\n      }, index) => {\n        var _a2;\n        return h(\n          \"div\",\n          {\n            ...containerProps.root,\n            key: `${clusterer.clusterId}_${index}_${clusterer.features.length}_${clusterer.lnglat.join(\",\")}`,\n            ref: async (item) => {\n              if (!item)\n                return;\n              await nextTick();\n              try {\n                element.children.forEach((x) => element.removeChild(x));\n                element.addChild(new ymaps3.YMapMarker({\n                  ...excludeYandexMarkerProps(props.clusterMarkerProps),\n                  coordinates: clusterer.lnglat,\n                  onClick: async (e) => {\n                    var _a3, _b2, _c2, _d2;\n                    (_b2 = (_a3 = props.clusterMarkerProps).onClick) == null ? void 0 : _b2.call(_a3, e);\n                    if (clusterer.features.length >= 2) {\n                      const {\n                        minLongitude,\n                        minLatitude,\n                        maxLongitude,\n                        maxLatitude\n                      } = clusterer.features.map((x) => x.geometry.coordinates).reduce(\n                        (acc, [longitude, latitude]) => ({\n                          minLongitude: Math.min(acc.minLongitude, longitude),\n                          minLatitude: Math.min(acc.minLatitude, latitude),\n                          maxLongitude: Math.max(acc.maxLongitude, longitude),\n                          maxLatitude: Math.max(acc.maxLatitude, latitude)\n                        }),\n                        {\n                          minLongitude: Infinity,\n                          minLatitude: Infinity,\n                          maxLongitude: -Infinity,\n                          maxLatitude: -Infinity\n                        }\n                      );\n                      const settings = typeof props.zoomOnClusterClick === \"object\" ? props.zoomOnClusterClick : {};\n                      const bounds = [[minLongitude, maxLatitude], [maxLongitude, minLatitude]];\n                      emit(\"trueBounds\", bounds);\n                      if (!props.zoomOnClusterClick)\n                        return;\n                      const defaultDuration = settings.duration ?? 500;\n                      if (settings.strategy === \"boundsCorrect\") {\n                        const latDiff = maxLatitude - minLatitude;\n                        const longDiff = maxLongitude - minLongitude;\n                        const updatedBounds = [[minLongitude - longDiff, maxLatitude - latDiff], [maxLongitude + longDiff, minLatitude + latDiff]];\n                        emit(\"updatedBounds\", updatedBounds);\n                        (_c2 = map.value) == null ? void 0 : _c2.setLocation({\n                          bounds: updatedBounds,\n                          duration: defaultDuration,\n                          easing: settings.easing\n                        });\n                      } else {\n                        let { center, zoom } = await useYMapsLocationFromBounds({\n                          bounds,\n                          map: map.value\n                        });\n                        const originalZoom = zoom;\n                        zoom = Math.floor(zoom);\n                        const diff2 = originalZoom - zoom;\n                        if (!settings.disableMinimalZoomCorrectDiff && diff2 < 0.5) {\n                          zoom -= 1;\n                        }\n                        (_d2 = map.value) == null ? void 0 : _d2.setLocation({\n                          center,\n                          zoom,\n                          duration: defaultDuration,\n                          easing: settings.easing\n                        });\n                        await sleep(defaultDuration + 50);\n                        if (map.value)\n                          emit(\"updatedBounds\", map.value.bounds);\n                      }\n                    }\n                  }\n                }, item));\n              } catch (e) {\n                console.error(e);\n              }\n            },\n            attrs: {\n              coordinates: JSON.stringify(clusterer.lnglat)\n            },\n            // @ts-ignore\n            coordinates: JSON.stringify(clusterer.lnglat)\n          },\n          [\n            h(\"div\", {\n              ...containerProps.children\n            }, (_a2 = slots.cluster) == null ? void 0 : _a2.call(slots, {\n              clusterer,\n              coordinates: clusterer.lnglat,\n              length: clusterer.features.length\n            }))\n          ]\n        );\n      });\n      return h(\"div\", [\n        ...((_e = slots.default) == null ? void 0 : _e.call(slots, {})) || [],\n        h(\"div\", {\n          key: features.map((x) => x.clusterer.clusterId).join(\",\")\n        }, [clusterSlots])\n      ]);\n    };\n  }\n});\nconst _sfc_main$1 = defineComponent({\n  name: \"YandexMapCollection\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const mapChildren = shallowRef(null);\n    onMounted(async () => {\n      mapChildren.value = await setupMapChildren({\n        createFunction: () => new ymaps3.YMapCollection({}),\n        isMapRoot: true\n      });\n      emit(\"input\", mapChildren.value);\n      emit(\"update:modelValue\", mapChildren.value);\n    });\n    return () => {\n      var _a;\n      if (!mapChildren.value)\n        return h(\"div\");\n      return h(\"div\", (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nconst _sfc_main = defineComponent({\n  name: \"YandexMapEntity\",\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    modelValue: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: {\n    \"input\"(item) {\n      return true;\n    },\n    \"update:modelValue\"(item) {\n      return true;\n    }\n  },\n  slots: Object,\n  setup(props, {\n    slots,\n    emit\n  }) {\n    let mapChildren;\n    const element = ref(null);\n    onMounted(async () => {\n      mapChildren = await setupMapChildren({\n        createFunction: () => {\n          class Entity extends ymaps3.YMapEntity {\n            _onAttach() {\n              this._element = element.value;\n              this._detachDom = ymaps3.useDomContext(this, this._element);\n            }\n            _onDetach() {\n              this._detachDom();\n              this._detachDom = null;\n              this._element = null;\n            }\n          }\n          return new Entity({});\n        }\n      });\n      emit(\"input\", mapChildren);\n      emit(\"update:modelValue\", mapChildren);\n    });\n    return () => {\n      var _a;\n      return h(\"div\", {\n        ref: element\n      }, (_a = slots.default) == null ? void 0 : _a.call(slots, {}));\n    };\n  }\n});\nexport {\n  VueYandexMaps,\n  _sfc_main$m as YandexMap,\n  _sfc_main$6 as YandexMapCartesianProjection,\n  _sfc_main$2 as YandexMapClusterer,\n  _sfc_main$1 as YandexMapCollection,\n  _sfc_main$a as YandexMapControl,\n  _sfc_main$9 as YandexMapControlButton,\n  _sfc_main$b as YandexMapControls,\n  _sfc_main$k as YandexMapDefaultFeaturesLayer,\n  _sfc_main$d as YandexMapDefaultMarker,\n  _sfc_main$i as YandexMapDefaultSatelliteLayer,\n  _sfc_main$j as YandexMapDefaultSchemeLayer,\n  _sfc_main as YandexMapEntity,\n  _sfc_main$c as YandexMapFeature,\n  _sfc_main$g as YandexMapFeatureDataSource,\n  _sfc_main$8 as YandexMapGeolocationControl,\n  _sfc_main$4 as YandexMapHint,\n  _sfc_main$f as YandexMapLayer,\n  _sfc_main$l as YandexMapListener,\n  _sfc_main$e as YandexMapMarker,\n  _sfc_main$3 as YandexMapOpenMapsButton,\n  _sfc_main$5 as YandexMapSphericalMercatorProjection,\n  _sfc_main$h as YandexMapTileDataSource,\n  _sfc_main$7 as YandexMapZoomControl,\n  createYmaps,\n  createYmapsOptions,\n  createYmapsVue2,\n  initYmaps,\n  useYMapsLocationFromBounds\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}